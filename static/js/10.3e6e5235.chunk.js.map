{"version":3,"sources":["common/hooks.ts","PatientDetail/gql.ts","assets/icon/collapse.svg","PatientDetail/styles.ts","PatientDetail/components/StudyList.tsx","common/shortcut.ts","assets/icon/settings.svg","PatientDetail/components/ThreeDViewer.tsx","PatientDetail/components/ImageViewer.tsx","PatientDetail/components/History.tsx","PatientDetail/hooks.ts","PatientDetail/components/OASummary.tsx","assets/icon/backspace.svg","PatientDetail/components/LayoutPanel.tsx","Toolbar/components/IconText.tsx","assets/icon/import.svg","assets/icon/layout.svg","assets/icon/ai.svg","assets/icon/3d.svg","assets/icon/analytics.svg","assets/icon/more.svg","assets/icon/fleshremoval.svg","assets/icon/layout_1x1.svg","assets/icon/layout_1x2.svg","assets/icon/layout_2x1.svg","assets/icon/layout_2x2.svg","assets/icon/brightness.svg","assets/icon/pan.svg","assets/icon/measurement.svg","assets/icon/magnifier.svg","Toolbar/components/DicomTool.tsx","Toolbar/styles.ts","assets/icon/knee.svg","assets/icon/hip.svg","assets/icon/spine.svg","assets/icon/shoulder.svg","Toolbar/components/AiModelTabs.tsx","assets/icon/papa.svg","assets/icon/palat.svg","assets/icon/hp.svg","Toolbar/components/HangingProtocol.tsx","Toolbar/Toolbar.tsx","PatientDetail/PatientDetail.tsx","PatientDetail/PatientDetailContainer.tsx"],"names":["useQueryParams","params","search","URLSearchParams","useLocation","Array","isArray","map","p","get","makeStylesWithIndex","styles","options","makeStyles","index","GET_PATIENT","gql","GET_STUDIES","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","SvgCollapse","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","ref","id","ForwardRef","usePatientDetailStyles","patientDetail","userSelect","sidebar","minWidth","maxWidth","background","main","flexGrow","overflow","useSummaryStyles","summary","overflowY","display","color","fontSize","lineHeight","position","historyDots","top","right","flexDirection","border","borderRadius","marginBottom","cursor","boxShadow","section","padding","withThumbnail","textAlign","fontWeight","customGrid","borderBottom","margin","paddingLeft","direction","paddingBottom","klGrade","resultRow","alignSelf","minHeight","dialog","aspectRatio","useStudyListStyles","studyList","boxSizing","patientName","year","series","marginRight","transition","thumbnail","useLayoutPanelStyles","layoutPanel","item","overlap","left","opacity","backspace","zIndex","useThreeDStyles","xtkWrapper","backgroundColor","loading","settingIcon","thresholdPanel","slider","label","marginTop","value","ListItem","listItem","isActive","onDragEnd","classes","useDrag","type","end","monitor","dropResult","getDropResult","previousItemId","collect","isDragging","drag","className","style","src","alt","List","defaultVisible","onOpenAi","activeItemMap","useState","visible","toggleVisible","showAiItems","toggleAiItems","onClickAiIcon","useCallback","Box","component","justifyContent","alignItems","dayjs","created_at","format","inference","onClick","transform","images","img","parseImageItem","series_inst_uid","has","filter","func","inf","parseInferenceItem","StudyList","studiesByYear","activeItems","patientId","useQuery","variables","error","data","newMap","Map","forEach","set","getActiveItemsMap","setActiveItemMap","newItemId","prev","delete","patient","view_no","toString","padStart","name","entries","studyGroup","mb","study","isVisible","findIndex","study_inst_uid","KeyCode","shortcut$","shortcut","keyDown$","fromEvent","document","keyUp$","keyEvents$","merge","pipe","distinctUntilChanged","a","b","code","share","keyCodeEvents$","s","charCode","event","valueOf","combineLatest","arr","every","fillOpacity","SvgSettings","DEFAULT_THRESHOLDS","DEFAULT_WINDOWS","DEFAULT_COLOR","r","g","ThreeDViewer","filepath","isReady","toggleReady","renderRef","useRef","window","X","renderer3D","volumeRef","volume","thresholds","windows","config","setConfig","showPanel","togglePanel","useEffect","current","container","init","file","volumeRendering","add","camera","render","onShowtime","lowerThreshold","upperThreshold","windowLow","windowHigh","highThreshold","timeout","setTimeout","clearTimeout","CircularProgress","size","Typography","gutterBottom","Slider","min","max","step","onChange","_","newValue","toFixed","defaultValue","newThresholds","newWindows","onChangeComplete","rgb","maxColor","FleshRemoval","setOpacity","divRef","canvasRef","prevOpacityRef","currentGammaCorrectionRef","calculateGammaCorrection","gammaCorrection","delta","newGamma","mouseDowns$","mouseUps$","mouseMoves$","subscription","mergeMap","mouseDown","throttle","interval","mouseMove","clientY","takeUntil","tap","subscribe","nextOpacity","unsubscribe","Image","crossOrigin","FILES_URL","fleshRemoval","resizeListener","clientWidth","clientHeight","getContext","drawImage","onload","addEventListener","ctx","clientX","mouseUpEvent","imageData","getImageData","Math","pow","putImageData","removeEventListener","decrease","ControlLeft","KeyR","Minus","increase","Equal","draggable","original","ImageViewer","plugin","isFocused","enableFleshRemoval","enableCT","elementRef","fleshRemovalPluginIdx","result","ctPluginIdx","cornerstone","imageIds","stack","currentImageIdIndex","then","image","cornerstoneTools","globalSubject","next","SubjectTopic","InitXrayTool","deleteAll","Delete","angleAnnotations","lengthAnnotations","deleteSelected","idx","active","splice","outline","tabIndex","onContextMenu","e","preventDefault","useStyles","history","parts","chartSection","labels","datasets","lineTension","pointRadius","hitRadius","showLine","context","dataIndex","dataset","scales","yAxes","ticks","beginAtZero","fontFamily","fontColor","xAxes","autoSkip","callback","date","Date","getMonth","getDate","getFullYear","legend","tooltips","xPadding","yPadding","callbacks","tooltipItem","xLabel","getDay","labelTextColor","parseFloat","titleFontColor","titleFontSize","titleFontFamily","bodyFontStyle","bodyFontSize","displayColors","borderColor","borderWidth","History","ItemContext","React","createContext","allItems","gradeColor","grade","parseImageFilepath","imgPath","split","path","Detected","detected","CustomGrid","rightKnee","leftKnee","Grid","xs","justify","HistoryDots","oaHistories","currentResultIdx","onSwitchHistory","OASummary","defaultId","currentImgPath","setCurrentImgPath","useContext","useMemo","setResultIdx","previousResultIdx","onOpenImageDialog","customGridClasses","L","R","KL_GRADE","js","medJSN","latJSN","flex","mJSW","std_mJSW","osteophyte","sclerosis","alignment","FTA","Dialog","open","onClose","paper","SvgBackspace","GRID_SIZE","LayoutItem","useDrop","accept","drop","onDropItem","dragIdx","itemId","isOver","canDrop","children","LayoutPanel","layout","items","focusedIdx","changeLayout","backFromFullscreen","focusItem","switchTargetItem","dispatchEvent","Event","onDoubleClickItem","renderContent","pluginType","gridHeight","isFullscreenMode","GRIDS","onDoubleClick","TYPE_COLOR_MAP","primary","secondary","TYPE_BACKGROUND_MAP","iconText","pointerEvents","disabled","svg","text","whiteSpace","IconText","icon","SvgImport","_ref5","SvgLayout","SvgAi","Svg3D","SvgAnalytics","SvgMore","mask","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref30","_ref31","_ref32","_ref33","_ref34","_ref35","_ref36","_ref37","_ref38","_ref39","_ref40","_ref41","_ref42","_ref43","_ref44","_ref45","_ref46","_ref47","_ref48","_ref49","_ref50","_ref51","_ref52","_ref53","_ref54","_ref55","_ref56","_ref57","_ref58","_ref59","_ref60","_ref61","_ref62","_ref63","_ref64","_ref65","_ref66","_ref67","SvgFleshremoval","SvgLayout1X1","SvgLayout1X2","SvgLayout2X1","SvgLayout2X2","SvgBrightness","SvgPan","SvgMeasurement","SvgMagnifier","MouseClick","useMenuStyles","layoutMenu","menuItem","marginLeft","useAiModelTabsStyles","theme","from","to","root","animation","transitions","easing","easeInOut","tabs","tab","funcTabs","funcTab","useHangingProtocolStyles","MENU_ITEMS","tool","DicomTool","dicomToolType","onSwitchDicomTool","prevDicomTool","showLayoutMenu","toggleLayoutMenu","menuAnchor","setMenuAnchor","configuration","invert","preventZoomOutsideImage","minScale","maxScale","brightness","KeyB","panZoom","KeyZ","KeyD","angle","KeyG","magnify","KeyM","mouseButtonMask","Left","currentTarget","Menu","anchorEl","isSelected","MenuItem","selected","SvgKnee","SvgHip","SvgSpine","clipPath","SvgShoulder","Tab","ImgText","AiModelTabs","category","setCategory","setFunc","laterality","setLaterality","studyIds","client","readQuery","query","ids","onSwitchFunc","newFunc","newLaterality","studies","SwitchFunc","SummaryImg","HistoryImg","ThreeDRightImg","ThreeDLeftImg","SvgPapa","SvgPalat","SvgHp","parsePredictionItemsMap","predictions","HangingProtocol","currentSeriesId","onSwitchHangingProtocol","hpItemMap","setHpItemMap","onSwitchHp","protocol","parseHangingProtocolItems","onSwitchLaterality","Button","variant","Toolbar","currentItem","onSwitchPlugin","onSwitchLayout","pl","pr","PatientDetail","defaultItems","DEFAULT_LAYOUT","setLayout","setActiveItems","setFocusedIdx","prevLayout","toolType","targetIdx","newItems","onChangeLayout","newLayout","findTargetItemIdx","arrowDown","ArrowDown","nextItemIdx","arrowUp","ArrowUp","prevItemIdx","arrowRight","ArrowRight","arrowLeft","ArrowLeft","targetSeriesInstUid","targetItem","find","DndProvider","backend","HTML5Backend","wrap","flattenAllSeriesItems","push","PatientDetailContainer","setStudiesByYear","setDefaultItems","contextValue","parseStudiesByYear","emptyItems","parseDefaultItems","includes","sop_inst_uid","parseSpecificItems","Provider","cornerstoneWADOImageLoader","dicomParser","cornerstoneMath","Hammer","showSVGCursors","mouseEnabled"],"mappings":"0MAIO,SAASA,EACdC,GAEA,IAAMC,EAAS,IAAIC,gBAAgBC,cAAcF,QAEjD,OAAIG,MAAMC,QAAQL,GACRA,EAAoBM,KAAI,SAACC,GAAD,OAAON,EAAOO,IAAID,MAG7CN,EAAOO,IAAIR,GAOb,SAASS,EAIdC,EAAwCC,GACxC,OAAOC,YAAWF,EAAD,aAAWG,MAAO,GAAMF,M,oICvB9BG,EAAcC,cAAH,mKAWXC,EAAcD,cAAH,0oB,oDCbxB,SAASE,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,EAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,uQACHC,KAAM,UAGR,SAASC,EAAYC,EAAMC,GACzB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQhB,EAAyBY,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO1B,EAAS,CACtD+B,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAGpB,IAAIS,EAA0B,aAAiBZ,G,GAChC,I,gBC7BFa,EAAyB9C,YAAoB,CACxD+C,cAAe,CACbP,OAAQ,QACRQ,WAAY,QAEdC,QAAS,CACPC,SAAU,QACVC,SAAU,QACVC,WAAY,2BAEdC,KAAM,CACJD,WAAY,0BACZE,SAAU,EACVC,SAAU,YAIDC,EAAmBxD,YAAuD,CACrFyD,QAAS,CACPL,WAAY,0BACZZ,OAAQ,OACRkB,UAAW,SACX,uBAAwB,CACtBC,QAAS,QAEX,UAAW,CACTpB,MAAO,OAETqB,MAAO,UACPC,SAAU,OACVC,WAAY,OACZC,SAAU,YAEZC,YAAa,CACXD,SAAU,WACVE,IAAK,OACLC,MAAO,OACPP,QAAS,OACTQ,cAAe,SACf,SAAU,CACR5B,MAAO,MACPC,OAAQ,MACR4B,OAAQ,oBACRC,aAAc,OACdC,aAAc,OACd,UAAW,CACTlB,WAAY,UACZmB,OAAQ,UACRC,UAAW,2BAEb,WAAY,CACVpB,WAAY,aAIlBqB,QAAS,CACPC,QAAS,SAACpC,GAAD,OAAiBA,EAAMqC,cAAgB,WAAa,QAE/DvC,MAAO,CACLwB,MAAO,UACPR,WAAY,wBACZwB,UAAW,SACXC,WAAY,OACZhB,SAAU,OACVC,WAAY,SACZY,QAAS,WACTJ,aAAc,QAEhBQ,WAAY,CACVC,aAAc,uCACd,WAAY,CACVH,UAAW,SACXC,WAAY,IACZ3B,SAAU,QACV8B,OAAQ,UAEV,UAAW,CACTC,YAAa,SAGjBC,UAAW,CACTC,cAAe,OACfvB,MAAO,2BACPiB,WAAY,KAEdO,QAAS,CACPV,QAAS,WACTJ,aAAc,QAEhBe,UAAW,CACTF,cAAe,OACfb,aAAc,OACd,WAAY,CACVH,cAAe,SACfmB,UAAW,WAEb,8BAA+B,CAC7BC,UAAW,OACX,UAAW,CACT1B,SAAU,OACVC,WAAY,OACZF,MAAO,2BACP,kBAAmB,CACjBU,aAAc,UAIpB,eAAgB,CACdV,MAAO,WAET,QAAS,CACPrB,MAAO,QACPC,OAAQ,UAGZgD,OAAQ,CACNzB,SAAU,WACV,QAAS,CACPvB,OAAQ,OACRiD,YAAa,MAKNC,EAAqB1F,YAAoB,CACpD2F,UAAW,CACTnD,OAAQ,OACRoB,MAAO,UACPc,QAAS,eACTkB,UAAW,aACXxC,WAAY,2BAEdyC,YAAa,CACXhC,SAAU,OACVC,WAAY,OACZe,WAAY,IACZM,cAAe,MACfJ,aAAc,wCAEhBe,KAAM,CACJnC,QAAS,QACTE,SAAU,OACVC,WAAY,OACZF,MAAO,UACPoB,OAAQ,gBAEVe,OAAQ,CACNlC,SAAU,OACVC,WAAY,OACZF,MAAO,UACPuB,cAAe,MACfb,aAAc,MACdS,aAAc,uCACd,UAAW,CACTT,aAAc,OAEhB,aAAc,CACZT,SAAU,OACVC,WAAY,OACZvB,MAAO,OACPC,OAAQ,OACRY,WAAY,UACZiB,aAAc,OACdV,QAAS,eACTiB,UAAW,SACXoB,YAAa,MACb,UAAW,CACTzB,OAAQ,UACRnB,WAAY,YAGhB,gBAAiB,CACf6C,WAAY,8BACZ1B,OAAQ,UACR,UAAW,CACTnB,WAAY,qBACZiB,aAAc,UAIpB6B,UAAW,CACTvC,QAAS,eACTY,OAAQ,OACRhC,MAAO,OACPC,OAAQ,OACRwD,YAAa,MACb3B,aAAc,MACd,UAAW,CACT9B,MAAO,OACPC,OAAQ,OACR6B,aAAc,UAKP8B,EAAuBnG,YAAoB,CACtDoG,YAAa,CACXrC,SAAU,WACVvB,OAAQ,OAEV6D,KAAM,CACJ9D,MAAO,OACPC,OAAQ,OACR+C,UAAW,QACXxB,SAAU,YAEZuC,QAAS,CACPvC,SAAU,WACVE,IAAK,EACLsC,KAAM,EACNhE,MAAO,OACPC,OAAQ,OACRgE,QAAS,GAEXC,UAAW,CACT1C,SAAU,WACVE,IAAK,MACLsC,KAAM,OACNG,OAAQ,GACR,UAAW,CACTnC,OAAQ,UACRnB,WAAY,UACZiB,aAAc,WAKPsC,EAAkB3G,YAAoB,CACjD4G,WAAY,CACVC,gBAAiB,UACjBrE,OAAQ,OACR,sBAAuB,CACrBgE,QAAS,iBAGbM,QAAS,CACP/C,SAAU,WACVE,IAAK,EACLsC,KAAM,EACNhE,MAAO,OACPC,OAAQ,OACRY,WAAY,oBACZ,cAAe,CACbW,SAAU,WACVwC,KAAM,mBACNtC,IAAK,qBAGT8C,YAAa,CACXhD,SAAU,WACVE,IAAK,GACLC,MAAO,GACPQ,QAAS,MACT,UAAW,CACTtB,WAAY,UACZiB,aAAc,OACdE,OAAQ,YAGZyC,eAAgB,CACdpD,MAAO,UACPG,SAAU,WACVE,IAAK,GACLC,MAAO,EACP+B,WAAY,uBACZ7C,WAAY,kBACZb,MAAO,QACPqD,UAAW,aACXpD,OAAQ,MACRgE,QAAS,EACT,WAAY,CACVhE,OAAQ,QACRkC,QAAS,MACT8B,QAAS,IAGbS,OAAQ,CACN1E,MAAO,OAET2E,MAAO,CACLrD,SAAU,OACVsD,UAAW,QAEbC,MAAO,CACLpC,OAAQ,UACR9B,SAAU,OACV0C,UAAW,gB,gBCrQf,IAAMyB,EAID,SAAC/E,GAAW,IACPgF,EAAkChF,EAAlCgF,SAAUC,EAAwBjF,EAAxBiF,SAAUC,EAAclF,EAAdkF,UACtBC,EAAU/B,IAFF,EAGiBgC,aAAQ,iBAAO,CAC5CC,KAAM,MACNtB,KAAMiB,EACNM,IAAK,SAACvB,EAAMwB,GACV,IAAMC,EAAaD,EAAQE,gBACvB1B,GAAQyB,GACVN,EAAUM,EAAWE,eAAgB3B,EAAKzD,KAG9CqF,QAAS,SAACJ,GAAD,MAAc,CACrBK,WAAYL,EAAQK,mBAbV,mBAGLA,EAHK,KAGLA,WAAcC,EAHT,KAiBR3B,EAAU0B,EAAa,GAAM,EAEnC,OACE,qBACEvF,IAAKwF,EACLC,UAAWX,EAAQvB,UACnBmC,MAAO,CACLjE,OAAQmD,EAAW,oBAAsB,OACzCf,WALJ,SAQE,qBAAK8B,IAAKhB,EAASpB,UAAWqC,IAAKjB,EAAS1E,QAK5C4F,EAMD,SAAC,GAAoE,IAAlEzC,EAAiE,EAAjEA,OAAQ0C,EAAyD,EAAzDA,eAAgBC,EAAyC,EAAzCA,SAAUlB,EAA+B,EAA/BA,UAAWmB,EAAoB,EAApBA,cAC7ClB,EAAU/B,IADuD,EAEtCkD,mBAASH,GAF6B,mBAEhEI,EAFgE,KAEvDC,EAFuD,OAGlCF,oBAAS,GAHyB,mBAGhEG,EAHgE,KAGnDC,EAHmD,KAKjEC,EAAgBC,uBAAY,WAChCF,GAAc,GACdN,MACC,CAACA,IAEJ,OACE,sBAA6CN,UAAWX,EAAQ1B,OAAhE,UACE,eAACoD,EAAA,EAAD,CACEC,UAAU,OACVzF,QAAQ,OACR0F,eAAe,gBACfC,WAAW,SACXlB,UAAU,OALZ,UAOGmB,IAAMxD,EAAOyD,YAAYC,OAAO,SACjC,eAACN,EAAA,EAAD,CAAKxF,QAAQ,OAAO2F,WAAW,SAA/B,UACGvD,EAAO2D,UAAU5I,OAAS,GACzB,sBAAMsH,UAAU,UAAUuB,QAASV,EAAnC,gBAIF,cAAC,EAAD,CACEb,UAAU,aACVC,MAAO,CAAEuB,UAAWf,EAAU,iBAAmB,QACjDc,QAAS,kBAAMb,GAAeD,YAInCA,GACC9C,EAAO8D,OAAOhK,KAAI,SAACiK,GACjB,IAAMxC,EAAWyC,YAAeD,EAAK/D,EAAOiE,iBAC5C,OACE,cAAC,EAAD,CAEE1C,SAAUA,EACVC,SAAUoB,EAAcsB,IAAI3C,EAAS1E,IACrC4E,UAAWA,GAHNF,EAAS1E,OAOrBiG,GACCE,GAGAhD,EAAO2D,UACJQ,QAAO,kBAAuB,iBAAvB,EAAGC,QACVtK,KAAI,SAACuK,GACJ,IAAM9C,EAAW+C,YAAmBD,EAAKrE,EAAOiE,iBAChD,OACE,cAAC,EAAD,CAEE1C,SAAUA,EACVC,SAAUoB,EAAcsB,IAAI3C,EAAS1E,IACrC4E,UAAWA,GAHNF,EAAS1E,SA5ChB,SAAWmD,EAAOiE,kBAuDjB,SAASM,EAAUhI,GAAe,IACvCiI,EAAyCjI,EAAzCiI,cAAeC,EAA0BlI,EAA1BkI,YAAa9B,EAAapG,EAAboG,SAC9B+B,EAAYnL,YAAe,aAFa,EAGtBoL,mBAA+CrK,EAAa,CAClFsK,UAAW,CAAE/H,GAAI6H,KADXG,EAHsC,EAGtCA,MAAOC,EAH+B,EAG/BA,KAGTpD,EAAU/B,IAN8B,EAOJkD,mBA9H5C,SAA2B4B,GACzB,IAAMM,EAAS,IAAIC,IAMnB,OAJAP,EAAYQ,SAAQ,SAAC3E,GACnBA,GAAQyE,EAAOG,IAAI5E,EAAKzD,IAAI,MAGvBkI,EAwHLI,CAAkBV,IAR0B,mBAOvC7B,EAPuC,KAOxBwC,EAPwB,KAWxC3D,EAAY0B,uBAAY,SAAClB,EAAoCoD,GACjED,GAAiB,SAACE,GAChB,IAAMP,EAAS,IAAIC,IAAIM,GAMvB,OAJIrD,GACF8C,EAAOQ,OAAOtD,GAEhB8C,EAAOG,IAAIG,GAAW,GACfN,OAER,IAEH,OAAIF,EACK,+CAGJC,EAKH,0BAASzC,UAAWX,EAAQ9B,UAA5B,UACE,sBAAKyC,UAAWX,EAAQ5B,YAAxB,UACGgF,EAAKU,QAAQC,QAAQC,WAAWC,SAAS,EAAG,KAD/C,IACsDb,EAAKU,QAAQI,QAElE,YAAIpB,EAAcqB,WAAW/L,KAAI,mCAAEiG,EAAF,KAAQ+F,EAAR,YAChC,eAAC1C,EAAA,EAAD,CAAgB2C,GAAG,OAAnB,UACE,sBAAM1D,UAAWX,EAAQ3B,KAAzB,SAAgCA,IAC/B+F,EAAWhM,KAAI,SAACkM,GAAD,OACd,8BACGA,EAAMhG,OAAOlG,KAAI,SAACkG,GACjB,IAAMiG,EACJxB,EAAYyB,WACV,qBAAGjC,kBAA0CjE,EAAOiE,oBACjD,EACP,OACE,cAAC,EAAD,CAEEjE,OAAQA,EACR4C,cAAeA,EACfD,SAAUA,EACVlB,UAAWA,EACXiB,eAAgBuD,GALXjG,EAAOiE,qBARV,QAAU+B,EAAMG,qBAHpBpG,SATP,iD,ICjKCqG,E,iJAAAA,K,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,QAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,UAAAA,E,oBAAAA,E,kBAAAA,E,sBAAAA,E,0BAAAA,E,sBAAAA,E,oBAAAA,E,wBAAAA,E,4BAAAA,E,wBAAAA,E,kBAAAA,E,sBAAAA,E,sBAAAA,E,oBAAAA,E,gBAAAA,E,YAAAA,E,UAAAA,E,gBAAAA,E,oBAAAA,E,sBAAAA,E,oBAAAA,E,UAAAA,E,cAAAA,E,sBAAAA,E,cAAAA,E,gBAAAA,E,sBAAAA,E,cAAAA,E,cAAAA,E,0BAAAA,E,cAAAA,E,gBAAAA,E,cAAAA,E,4BAAAA,E,sBAAAA,E,cAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,kBAAAA,E,mBAAAA,M,KAkHL,IAAMC,EAAY,SAACC,GACxB,IAAMC,EAAWC,YAAyBC,SAAU,WAC9CC,EAASF,YAAyBC,SAAU,SAG5CE,EAAaC,YAAML,EAAUG,GAAQG,KACzCC,aAAqB,SAACC,EAAGC,GAAJ,OAAUD,EAAEE,OAASD,EAAEC,MAAQF,EAAEnF,OAASoF,EAAEpF,QACjEsF,eAQIC,EAAiBb,EAASxM,KAAI,SAACsN,GAAD,OAJNC,EAIkCD,EAH9DT,EAAWE,KAAK1C,aAAO,SAACmD,GAAD,OAAWA,EAAML,OAASI,EAASE,cAD/B,IAACF,KAS9B,OAAOG,YAAcL,GAAgBN,KACnC1C,aAAwB,SAACsD,GAAD,OAASA,EAAIC,OAAM,SAACX,GAAD,MAAkB,YAAXA,EAAEnF,a,sCC3IxD,SAAS,KAA2Q,OAA9P,GAAWlH,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,gvBACHC,KAAM,QACN0L,YAAa,KAGf,SAASC,GAAYzL,EAAMC,GACzB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBuL,ICzBzCC,ID0BS,IC1BY,CAAC,EAAG,MACzBC,GAAkB,CAAC,EAAG,KACtBC,GAAgB,CAAEC,EAAG,IAAKC,EAAG,IAAKjB,EAAG,KAO5B,SAASkB,GAAa3L,GAAe,IAC1C4L,EAAiB5L,EAAjB4L,SAAUtL,EAAON,EAAPM,GACZ6E,EAAUd,IAFiC,EAGlBiC,oBAAS,GAHS,mBAG1CuF,EAH0C,KAGjCC,EAHiC,KAI3CC,EAAYC,iBAAO,IAAKC,OAAeC,EAAEC,YACzCC,EAAYJ,iBAAO,IAAKC,OAAeC,EAAEG,QALE,EAMrB/F,mBAAS,CACnCpC,QAjBoB,GAkBpB5C,MAAOkK,GACPc,WAAYhB,GACZiB,QAAShB,KAVsC,mBAM1CiB,EAN0C,KAMlCC,EANkC,OAYhBnG,oBAAS,GAZO,mBAY1CoG,EAZ0C,KAY/BC,EAZ+B,KAcjDC,qBAAU,WACRb,EAAUc,QAAQC,UAAYxM,EAC9ByL,EAAUc,QAAQE,OAElBX,EAAUS,QAAQG,KAAOpB,EACzBQ,EAAUS,QAAQI,iBAAkB,EACpCb,EAAUS,QAAQ3I,QA9BE,GAgCpB6H,EAAUc,QAAQK,IAAId,EAAUS,SAEhCd,EAAUc,QAAQM,OAAO1L,SAAW,CAAC,IAAK,IAAK,KAC/CsK,EAAUc,QAAQO,SAClBrB,EAAUc,QAAQQ,WAAa,WAC7BZ,GAAU,SAAC1D,GAAD,mBAAC,eACNA,GADK,IAERuD,WAAY,CAACF,EAAUS,QAAQS,eAAgBlB,EAAUS,QAAQU,gBACjEhB,QAAS,CAACH,EAAUS,QAAQW,UAAWpB,EAAUS,QAAQY,iBAG3DrB,EAAUS,QAAQS,eAAiB,GACnClB,EAAUS,QAAQa,cAAgB,KAClCtB,EAAUS,QAAQY,WAAa,KAQjC,IAAME,EAAUC,YAAW,WAIzB9B,GAAY,KACX,KAEH,OAAO,kBAAM+B,aAAaF,MACzB,CAAC/B,EAAUtL,IA2Bd,OACE,sBAAKyF,MAAO,CAAE7F,OAAQ,OAAQuB,SAAU,YAAxC,UAEE,qBAAKqE,UAAWX,EAAQb,WAAYhE,GAAIA,KAEtCuL,GACA,qBAAK/F,UAAWX,EAAQX,QAAxB,SACE,cAACsJ,EAAA,EAAD,CAAkBC,KAAM,GAAIjI,UAAU,eAIzC+F,GACC,qCACE,cAAC,GAAD,CAAa/F,UAAWX,EAAQV,YAAa4C,QAAS,kBAAMsF,GAAaD,MACzE,yBAAS5G,UAAS,UAAKX,EAAQT,eAAb,YAA+BgI,EAAY,SAAW,IAAxE,SACGA,GACC,qCACE,gCACE,cAACsB,EAAA,EAAD,CAAYlI,UAAWX,EAAQP,MAAOqJ,cAAY,EAAlD,qBAGA,eAACpH,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAA9D,UACE,sBAAMlB,UAAWX,EAAQL,MAAzB,eACA,cAACoJ,GAAA,EAAD,CACEpJ,MAAO0H,EAAOtI,QACdiK,IAAK,GACLC,IAAK,EACLC,KAAM,GACNC,SArDI,SAACC,EAAQC,GAC/B/B,GAAU,SAAC1D,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7E,QAASsK,OACzCpC,EAAUS,QAAQ3I,QAAUsK,GAoDV1I,UAAWX,EAAQR,SAErB,sBAAMmB,UAAWX,EAAQL,MAAzB,qBAIJ,gCACE,cAACkJ,EAAA,EAAD,CAAYlI,UAAWX,EAAQP,MAAOqJ,cAAY,EAAlD,uBAGA,eAACpH,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAA9D,UACE,sBAAMlB,UAAWX,EAAQL,MAAzB,SACGsH,EAAUS,QAAQS,eAAemB,QAAQ,KAE5C,cAACP,GAAA,EAAD,CACEQ,aAAclC,EAAOF,WACrB6B,IAAK3B,EAAOF,WAAW,GACvB8B,IAAK5B,EAAOF,WAAW,GACvB+B,KAAM,GACNC,SApEM,SAACC,EAAQC,GACjC,IAAMG,EAAgBH,EACtBpC,EAAUS,QAAQS,eAAiBqB,EAAc,GACjDvC,EAAUS,QAAQU,eAAiBoB,EAAc,GACjDlC,GAAU,SAAC1D,GAAD,sBAAgBA,OAiERjD,UAAWX,EAAQR,SAErB,sBAAMmB,UAAWX,EAAQL,MAAzB,SACGsH,EAAUS,QAAQU,eAAekB,QAAQ,WAKhD,gCACE,cAACT,EAAA,EAAD,CAAYlI,UAAWX,EAAQP,MAAOqJ,cAAY,EAAlD,oBAGA,eAACpH,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAA9D,UACE,sBAAMlB,UAAWX,EAAQL,MAAzB,SAAiCsH,EAAUS,QAAQW,UAAUiB,QAAQ,KACrE,cAACP,GAAA,EAAD,CACEQ,aAAclC,EAAOD,QACrB4B,IAAK3B,EAAOD,QAAQ,GACpB6B,IAAK5B,EAAOD,QAAQ,GACpB8B,KAAM,GACNC,SAjFG,SAACC,EAAQC,GAC9B,IAAMI,EAAaJ,EACnBpC,EAAUS,QAAQW,UAAYoB,EAAW,GACzCxC,EAAUS,QAAQY,WAAamB,EAAW,GAC1CnC,GAAU,SAAC1D,GAAD,sBAAgBA,OA8ERjD,UAAWX,EAAQR,SAErB,sBAAMmB,UAAWX,EAAQL,MAAzB,SAAiCsH,EAAUS,QAAQY,WAAWgB,QAAQ,WAI1E,cAAC,KAAD,CAAcnN,MAAOkL,EAAOlL,MAAOuN,iBAjF3B,SAACvN,GAAwB,IAAD,EACxBA,EAAMwN,IAAlBrD,EADoC,EACpCA,EAAGC,EADiC,EACjCA,EAAGjB,EAD8B,EAC9BA,EACdgC,GAAU,SAAC1D,GAAD,mBAAC,eAAeA,GAAhB,IAAsBzH,MAAOA,EAAMwN,SAC7C1C,EAAUS,QAAQkC,SAAW,CAACtD,EAAI,IAAKC,EAAI,IAAKjB,EAAI,mBChFxD,IAGMuE,GAA+E,SAAC,GAAc,IAAZzG,EAAW,EAAXA,KAAW,EACnEjC,mBAAS,GAD0D,mBAC1FpC,EAD0F,KACjF+K,EADiF,KAE3FC,EAASlD,iBAAuB,MAChCmD,EAAYnD,iBAA0B,MACtCoD,EAAiBpD,iBAAe9H,GAChCmL,EAA4BrD,iBAAe,GAE3CsD,EAA2B1I,uBAAY,SAAC2I,EAAyBC,GACrE,IAAMC,EAAWF,EAAkBC,EACnC,OAAOC,EAZkB,IAcrBA,EAbqB,MAerBA,IACH,IAsJH,OAnJA7C,qBAAU,WACR,GAAKsC,EAAOrC,QAAZ,CAEA,IAAM6C,EAAczF,YAAsBiF,EAAOrC,QAAS,aACpD8C,EAAY1F,YAAsBiF,EAAOrC,QAAS,WAClD+C,EAAc3F,YAAsBiF,EAAOrC,QAAS,aAEpDgD,EAAeH,EAClBpF,KACCwF,aAAS,SAACC,GAAD,OACPH,EAAYtF,KACV0F,aAAS,kBAAMC,YAAS,QACxB1S,aAAI,SAAC2S,GAAD,OAAeA,EAAUC,QAAUJ,EAAUI,WACjDC,YACET,EAAUrF,KACR+F,aAAI,kBACFpB,GAAW,SAAClG,GAIV,OADAqG,EAAevC,QAAU9D,EAClBA,eAQpBuH,WAAU,SAACd,GACV,IAAMe,EAAcnB,EAAevC,QAAkB,IAAR2C,EAC7CP,EAAWsB,GAAe,EAAI,EAAIA,GAAe,EAAI,EAAIA,MAG7D,OAAO,kBAAMV,EAAaW,kBACzB,CAAClB,IAGJ1C,qBAAU,WACR,GAAKsC,EAAOrC,QAAZ,CAEA,IAIIgD,EAJEH,EAAczF,YAAsBiF,EAAOrC,QAAS,aACpD8C,EAAY1F,YAAsBiF,EAAOrC,QAAS,WAClD+C,EAAc3F,YAAsBiF,EAAOrC,QAAS,aAIpDrF,EAAM,IAAIiJ,MAChBjJ,EAAIkJ,YAAc,YAClBlJ,EAAIxB,IAAJ,UAAa2K,IAAb,YAA0BpI,EAAKqI,cAE/B,IAAMC,EAAiB,WACrB1B,EAAUtC,QAAS5M,MAAQiP,EAAOrC,QAASiE,YAC3C3B,EAAUtC,QAAS3M,OAASgP,EAAOrC,QAASkE,aAChC5B,EAAUtC,QAASmE,WAAW,MACtCC,UAAUzJ,EAAK,EAAG,EAAG0H,EAAOrC,QAASiE,YAAa5B,EAAOrC,QAASkE,eA+DxE,OA5DAvJ,EAAI0J,OAAS,WAMXjF,OAAOkF,iBAAiB,SAAUN,GAClC1B,EAAUtC,QAAS5M,MAAQiP,EAAOrC,QAASiE,YAC3C3B,EAAUtC,QAAS3M,OAASgP,EAAOrC,QAASkE,aAC5C,IAAMK,EAAMjC,EAAUtC,QAASmE,WAAW,MAC1CI,EAAIH,UAAUzJ,EAAK,EAAG,EAAG0H,EAAOrC,QAASiE,YAAa5B,EAAOrC,QAASkE,cAEtElB,EAAeH,EACZpF,KACCwF,aAAS,SAACC,GAAD,OACPH,EAAYtF,KACV0F,aAAS,kBAAMC,YAAS,QACxB1S,aAAI,SAAC2S,GAAD,OAAeA,EAAUmB,QAAUtB,EAAUsB,WACjDjB,YACET,EAAUrF,KACR+F,aAAI,SAACiB,GAEH,IAAM9B,EAAQ8B,EAAaD,QAAUtB,EAAUsB,QAC/ChC,EAA0BxC,QAAUyC,EAClCD,EAA0BxC,QAC1B2C,EAAQN,EAAOrC,QAASiE,uBAQrCR,WAAU,SAACd,GACV,IAAMD,EAAkBD,EACtBD,EAA0BxC,QAC1B2C,EAAQN,EAAOrC,QAASiE,aAI1BM,EAAIH,UAAUzJ,EAAK,EAAG,EAAG0H,EAAOrC,QAASiE,YAAa5B,EAAOrC,QAASkE,cAUtE,IARA,IAAMQ,EAAYH,EAAII,aACpB,EACA,EACAtC,EAAOrC,QAASiE,YAChB5B,EAAOrC,QAASkE,cAEZxI,EAAOgJ,EAAUhJ,KAEdjK,EAAI,EAAGA,EAAIiK,EAAK/J,OAAQF,GAAK,EACpCiK,EAAKjK,GAAgD,IAA3CmT,KAAKC,IAAInJ,EAAKjK,GAAK,IAAKiR,GAClChH,EAAKjK,EAAI,GAAoD,IAA/CmT,KAAKC,IAAInJ,EAAKjK,EAAI,GAAK,IAAKiR,GAC1ChH,EAAKjK,EAAI,GAAoD,IAA/CmT,KAAKC,IAAInJ,EAAKjK,EAAI,GAAK,IAAKiR,GAG5C6B,EAAIO,aAAaJ,EAAW,EAAG,OAI9B,WACL1B,EAAaW,cACbvE,OAAO2F,oBAAoB,SAAUf,OAEtC,CAACvB,EAA0B/G,EAAKqI,eAEnChE,qBAAU,WACR,IAAMiF,EAAW/H,EAAU,CAACD,EAAQiI,YAAajI,EAAQkI,KAAMlI,EAAQmI,QACpE1H,OACAgG,WAAU,WACTrB,GAAW,SAAClG,GACV,IAAMwH,EAAcxH,EAAO,GAC3B,OAAOwH,GAAe,EAAI,EAAIA,GAAe,EAAI,EAAIA,QAGrD0B,EAAWnI,EAAU,CAACD,EAAQiI,YAAajI,EAAQkI,KAAMlI,EAAQqI,QACpE5H,OACAgG,WAAU,WACTrB,GAAW,SAAClG,GACV,IAAMwH,EAAcxH,EAAO,GAC3B,OAAOwH,GAAe,EAAI,EAAIA,GAAe,EAAI,EAAIA,QAI3D,OAAO,WACLsB,EAASrB,cACTyB,EAASzB,iBAEV,IAGD,sBACEnQ,IAAK6O,EACLiD,WAAW,EACXpM,MAAO,CAAE9F,MAAO,OAAQC,OAAQ,OAAQuB,SAAU,WAAYE,IAAK,MAAOsC,KAAM,OAHlF,UAKE,qBACEkO,WAAW,EACXnM,IAAG,UAAK2K,IAAL,YAAkBpI,EAAK6J,UAC1BnM,IAAI,OACJF,MAAO,CACLtE,SAAU,WACVE,IAAK,EACLsC,KAAM,EACNhE,MAAO,OACPC,OAAQ,OACRkE,OAAQ,GACRF,aAGJ,wBAAQ7D,IAAK8O,EAAWpJ,MAAO,CAAEtE,SAAU,WAAYE,IAAK,EAAGsC,KAAM,EAAGG,OAAQ,SAcvE,SAASiO,GAAYrS,GAAe,IACzCM,EAAkEN,EAAlEM,GAAIsL,EAA8D5L,EAA9D4L,SAAU0G,EAAoDtS,EAApDsS,OAAQC,EAA4CvS,EAA5CuS,UAAWC,EAAiCxS,EAAjCwS,mBAAoBC,EAAazS,EAAbyS,SACvDC,EAAa1G,iBAAO,MAEpB2G,EAAwBL,EAAO3I,WAAU,kBAAgC,iBAAhC,EAAGiJ,OAAoB/K,QAChEgL,EAAcP,EAAO3I,WAAU,kBAAgC,OAAhC,EAAGiJ,OAAoB/K,QA0E5D,OAxEA+E,qBAAU,WACRkG,SAAmBJ,EAAW7F,SAC9B,IAAMkG,EAAW,CAAC,WAAD,OAAYnH,IAEvBoH,EAAQ,CACZC,oBAAqB,EACrBF,SAAUA,GAGZD,YAAsBC,EAAS,IAAIG,MAAK,SAACC,GACvCC,uBAAsCV,EAAW7F,SACjDuG,eAA8BV,EAAW7F,QAAU,QAASmG,GAC5DF,eAAyBJ,EAAW7F,QAAUsG,GAC9CE,IAAcC,KAAKC,IAAaC,mBAEjC,CAAC5H,IAEJgB,qBAAU,WACR,GAAK2F,EAAL,CAEA,IAAMkB,EAAY3J,EAAU,CAACD,EAAQiI,YAAajI,EAAQ6J,SACvDpJ,KACC+F,aAAI,WACF,IAAMsD,EAAmBP,eAA8BV,EAAW7F,QAAU,SACxE8G,IACFA,EAAiBpL,KAAO,GACxBuK,cAAwBJ,EAAW7F,UAErC,IAAM+G,EAAoBR,eAA8BV,EAAW7F,QAAU,UACzE+G,IACFA,EAAkBrL,KAAO,GACzBuK,cAAwBJ,EAAW7F,cAIxCyD,YAEGuD,EAAiB/J,EAAU,CAACD,EAAQ6J,SACvCpJ,KACC+F,aAAI,WACF,IAAMsD,EAAmBP,eAA8BV,EAAW7F,QAAU,SAC5E,GAAI8G,EAAkB,CACpB,IAAK,IAAIG,EAAM,EAAGA,EAAMH,EAAiBpL,KAAK/J,OAAQsV,IAAO,CAE3D,GADaH,EAAiBpL,KAAKuL,GAC1BC,OAAQ,CACfJ,EAAiBpL,KAAKyL,OAAOF,EAAK,GAClC,OAGJhB,cAAwBJ,EAAW7F,SAErC,IAAM+G,EAAoBR,eAA8BV,EAAW7F,QAAU,UAC7E,GAAI+G,EAAmB,CACrB,IAAK,IAAIE,EAAM,EAAGA,EAAMF,EAAkBrL,KAAK/J,OAAQsV,IAAO,CAE5D,GADaF,EAAkBrL,KAAKuL,GAC3BC,OAAQ,CACfH,EAAkBrL,KAAKyL,OAAOF,EAAK,GACnC,OAGJhB,cAAwBJ,EAAW7F,cAIxCyD,YAEH,OAAO,WACLmD,EAAUjD,cACVqD,EAAerD,kBAEhB,CAAC+B,IAGF,sBACElS,IAAKqS,EACLpS,GAAIA,EACJyF,MAAO,CACLlF,SAAU,OACVX,OAAQ,OACRqE,gBAAiB,UACjB0P,QAAS,QAEXC,SAAU,EACVC,cAAe,SAACC,GACdA,EAAEC,kBAXN,UAcG7B,IAAiD,IAA3BG,GACrB,cAAC,GAAD,CAAcpK,KAAM+J,EAAQK,GAAuBC,OAAOrK,OAE3DkK,IAA6B,IAAjBI,GACX,qBACE9M,MAAO,CACLtE,SAAU,WACVE,IAAK,EACLsC,KAAM,EACNG,OAAQ,GACRlE,OAAQ,OACRD,MAAO,QAPX,SAUE,cAAC0L,GAAD,CACErL,GAAE,aAAQA,GACVsL,SAAQ,UAAK+E,IAAL,YAAkB2B,EAAQO,GAAaD,OAAOrK,KAAKyE,a,cC7TjEsH,GAAY5W,YAAoB,CACpC6W,QAAS,CACPzT,WAAY,0BACZZ,OAAQ,OACRkB,UAAW,SACX,uBAAwB,CACtBC,QAAS,SAGbvB,MAAO,CACLwB,MAAO,UACPR,WAAY,wBACZwB,UAAW,SACXC,WAAY,OACZhB,SAAU,OACVC,WAAY,OACZY,QAAS,WAEXoS,MAAO,CACLlT,MAAO,2BACPiB,WAAY,IACZE,aAAc,sBACdC,OAAQ,gBACRG,cAAe,MACf,UAAW,CACT5C,MAAO,OAET,UAAW,CACTqC,UAAW,MACXoB,YAAa,SAGjB+Q,aAAc,CACZrS,QAAS,WACTM,OAAQ,WACRD,aAAc,uCACd,gBAAiB,CACflB,SAAU,OACVC,WAAY,OACZF,MAAO,UACPoB,OAAQ,cACRH,WAAY,KAEd,oBAAqB,CACnBhB,SAAU,OACVC,WAAY,OACZe,WAAY,IACZP,aAAc,MACdV,MAAO,2BACP,wBAAyB,CACvBuD,UAAW,QAGf,cAAe,CACb/D,WAAY,UACZsB,QAAS,UACTkB,UAAW,aACXrD,MAAO,MACP,UAAW,CACTyD,YAAa,WAMf6E,GAAkB,CACtBmM,OAAQ,CACN,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,wBAEFC,SAAU,CACR,CACEpM,KAAM,CAAC,GAAK,GAAK,EAAG,IAAK,IAAK,EAAG,IAAK,IAAK,KAC3C7I,MAAM,EACNkV,YAAa,EACbC,YAAa,EACbC,UAAW,EACXC,UAAU,EACVxQ,gBAAiB,SAACyQ,GAA8D,IAAD,EACzElX,EAAQkX,EAAQC,UAChBnQ,EAAK,UAAGkQ,EAAQE,eAAX,aAAG,EAAiB3M,KAAMzK,GACnC,OAAIgH,EAAQ,EACH,UACEA,EAAQ,EACV,UAEF,cAMTlH,GAAwB,CAC5BuX,OAAQ,CACNC,MAAO,CACL,CACEC,MAAO,CACLC,aAAa,EACb/T,SAAU,EACVgU,WAAY,wBACZC,UAAW,aAIjBC,MAAO,CACL,CACEJ,MAAO,CACLK,UAAU,EACVC,SAAU,SAAC7Q,GACT,IAAM8Q,EAAO,IAAIC,KAAK/Q,GACtB,MAAM,GAAN,OAAU8Q,EAAKE,WAAa,EAA5B,YAAiCF,EAAKG,UAAtC,YAAmDH,EAAKI,cAAgB,OAE1EzU,SAAU,EACViU,UAAW,UACXD,WAAY,4BAKpBU,OAAQ,CACN5U,SAAS,GAEX6U,SAAU,CACRC,SAAU,EACVC,SAAU,EACVC,UAAW,CACTvW,MAAO,SAACwW,GACN,IAAMV,EAAO,IAAIC,KAAKS,EAAY,GAAGC,QACrC,MAAM,GAAN,OAAUX,EAAKI,cAAgB,KAA/B,YAAuCJ,EAAKE,WAAa,EAAzD,YAA8DF,EAAKY,WAErEC,eAAgB,SAACH,GACf,IAAMxR,EAAQ4R,WAAWJ,EAAYxR,OACrC,OAAIA,EAAQ,EACH,UACEA,EAAQ,EACV,UAEF,YAGX6R,eAAgB,2BAChBC,cAAe,GACfC,gBAAiB,wBACjBC,cAAe,OACfC,aAAc,GACdxS,gBAAiB,0BACjByS,eAAe,EACfC,YAAa,2BACbC,YAAa,KAIF,SAASC,KACtB,IAAMhS,EAAUmP,KAChB,OACE,sBAAKxO,UAAWX,EAAQoP,QAAxB,UACE,qBAAKzO,UAAWX,EAAQrF,MAAxB,yCAEA,eAAC+G,EAAA,EAAD,CAAKxF,QAAQ,OAAOyE,UAAWX,EAAQqP,MAAvC,UACE,qBAAK1O,UAAU,OAAf,kBACA,2CAGF,0BAASA,UAAWX,EAAQsP,aAA5B,UACE,oBAAI3O,UAAU,aAAd,sBACA,eAACe,EAAA,EAAD,CAAKxF,QAAQ,OAAb,UACE,qBAAKyE,UAAU,iBAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,OAE7B,qBAAKkI,UAAU,WAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,aAKjC,0BAASkI,UAAWX,EAAQsP,aAA5B,UACE,oBAAI3O,UAAU,aAAd,+BACA,qBAAKA,UAAU,iBAAf,sBACA,eAACe,EAAA,EAAD,CAAKxF,QAAQ,OAAb,UACE,qBAAKyE,UAAU,iBAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,OAE7B,qBAAKkI,UAAU,WAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,UAI/B,qBAAKkI,UAAU,iBAAf,wBACA,eAACe,EAAA,EAAD,CAAKxF,QAAQ,OAAb,UACE,qBAAKyE,UAAU,iBAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,OAE7B,qBAAKkI,UAAU,WAAf,SACE,cAAC,QAAD,CAAMyC,KAAMA,GAAM3K,QAASA,gB,cCtM1BwZ,GAAcC,IAAMC,cAA+B,CAC9DC,SAAU,KCDZ,SAASC,GAAWC,GAClB,OAAIA,EAAQ,EACH,UACEA,EAAQ,EACV,UAEF,UAKT,SAASC,GAAmBnP,EAAgBoP,GAC1C,IAAI/L,EAAWrD,EAKf,OAJAoP,EAAQC,MAAM,KAAKlP,SAAQ,SAACmP,GAC1BjM,EAAYA,EAAiBiM,MAGxBjM,EAGT,IAAMkM,GAA4C,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OAChD,sBAAMjS,UAAWiS,EAAW,YAAc,GAA1C,SAA+CA,EAAW,WAAa,QAGnEtH,GAKD,SAAC,GAAqC,IAAnCkH,EAAkC,EAAlCA,QAAS1R,EAAyB,EAAzBA,IAAKsC,EAAoB,EAApBA,KAAMlB,EAAc,EAAdA,QAC1B,OACE,qBACEtB,MAAO,CAAE9D,OAAQ,WACjB+D,IAAG,UAAK2K,IAAL,YAAkB+G,GAAmBnP,EAAMoP,IAC9C1R,IAAKA,EACLoB,QAAS,kBAAMA,EAAQsQ,OAKvBK,GAAyF,SAAC,GAAD,IAC7FlS,EAD6F,EAC7FA,UACAmS,EAF6F,EAE7FA,UACArT,EAH6F,EAG7FA,MACAsT,EAJ6F,EAI7FA,SAJ6F,OAM7F,eAACC,EAAA,EAAD,CAAMrL,WAAW,EAAM9F,WAAW,SAASlB,UAAWA,EAAtD,UACE,cAACqS,EAAA,EAAD,CAAMrS,UAAU,OAAO/B,MAAM,EAAMqU,IAAE,EAACtL,WAAW,EAAMuL,QAAQ,WAA/D,SACGJ,IAEH,cAACE,EAAA,EAAD,CAAMrS,UAAU,QAAQ/B,MAAM,EAAMqU,GAAI,EAAGtL,WAAW,EAAMuL,QAAQ,SAApE,SACGzT,IAEH,cAACuT,EAAA,EAAD,CAAMrS,UAAU,QAAQ/B,MAAM,EAAMqU,IAAE,EAACtL,WAAW,EAAMuL,QAAQ,gBAAhE,SACGH,QAKDI,GAKD,SAACtY,GACJ,OACE,qBAAK8F,UAAW9F,EAAM8F,UAAtB,SACG9F,EAAMuY,YAAYhb,KAAI,SAACgR,EAAGuF,GACzB,IAAM7O,EAAWjF,EAAMwY,mBAAqB1E,EAC5C,OACE,sBAEEhO,UAAS,cAASb,EAAW,SAAW,IACxCoC,QAAS,kBAAMrH,EAAMyY,gBAAgB3E,KAFhCA,SAeF,SAAS4E,GAAU1Y,GAAe,IACvC2Y,EAA6B3Y,EAA7B2Y,UAAWtW,EAAkBrC,EAAlBqC,cACb8C,EAAUjE,EAAiB,CAAEmB,kBAFW,EAGFiE,mBAAwB,MAHtB,mBAGvCsS,EAHuC,KAGvBC,EAHuB,KAKtCtB,EAAauB,qBAAW1B,IAAxBG,SACFgB,EAAcQ,mBAClB,kBACExB,EACG3P,QAAO,kBAAuB,OAAvB,EAAGC,QACVtK,KAAI,SAACwG,GAAD,MAAW,CAAEzD,GAAIyD,EAAKzD,GAAIiI,KAAMxE,EAAKwE,WAC9C,CAACgP,IAX2C,EAaLjR,mBACvCiS,EAAY5O,WAAU,qBAAGrJ,KAAgBqY,MAdG,mBAavCH,EAbuC,KAarBQ,EAbqB,KAgBxCC,EAAoBjN,iBAAe,GAEnCkN,EAAoBtS,uBACxB,SAAC+Q,GACCsB,EAAkBpM,QAAU2L,EAC5BK,EAAkBlB,KAEpB,CAACa,IAGGW,EAAiB,UAAMhU,EAAQ3C,WAAd,YAA4BH,EAAgB,GAAK,SA1B1B,EA2B7BkW,EAAYC,GAAkBjQ,KAAvC6Q,EA3BsC,EA2BtCA,EAAGC,EA3BmC,EA2BnCA,EAEX,OACE,sBAAKvT,UAAWX,EAAQhE,QAAS4E,MAAO,CAAE7F,OAAQmC,EAAgB,MAAQ,QAA1E,UACE,qBAAKyD,UAAWX,EAAQrF,MAAxB,qDAEA,cAAC,GAAD,CACEgG,UAAWX,EAAQzD,YACnB6W,YAAaA,EACbC,iBAAkBA,EAClBC,gBAAiBO,IAGnB,0BAASlT,UAAWX,EAAQhD,QAA5B,UACE,cAAC,GAAD,CACE2D,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQvC,WAC3CqV,UAAU,QACVrT,MAAM,GACNsT,SAAS,SAIX,cAAC,GAAD,CACEpS,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQrC,SAC3CmV,UACE,sBACElS,MAAO,CACLxE,SAAU,OACVC,WAAY,SACZF,MAAOkW,GAAW6B,EAAEvW,QAAQwW,WAJhC,SAOGD,EAAEvW,QAAQwW,WAGf1U,MAAO,sBAAMmB,MAAO,CAAExE,SAAU,OAAQC,WAAY,UAA7C,sBACP0W,SACE,sBACEnS,MAAO,CACLxE,SAAU,OACVC,WAAY,SACZF,MAAOkW,GAAW4B,EAAEtW,QAAQwW,WAJhC,SAOGF,EAAEtW,QAAQwW,aAMjB,sBACEvT,MAAO,CACLxE,SAAU,OACVC,WAAY,OACZQ,aAAc,OACdM,UAAW,UALf,UAQE,sBACEyD,MAAO,CACLxE,SAAU,OACVC,WAAY,SACZF,MAAOkW,GAAW/F,KAAKrD,IAAIiL,EAAEE,GAAGC,OAAQH,EAAEE,GAAGE,UAJjD,SAOGhI,KAAKrD,IAAIiL,EAAEE,GAAGC,OAAQH,EAAEE,GAAGE,UAE9B,sBACE1T,MAAO,CACL1E,QAAS,eACTT,SAAU,MACV8B,OAAQ,UAJZ,mCASA,sBACEqD,MAAO,CACLxE,SAAU,OACVC,WAAY,SACZF,MAAOkW,GAAW/F,KAAKrD,IAAIgL,EAAEG,GAAGC,OAAQJ,EAAEG,GAAGE,UAJjD,SAOGhI,KAAKrD,IAAIgL,EAAEG,GAAGC,OAAQJ,EAAEG,GAAGE,aAGhC,cAAC,GAAD,CACE3T,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQpC,WAC3CkV,UACE,eAACpR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgB2S,KAAK,IAAxD,UACGrX,GACC,cAAC,GAAD,CACEsV,QAAQ,gBACR1R,IAAI,MACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,IAGb,eAACrS,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBlF,cAAc,SAAjE,UACE,gCAAMwX,EAAEE,GAAGI,KAAX,QACA,gCAAMN,EAAEE,GAAGK,SAAX,cAINhV,MACE,eAACiC,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBlF,cAAc,SAAS3B,OAAO,OAAjF,UACE,qBAAK4F,UAAU,OAAf,+BACA,qBAAKA,UAAU,OAAf,+CAGJoS,SACE,eAACrR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgB2S,KAAK,IAAxD,UACE,eAAC7S,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBlF,cAAc,SAAjE,UACE,gCAAMuX,EAAEG,GAAGI,KAAX,QACA,gCAAMP,EAAEG,GAAGK,SAAX,WAEDvX,GACC,cAAC,GAAD,CACEsV,QAAQ,gBACR1R,IAAI,MACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,SAQnB,cAAC,GAAD,CACEpT,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQpC,WAC3CkV,UACE,eAACpR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACGrX,GACC,cAAC,GAAD,CACEsV,QAAQ,wBACR1R,IAAI,KACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,IAGb,cAAC,GAAD,CAAUnB,SAAUsB,EAAEQ,WAAW9B,cAGrCnT,MAAM,aACNsT,SACE,eAACrR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACE,cAAC,GAAD,CAAU3B,SAAUqB,EAAES,WAAW9B,WAChC1V,GACC,cAAC,GAAD,CACEsV,QAAQ,wBACR1R,IAAI,KACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,SAQnB,cAAC,GAAD,CACEpT,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQpC,WAC3CkV,UACE,eAACpR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACGrX,GACC,cAAC,GAAD,CACEsV,QAAQ,uBACR1R,IAAI,KACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,IAGb,cAAC,GAAD,CAAUnB,SAAUsB,EAAES,UAAU/B,cAGpCnT,MAAM,YACNsT,SACE,eAACrR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACE,cAAC,GAAD,CAAU3B,SAAUqB,EAAEU,UAAU/B,WAC/B1V,GACC,cAAC,GAAD,CACEsV,QAAQ,uBACR1R,IAAI,KACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,SAQnB,cAAC,GAAD,CACEpT,UAAS,UAAKqT,EAAL,YAA0BhU,EAAQpC,WAC3CkV,UACE,eAACpR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACGrX,GACC,cAAC,GAAD,CACEsV,QAAQ,uBACR1R,IAAI,YACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,IAGb,iCAAOG,EAAEU,UAAUC,IAAnB,cAGJpV,MAAM,YACNsT,SACE,eAACrR,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBC,WAAW,SAAS0S,KAAK,IAA5E,UACE,iCAAON,EAAEW,UAAUC,IAAnB,WACC3X,GACC,cAAC,GAAD,CACEsV,QAAQ,uBACR1R,IAAI,YACJsC,KAAMgQ,EAAYC,GAAkBjQ,KACpClB,QAAS6R,YAQpBN,GACC,eAACqB,GAAA,EAAD,CACEC,MAAM,EACNC,QAAS,WAGPnB,EAAaC,EAAkBpM,SAC/BgM,EAAkB,OAEpBhY,SAAS,KACTsE,QAAS,CAAEiV,MAAOjV,EAAQjC,QAT5B,UAWE,cAAC,GAAD,CACE4C,UAAWX,EAAQzD,YACnB6W,YAAaA,EACbC,iBAAkBA,EAClBC,gBAAiBO,IAEnB,qBACEhT,IAAG,UAAK2K,IAAL,YAAkB+G,GACnBa,EAAYC,GAAkBjQ,KAC9BqQ,IAEF3S,IAAI,cChXhB,SAAS,KAA2Q,OAA9P,GAAW9H,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,mbACHC,KAAM,UAGR,SAAS2a,GAAaza,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBua,ICnBzCC,IDoBS,ICpB6B,CAC1C,MAAO,GACP,MAAO,EACP,MAAO,GACP,MAAO,EACP,QAAS,EACT,SAAU,IAGNC,GAMD,SAACva,GACJ,IAAMmF,EAAUtB,IADF,EAEsB2W,aAClC,iBAAO,CACLC,OAAQ,MACRC,KAAM,SAAC3W,GAGL,OAFA/D,EAAM2a,WAAW5W,EAAM/D,EAAM4a,SAEtB,CAAElV,eAAgB1F,EAAM6a,SAEjClV,QAAS,SAACJ,GAAD,MAAmB,CAC1BuV,OAAQvV,EAAQuV,SAChBC,QAASxV,EAAQwV,eAGrB,IAfY,0BAELD,EAFK,EAELA,OAAQC,EAFH,EAEGA,QAAWL,EAFd,KAkBRxW,EAAU4W,GAAUC,EAAU,GAAM,EACpCjZ,EAASiZ,EAAU,oBAAsB,QAE/C,OACE,sBAAK1a,IAAKqa,EAAM5U,UAAWX,EAAQpB,KAAMgC,MAAO,CAAE7B,UAASpC,UAA3D,UACG9B,EAAMgb,UAGJhb,EAAMuS,WAAa,qBAAKzM,UAAWX,EAAQnB,cAgBrC,SAASiX,GAAYjb,GAAe,IAE/Ckb,EAOElb,EAPFkb,OACAC,EAMEnb,EANFmb,MACAC,EAKEpb,EALFob,WACAC,EAIErb,EAJFqb,aACAC,EAGEtb,EAHFsb,mBACAC,EAEEvb,EAFFub,UACAC,EACExb,EADFwb,iBAEIrW,EAAUtB,IAEhB+I,qBAAU,WAERX,OAAOwP,cAAc,IAAIC,MAAM,aAC9B,CAACR,IAEJ,IAAMS,EAAoB/U,uBACxB,SAACkN,GACCyH,EAAUzH,GACK,QAAXoH,EACFI,IAEAD,EAAa,SAGjB,CAACE,EAAWF,EAAcC,EAAoBJ,IAGhD,SAASU,EAAc7X,EAAqBwO,GAC1C,IAAKxO,EACH,OAAO,2CAET,OAAQA,EAAK8D,MACX,IAAK,QACH,IAAMgU,EAAa9X,EAAK8X,WAClBrJ,EAAoC,iBAAfqJ,EACrBpJ,EAA0B,OAAfoJ,EACjB,OACE,cAACxJ,GAAD,CACE/R,GAAE,eAAUyD,EAAKzD,IACjBsL,SAAU7H,EAAKiJ,KACfsF,OAAQvO,EAAKuO,OACbC,UAAWA,EACXC,mBAAoBA,EACpBC,SAAUA,IAGhB,IAAK,mBACH,OACE,cAACJ,GAAD,CACE/R,GAAE,2BAAsByD,EAAKzD,IAC7BsL,SAAU7H,EAAKiJ,KACfsF,OAAQvO,EAAKuO,OACbC,UAAWA,EACXC,oBAAoB,EACpBC,UAAU,IAGhB,IAAK,KACH,OAAO,cAAC9G,GAAD,CAAcrL,GAAE,aAAQyD,EAAKzD,IAAMsL,SAAU7H,EAAKiJ,OAC3D,IAAK,UACH,OAAO,cAACmK,GAAD,IACT,IAAK,KACH,IAAM9U,EAA2B,QAAX6Y,GAA+B,QAAXA,EAC1C,OAAO,cAACxC,GAAD,CAAWC,UAAW5U,EAAKzD,GAAI+B,cAAeA,IACvD,QACE,OAAO,4CAIb,IAAMyZ,EAAwB,QAAXZ,GAA+B,QAAXA,EAAmB,MAAQ,OAC5Da,EAA8B,QAAXb,EACzB,OACE,eAAC/C,EAAA,EAAD,CAAMrL,WAAS,EAAChH,UAAWX,EAAQrB,YAAnC,UACc,QAAXoX,GACC,cAAC,GAAD,CAAepV,UAAWX,EAAQhB,UAAWkD,QAASiU,IAEvDH,EAAM5d,KAAI,SAACwG,EAAM+P,GAChB,IAAMvB,EAAY6I,IAAetH,EAC3BpK,EACHoK,EAAMkI,IAAMd,KAAYa,GAAsBA,GAAoBxJ,EAC/D7T,EAAG,iBAAMqF,QAAN,IAAMA,OAAN,EAAMA,EAAMzD,GAAZ,YAAkBwT,GAC3B,OAAIpK,EAEA,cAACyO,EAAA,EAAD,CAEEpU,MAAM,EACNqU,GAAIkC,GAAUY,GACdnV,MAAO,CAAE7F,OAAQ4b,GACjBzU,QAAS,kBAAMkU,EAAUzH,IACzBmI,cAAe,kBAAMN,EAAkB7H,IANzC,SAQE,cAAC,GAAD,CACE8G,QAAS9G,EACT+G,OAAM,OAAE9W,QAAF,IAAEA,OAAF,EAAEA,EAAMzD,GACdiS,UAAWA,EACXoI,WAAYa,EAJd,SAMGI,EAAc7X,EAAMwO,MAblB7T,GAsBT,cAACyZ,EAAA,EAAD,CAEEpU,MAAM,EACNqU,GAAIkC,GAAUY,GACdnV,MAAO,CAAEtE,SAAU,WAAYE,IAAK,MAAOC,MAAO,QAJpD,SAME,cAAC,GAAD,CACEgZ,QAAS9G,EACT+G,OAAQnc,EACR6T,UAAWA,EACXoI,WAAYa,EAJd,SAMGI,EAAc7X,EAAMwO,MAXlB7T,S,wBCpKXwd,GAA2C,CAC/CC,QAAS,UACTC,UAAW,2BACX9J,OAAQ,WAGJ+J,GAAgD,CACpDF,QAAS,2BACTC,UAAW,2BACX9J,OAAQ,WAGJgC,GAAY5W,YAGhB,CACA4e,SAAU,CACRC,cAAe,SAACvc,GAAD,OAAYA,EAAMwc,SAAW,OAAS,SACrDtY,QAAS,SAAClE,GAAD,OAAYA,EAAMwc,SAAW,GAAM,GAC5Cnb,QAAS,OACTQ,cAAe,SACfkF,eAAgB,SAChBC,WAAY,SACZ9G,OAAQ,OACRD,MAAO,OACPqD,UAAW,aACX1C,SAAU,OACV0B,UAAW,SACXxB,WAAY,SAACd,GAAD,OAAYA,EAAM+T,OAASsI,GAAoBrc,EAAMqF,MAAQ,WACzE/D,MAAO,SAACtB,GAAD,OAAYA,EAAM+T,OAAS,UAAYmI,GAAelc,EAAMqF,OACnE3F,KAAM,SAACM,GAAD,OAAYA,EAAM+T,OAAS,UAAYmI,GAAelc,EAAMqF,OAClE,UAAW,CACTvE,WAAY,SAACd,GAAD,OAAWqc,GAAoBrc,EAAMqF,OACjD/D,MAAO,UACPW,OAAQ,UACRvC,KAAM,YAGV+c,IAAK,CACHza,aAAc,OAEhB0a,KAAM,CACJnb,SAAU,OACVC,WAAY,OACZtB,OAAQ,OACRoH,UAAW,eACXqV,WAAY,cAID,SAASC,GAAT,GAA2E,IAAvDC,EAAsD,EAAtDA,KAAMH,EAAgD,EAAhDA,KAAMrV,EAA0C,EAA1CA,QAAShC,EAAiC,EAAjCA,KAAM0O,EAA2B,EAA3BA,OAAQyI,EAAmB,EAAnBA,SAC9DrX,EAAUmP,GAAU,CAAEjP,OAAM0O,SAAQyI,aAE1C,OACE,sBAAK1W,UAAWX,EAAQmX,SAAUjV,QAASA,EAA3C,UACE,sBAAMvB,UAAWX,EAAQsX,IAAzB,SAA+BI,IAC/B,qBAAK/W,UAAWX,EAAQuX,KAAxB,SAA+BA,OCtErC,SAAS,KAA2Q,OAA9P,GAAWve,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,oiBAGL,SAASqd,GAAUld,EAAMC,GACvB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBgd,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAW3e,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,6FAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,sGAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,sGAGDsd,GAAqB,gBAAoB,OAAQ,CACnDtd,EAAG,gHAGL,SAASud,GAAUpd,EAAMC,GACvB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAOid,IAGzC,IAAI,GAA0B,aAAiBC,IAChC,IC1Cf,SAAS,KAA2Q,OAA9P,GAAW7e,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,oVAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,+GAGL,SAASwd,GAAMrd,EAAMC,GACnB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiBmd,IAChC,IClCf,SAAS,KAA2Q,OAA9P,GAAW9e,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,kwBAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,oUAGL,SAASyd,GAAMtd,EAAMC,GACnB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiBod,IAChC,IClCf,SAAS,KAA2Q,OAA9P,GAAW/e,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,yfAGL,SAAS0d,GAAavd,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBqd,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAWhf,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,qRAGL,SAAS2d,GAAQxd,EAAMC,GACrB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBsd,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAWjf,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDiC,GAAI,kBACJZ,KAAM,SACQ,gBAAoB,OAAQ,CAC1CD,EAAG,2CAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,0CAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,2SACH4d,KAAM,0BAGJ,GAAqB,gBAAoB,OAAQ,CACnD/c,GAAI,kBACJZ,KAAM,SACQ,gBAAoB,OAAQ,CAC1CD,EAAG,2CAGD6d,GAAqB,gBAAoB,OAAQ,CACnD7d,EAAG,2SACH4d,KAAM,0BAGJE,GAAqB,gBAAoB,OAAQ,CACnD9d,EAAG,0CAGD+d,GAAqB,gBAAoB,OAAQ,CACnD/d,EAAG,6CAGDge,GAAqB,gBAAoB,OAAQ,CACnDhe,EAAG,6CAGDie,GAAsB,gBAAoB,OAAQ,CACpDje,EAAG,6CAGDke,GAAsB,gBAAoB,OAAQ,CACpDle,EAAG,6CAGDme,GAAsB,gBAAoB,OAAQ,CACpDne,EAAG,6CAGDoe,GAAsB,gBAAoB,OAAQ,CACpDpe,EAAG,0CAGDqe,GAAsB,gBAAoB,OAAQ,CACpDre,EAAG,0CAGDse,GAAsB,gBAAoB,OAAQ,CACpDte,EAAG,4CAGDue,GAAsB,gBAAoB,OAAQ,CACpDve,EAAG,6CAGDwe,GAAsB,gBAAoB,OAAQ,CACpDxe,EAAG,6CAGDye,GAAsB,gBAAoB,OAAQ,CACpDze,EAAG,6CAGD0e,GAAsB,gBAAoB,OAAQ,CACpD1e,EAAG,0CAGD2e,GAAsB,gBAAoB,OAAQ,CACpD3e,EAAG,0CAGD4e,GAAsB,gBAAoB,OAAQ,CACpD5e,EAAG,0CAGD6e,GAAsB,gBAAoB,OAAQ,CACpD7e,EAAG,4CAGD8e,GAAsB,gBAAoB,OAAQ,CACpD9e,EAAG,6CAGD+e,GAAsB,gBAAoB,OAAQ,CACpD/e,EAAG,6CAGDgf,GAAsB,gBAAoB,OAAQ,CACpDhf,EAAG,6CAGDif,GAAsB,gBAAoB,OAAQ,CACpDjf,EAAG,6CAGDkf,GAAsB,gBAAoB,OAAQ,CACpDlf,EAAG,6CAGDmf,GAAsB,gBAAoB,OAAQ,CACpDnf,EAAG,6CAGDof,GAAsB,gBAAoB,OAAQ,CACpDpf,EAAG,0CAGDqf,GAAsB,gBAAoB,OAAQ,CACpDrf,EAAG,4CAGDsf,GAAsB,gBAAoB,OAAQ,CACpDtf,EAAG,6CAGDuf,GAAsB,gBAAoB,OAAQ,CACpDvf,EAAG,6CAGDwf,GAAsB,gBAAoB,OAAQ,CACpDxf,EAAG,6CAGDyf,GAAsB,gBAAoB,OAAQ,CACpDzf,EAAG,6CAGD0f,GAAsB,gBAAoB,OAAQ,CACpD1f,EAAG,0CAGD2f,GAAsB,gBAAoB,OAAQ,CACpD3f,EAAG,0CAGD4f,GAAsB,gBAAoB,OAAQ,CACpD5f,EAAG,4CAGD6f,GAAsB,gBAAoB,OAAQ,CACpD7f,EAAG,6CAGD8f,GAAsB,gBAAoB,OAAQ,CACpD9f,EAAG,6CAGD+f,GAAsB,gBAAoB,OAAQ,CACpD/f,EAAG,6CAGDggB,GAAsB,gBAAoB,OAAQ,CACpDhgB,EAAG,6CAGDigB,GAAsB,gBAAoB,OAAQ,CACpDjgB,EAAG,0CAGDkgB,GAAsB,gBAAoB,OAAQ,CACpDlgB,EAAG,0CAGDmgB,GAAsB,gBAAoB,OAAQ,CACpDngB,EAAG,0CAGDogB,GAAsB,gBAAoB,OAAQ,CACpDpgB,EAAG,6CAGDqgB,GAAsB,gBAAoB,OAAQ,CACpDrgB,EAAG,6CAGDsgB,GAAsB,gBAAoB,OAAQ,CACpDtgB,EAAG,6CAGDugB,GAAsB,gBAAoB,OAAQ,CACpDvgB,EAAG,6CAGDwgB,GAAsB,gBAAoB,OAAQ,CACpDxgB,EAAG,6CAGDygB,GAAsB,gBAAoB,OAAQ,CACpDzgB,EAAG,0CAGD0gB,GAAsB,gBAAoB,OAAQ,CACpD1gB,EAAG,0CAGD2gB,GAAsB,gBAAoB,OAAQ,CACpD3gB,EAAG,6CAGD4gB,GAAsB,gBAAoB,OAAQ,CACpD5gB,EAAG,6CAGD6gB,GAAsB,gBAAoB,OAAQ,CACpD7gB,EAAG,6CAGD8gB,GAAsB,gBAAoB,OAAQ,CACpD9gB,EAAG,6CAGD+gB,GAAsB,gBAAoB,OAAQ,CACpD/gB,EAAG,6CAGDghB,GAAsB,gBAAoB,OAAQ,CACpDhhB,EAAG,sDAGDihB,GAAsB,gBAAoB,OAAQ,CACpDjhB,EAAG,mDAGDkhB,GAAsB,gBAAoB,OAAQ,CACpDlhB,EAAG,sDAGDmhB,GAAsB,gBAAoB,OAAQ,CACpDnhB,EAAG,mDAGDohB,GAAsB,gBAAoB,OAAQ,CACpDphB,EAAG,sDAGDqhB,GAAsB,gBAAoB,OAAQ,CACpDrhB,EAAG,sDAGDshB,GAAsB,gBAAoB,OAAQ,CACpDthB,EAAG,mDAGDuhB,GAAsB,gBAAoB,OAAQ,CACpDvhB,EAAG,sDAGDwhB,GAAsB,gBAAoB,OAAQ,CACpDxhB,EAAG,kWAGDyhB,GAAsB,gBAAoB,OAAQ,CACpDzhB,EAAG,wZAGD0hB,GAAsB,gBAAoB,OAAQ,CACpD1hB,EAAG,uLAGL,SAAS2hB,GAAgBxhB,EAAMC,GAC7B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,GAAOwd,GAAOC,GAAOC,GAAOC,GAAOC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,IAGphB,IAAI,GAA0B,aAAiBC,IAChC,IC1Sf,SAAS,KAA2Q,OAA9P,GAAWjjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,gGACHC,KAAM,UAGR,SAAS2hB,GAAazhB,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiBuhB,IAChC,IChCf,SAAS,KAA2Q,OAA9P,GAAWljB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,8FACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,uGACHC,KAAM,UAGR,SAAS4hB,GAAa1hB,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiBwhB,IAChC,ICrCf,SAAS,KAA2Q,OAA9P,GAAWnjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,6FACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,sGACHC,KAAM,UAGR,SAAS6hB,GAAa3hB,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiByhB,IAChC,ICrCf,SAAS,KAA2Q,OAA9P,GAAWpjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,2FACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oGACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oGACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,8GACHC,KAAM,UAGR,SAAS8hB,GAAa5hB,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,IAGzC,IAAI,GAA0B,aAAiB0hB,I,IAChC,I,kBC/Cf,SAAS,KAA2Q,OAA9P,GAAWrjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,2mBAGL,SAASgiB,GAAc7hB,EAAMC,GAC3B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiB2hB,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAWtjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,uhBAGL,SAASiiB,GAAO9hB,EAAMC,GACpB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiB4hB,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAWvjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,mRAGL,SAASkiB,GAAe/hB,EAAMC,GAC5B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,IAGpB,IAAI,GAA0B,aAAiB6hB,IAChC,IC9Bf,SAAS,KAA2Q,OAA9P,GAAWxjB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,yRAGD,GAAqB,gBAAoB,OAAQ,CACnDA,EAAG,seAGL,SAASmiB,GAAahiB,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,ICpBK+hB,GDoBD,GAA0B,aAAiBD,IE9BlCE,IF+BE,IE/BcpkB,YAAoB,CAC/CqkB,WAAY,CACVjhB,WAAY,UACZQ,MAAO,UACPK,IAAK,mBAEPqgB,SAAU,CACR,kBAAmB,CACjBC,WAAY,QAEd,UAAW,CACTnhB,WAAY,sBAEd,aAAc,CACZA,WAAY,WAEd,SAAU,CACRpB,KAAM,aAKCwiB,GAAuBxkB,aAAoB,SAACykB,GAAD,MAAmB,CACzE,oBAAqB,CACnBC,KAAM,CACJliB,OAAQ,OAEVmiB,GAAI,CACFniB,OAAQ,UAGZoiB,KAAM,CACJC,UAAU,iBAAD,OAAmBJ,EAAMK,YAAYC,OAAOC,YAEvDC,KAAM,CACJthB,QAAS,OACTnB,OAAQ,OACRY,WAAY,0BACZsB,QAAS,UACTJ,aAAc,OAEhB4gB,IAAK,CACHhiB,SAAU,OACVW,SAAU,OACVC,WAAY,OACZtB,OAAQ,OACRmB,QAAS,OACT0F,eAAgB,SAChBC,WAAY,SACZtD,YAAa,OACb,UAAW,CACTpC,MAAO,qBACPW,OAAQ,YAGZ4gB,SAAU,CACRxhB,QAAS,OACTnB,OAAQ,OACRyC,YAAa,QAEfmgB,QAAS,CACPzhB,QAAS,OACT0F,eAAgB,SAChBC,WAAY,SACZnF,cAAe,SACf6B,YAAa,OACbnC,SAAU,OACVC,WAAY,OACZF,MAAO,2BACP,gBAAiB,CACf2S,QAAS,oBACThS,OAAQ,gBAKD8gB,GAA2BrlB,YAAoB,CAC1D4kB,KAAM,CACJ7gB,SAAU,WACVE,IAAK,OACLsC,KAAM,OACNG,OAAQ,GACRtD,WACE,uFACFoB,UAAW,uCACXH,aAAc,MACd,oBAAqB,CACnBK,QAAS,YAEX,qBAAsB,CACpBd,MAAO,UACPC,SAAU,OACVC,WAAY,QAEd,YAAa,CACXV,WACE,uFACFoB,UAAW,4C,SDvFZ2f,O,eAAAA,I,iBAAAA,I,oBAAAA,Q,KAML,IAAMmB,GAAqD,CACzD,CAAEC,KAAM,SAAUpG,KAAM,cAAC,GAAD,KACxB,CAAEoG,KAAM,QAASpG,KAAM,cAAC,GAAD,MAiCV,SAASqG,GAAUljB,GAAe,IACvCmjB,EAAqCnjB,EAArCmjB,cAAeC,EAAsBpjB,EAAtBojB,kBACjBje,EAAU2c,KACVuB,EAAgBrX,iBAA6BmX,GAHL,EAIH7c,oBAAS,GAJN,mBAIvCgd,EAJuC,KAIvBC,EAJuB,OAKVjd,mBAA6B,MALnB,mBAKvCkd,EALuC,KAK3BC,EAL2B,KAiF9C,OA1EA7W,qBAAU,WACR,IAAMiD,EAAewD,IAAc/C,UAAUiD,IAAaC,cAAc,WAhC1EJ,UACEA,qBACA,CACEsQ,cAAe,CACbC,QAAQ,EACRC,yBAAyB,EACzBC,SAAU,GACVC,SAAU,KAKhB1Q,UAAyBA,WACzBA,iBAAgC,OAChCA,UAAyBA,YACzBA,iBAAgC,QAChCA,UAAyBA,eACzBA,iBAAgC,WAChCA,UAAyBA,aACzBA,iBAAgC,SAChCA,UAAyBA,cACzBA,iBAAgC,aAc9B,OAAO,kBAAMvD,EAAaW,iBACzB,IAEH5D,qBAAU,WACR,IAAMmX,EAAaja,EAAU,CAACD,EAAQiI,YAAajI,EAAQma,OACxD1Z,OACAgG,WAAU,WACT8S,EAAkB,WAEhBa,EAAUna,EAAU,CAACD,EAAQiI,YAAajI,EAAQqa,OACrD5Z,OACAgG,WAAU,WACT8S,EAAkB,cAGhB5kB,EAASsL,EAAU,CAACD,EAAQiI,YAAajI,EAAQsa,OACpD7Z,OACAgG,WAAU,WACT8S,EAAkB,aAGhBgB,EAAQta,EAAU,CAACD,EAAQiI,YAAajI,EAAQwa,OACnD/Z,OACAgG,WAAU,WACT8S,EAAkB,YAGhBkB,EAAUxa,EAAU,CAACD,EAAQiI,YAAajI,EAAQ0a,OACrDja,OACAgG,WAAU,WACT8S,EAAkB,cAGtB,OAAO,WACLW,EAAWvT,cACXyT,EAAQzT,cACRhS,EAAOgS,cACP4T,EAAM5T,cACN8T,EAAQ9T,iBAET,CAAC4S,IAEJxW,qBAAU,WAER,OAAQyW,EAAcxW,SACpB,IAAK,UACHuG,iBAAgC,OAChCA,iBAAgC,kBAChC,MACF,KAAK,KACH,MACF,QACEA,iBAAgCiQ,EAAcxW,SAGlD,OAAQsW,GACN,IAAK,UACH/P,gBAA+B,MAAO,CAAEoR,gBAAiB3C,GAAW4C,OACpErR,gBAA+B,iBAAkB,CAAEoR,gBAAiB3C,GAAW4C,OAC/E,MACF,KAAK,KACH,MACF,QACErR,gBAA+B+P,EAA4C,CACzEqB,gBAAiB3C,GAAW4C,OAGlCpB,EAAcxW,QAAUsW,IACvB,CAACA,IAGF,qCACE,cAACvG,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAI,wBACJrX,KAAK,UACL0O,OAA0B,SAAlBoP,EACR9b,QAAS,kBAAM+b,EAAkB,WAEnC,cAACxG,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,aACLrX,KAAK,UACL0O,OAA0B,YAAlBoP,EACR9b,QAAS,kBAAM+b,EAAkB,cAEnC,cAACxG,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,eACLrX,KAAK,UACL0O,OAA0B,WAAlBoP,GAAgD,UAAlBA,EAEtC9b,QAAS,SAAC0D,GACR0Y,EAAc1Y,EAAM2Z,eACpBnB,GAAiB,MAGrB,cAAC3G,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,YACLrX,KAAK,UACL0O,OAA0B,YAAlBoP,EACR9b,QAAS,kBAAM+b,EAAkB,cAEnC,cAACuB,GAAA,EAAD,CACEC,SAAUpB,EACVtJ,KAAMoJ,EACNne,QAAS,CAAEiV,MAAOjV,EAAQ4c,YAC1B5H,QAAS,kBAAMoJ,GAAiB,IAJlC,SAMGP,GAAWzlB,KAAI,SAACwG,GACf,IAAM8gB,EAAa1B,IAAkBpf,EAAKkf,KAC1C,OACE,eAAC6B,GAAA,EAAD,CAEEC,SAAUF,EACVxd,QAAS,WACP+b,EAAkBrf,EAAKkf,MACvBM,GAAiB,IAEnBzd,UAAS,UAAKX,EAAQ6c,SAAb,YAAyB6C,EAAa,WAAa,IAP9D,UASG9gB,EAAK8Y,KACN,sBAAM/W,UAAU,eAAhB,SAAgC/B,EAAKkf,SAThClf,EAAKkf,c,cEnLxB,SAAS,KAA2Q,OAA9P,GAAW9kB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,4MACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,uLACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,6UACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,yMACHC,KAAM,UAGR,SAASslB,GAAQplB,EAAMC,GACrB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,IAGzC,IAAI,GAA0B,aAAiBklB,IAChC,IC/Cf,SAAS,KAA2Q,OAA9P,GAAW7mB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,kbACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,4uBACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,6dACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,qiBACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,igCACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,4kBACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,4bACHC,KAAM,QACN0L,YAAa,KAGf,SAAS6Z,GAAOrlB,EAAMC,GACpB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,IAG9D,IAAI,GAA0B,aAAiBmlB,IAChC,ICrEf,SAAS,KAA2Q,OAA9P,GAAW9mB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,ijBACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,03BACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,w1BACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,y8BACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,glCACHC,KAAM,QACN0L,YAAa,KAGX,GAAqB,gBAAoB,OAAQ,CACnD3L,EAAG,8iCACHC,KAAM,QACN0L,YAAa,KAGf,SAAS8Z,GAAStlB,EAAMC,GACtB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,IAGvD,IAAI,GAA0B,aAAiBolB,IAChC,IC/Df,SAAS,KAA2Q,OAA9P,GAAW/mB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,IAAK,CAChD8mB,SAAU,eACI,gBAAoB,OAAQ,CAC1C1lB,EAAG,8UACHC,KAAM,QACN0L,YAAa,KACE,gBAAoB,OAAQ,CAC3C3L,EAAG,ghCACHC,KAAM,QACN0L,YAAa,KACE,gBAAoB,OAAQ,CAC3C3L,EAAG,oSACHC,KAAM,QACN0L,YAAa,KACE,gBAAoB,OAAQ,CAC3C3L,EAAG,6bACHC,KAAM,QACN0L,YAAa,MAGX,GAAqB,gBAAoB,OAAQ,KAAmB,gBAAoB,WAAY,CACtG9K,GAAI,SACU,gBAAoB,OAAQ,CAC1CL,MAAO,GACPC,OAAQ,GACRR,KAAM,YAGR,SAAS0lB,GAAYxlB,EAAMC,GACzB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiBslB,I,IAChC,I,2CCvCTC,GAMD,SAAC,GAAgD,IAA9Cvf,EAA6C,EAA7CA,UAAW+W,EAAkC,EAAlCA,KAAMH,EAA4B,EAA5BA,KAAM3I,EAAsB,EAAtBA,OAAQ1M,EAAc,EAAdA,QACrC,OACE,sBACEvB,UAAWA,EACXuB,QAASA,EACTtB,MAAO,CACLzE,MAAOyS,EAAS,UAAY,2BAC5BtR,aAAcsR,EAAS,oBAAsB,QALjD,UAQG8I,EACAH,MAKD4I,GAMD,SAAC,GAA+C,IAA7Cxf,EAA4C,EAA5CA,UAAW0B,EAAiC,EAAjCA,IAAKkV,EAA4B,EAA5BA,KAAM3I,EAAsB,EAAtBA,OAAQ1M,EAAc,EAAdA,QACpC,OACE,sBACEvB,UAAWA,EACXC,MAAO,CACLjE,OAAQiS,EAAS,oBAAsB,UACvChS,aAAc,OAEhBsF,QAASA,EANX,UAQE,qBAAKrB,IAAKwB,EAAKvB,IAAKyW,IACpB,sBAAM3W,MAAO,CAAEuB,UAAW,eAA1B,SAA4CoV,QAKnC,SAAS6I,KACtB,IAAMpgB,EAAU+c,KADoB,EAEJ5b,mBAAS,QAFL,mBAE7Bkf,EAF6B,KAEnBC,EAFmB,OAGZnf,mBAA2B,MAHf,mBAG7BuB,EAH6B,KAGvB6d,EAHuB,OAIApf,mBAAuC,QAJvC,mBAI7Bqf,EAJ6B,KAIjBC,EAJiB,KAK9BC,EAAW7oB,YAAe,YAAY4a,MAAM,KAC5CrP,EAAOud,KAAOC,UAAmD,CACrEC,MAAO/nB,EACPoK,UAAW,CAAE4d,IAAKJ,KAGdK,EAAetf,uBACnB,SAACuf,EAAoBC,GAEf,OAAJ7d,QAAI,IAAJA,KAAM8d,QAAQ3d,SAAQ,SAACe,GACrBA,EAAMhG,OAAOiF,SAAQ,YAAqC,IAAD,EAAjChB,EAAiC,EAAjCA,gBAAiBN,EAAgB,EAAhBA,UAAgB,eACrCA,GADqC,IACvD,2BAA6B,CAAC,IAAnBU,EAAkB,QAC3B,GAAIA,EAAID,OAASse,IAED,OAAZA,GAAqBre,EAAI8K,OAAwB+S,aAAeS,GAApE,CAGA/S,IAAcC,KAAKC,IAAa+S,WAAY,CAC1Cze,KAAMse,EACNpiB,KAAMgE,YAAmBD,EAAKJ,KAEhC,QAXqD,qCAe3Dke,EAAcQ,GACdV,EAAQS,KAEV,CAAC5d,IAGH,OACE,sBAAKzC,UAAWX,EAAQmd,KAAxB,UACE,0BAASxc,UAAWX,EAAQwd,KAA5B,UACE,cAAC,GAAD,CACE7c,UAAWX,EAAQyd,IACnB/F,KAAM,cAAC,GAAD,IACNH,KAAK,OACL3I,OAAqB,SAAbyR,EACRne,QAAS,kBAAMoe,EAAY,WAE7B,cAAC,GAAD,CACE3f,UAAWX,EAAQyd,IACnB/F,KAAM,cAAC,GAAD,IACNH,KAAK,eACL3I,OAAqB,QAAbyR,EACRne,QAAS,kBAAMoe,EAAY,UAE7B,cAAC,GAAD,CACE3f,UAAWX,EAAQyd,IACnB/F,KAAM,cAAC,GAAD,IACNH,KAAK,QACL3I,OAAqB,UAAbyR,EACRne,QAAS,kBAAMoe,EAAY,YAE7B,cAAC,GAAD,CACE3f,UAAWX,EAAQyd,IACnB/F,KAAM,cAAC,GAAD,IACNH,KAAK,WACL3I,OAAqB,aAAbyR,EACRne,QAAS,kBAAMoe,EAAY,kBAG/B,0BAAS3f,UAAWX,EAAQ0d,SAA5B,UACE,cAAC,GAAD,CACE/c,UAAWX,EAAQ2d,QACnBtb,IAAK+e,KACL7J,KAAK,WACL3I,OAAiB,OAATlM,EACRR,QAAS,kBAAM6e,EAAa,SAE9B,cAAC,GAAD,CACEpgB,UAAWX,EAAQ2d,QACnBtb,IAAKgf,KACL9J,KAAK,UACL3I,OAAiB,YAATlM,EACRR,QAAS,kBAAM6e,EAAa,cAE9B,cAAC,GAAD,CACEpgB,UAAWX,EAAQ2d,QACnBtb,IAAKif,KACL/J,KAAK,WACL3I,OAAiB,OAATlM,GAAgC,UAAf8d,EACzBte,QAAS,kBAAM6e,EAAa,KAAM,YAEpC,cAAC,GAAD,CACEpgB,UAAWX,EAAQ2d,QACnBtb,IAAKkf,KACLhK,KAAK,UACL3I,OAAiB,OAATlM,GAAgC,SAAf8d,EACzBte,QAAS,kBAAM6e,EAAa,KAAM,iBC3J5C,SAAS,KAA2Q,OAA9P,GAAW/nB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,2jBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oxBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,qUACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,+jBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oxBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,qUACHC,KAAM,UAGR,SAASinB,GAAQ/mB,EAAMC,GACrB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,IAGvD,IAAI,GAA0B,aAAiB6mB,IAChC,ICzDf,SAAS,KAA2Q,OAA9P,GAAWxoB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,wiBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oxBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,qUACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,wjBACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,2QACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,sWACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,oWACHC,KAAM,UAGR,SAASknB,GAAShnB,EAAMC,GACtB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,IAG9D,IAAI,GAA0B,aAAiB8mB,IAChC,IC9Df,SAAS,KAA2Q,OAA9P,GAAWzoB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,GAAqB,gBAAoB,OAAQ,CACnDoB,EAAG,6GACHC,KAAM,UAGJ,GAAqB,gBAAoB,OAAQ,CACnDD,EAAG,wdACHC,KAAM,UAGR,SAASmnB,GAAMjnB,EAAMC,GACnB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTT,KAAM,OACNU,MAAO,6BACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM,GAAO,IAG3B,IAAI,GAA0B,aAAiB+mB,I,IAChC,I,QCxBf,SAASC,GAAwBT,GAC/B,IAAM9oB,EAAM,IAAIkL,IAMhB,OALA4d,EAAQ3d,SAAQ,YAAgB,EAAbjF,OACViF,SAAQ,YAAuC,IAApChB,EAAmC,EAAnCA,gBAAiBqf,EAAkB,EAAlBA,YACjCxpB,EAAIoL,IAAIjB,EAAiBqf,SAGtBxpB,EASM,SAASypB,GAAgBhnB,GAAe,IAC7Ckb,EAAqDlb,EAArDkb,OAAQ+L,EAA6CjnB,EAA7CinB,gBAAiBC,EAA4BlnB,EAA5BknB,wBAC3B/hB,EAAU4d,KACV8C,EAAW7oB,YAAe,YAC1BuL,EAAOud,KAAOC,UAAmD,CACrEC,MAAO/nB,EACPoK,UAAW,CAAE4d,IAAKJ,EAASjO,MAAM,QANiB,EAQlBtR,mBAChCwgB,GAAwBve,EAAOA,EAAK8d,QAAU,KATI,mBAQ7Cc,EAR6C,KAQlCC,EARkC,OAWhB9gB,mBAAqB,KAXL,mBAW7Cqf,EAX6C,KAWjCC,EAXiC,KAapDhZ,qBAAU,WACHrE,GAEL6e,EAAaN,GAAwBve,EAAK8d,YACzC,CAAC9d,IAEJ,IAAM8e,EAAazgB,uBACjB,SAAC0gB,GAAuD,IAAlC3B,EAAiC,uDAAR,IAEvCxK,EAAQoM,YACZJ,EAAU1pB,IAAIwpB,GACdA,EACAK,EACA3B,GAGmB,IAAjBxK,EAAM3c,QAGV0oB,EAAwBI,EAAUnM,KAEpC,CAAC8L,EAAiBC,EAAyBC,IAGvCK,EAAqB5gB,uBACzB,SAACwf,GACCR,EAAcQ,GACdiB,EAAW,SAAUjB,KAEvB,CAACiB,IAGH,OACE,qCACc,WAAXnM,GACC,sBAAKpV,UAAWX,EAAQmd,KAAxB,UACE,cAACmF,GAAA,EAAD,CACEC,QAAQ,OACR5hB,UAA0B,MAAf6f,EAAqB,SAAW,GAC3Cte,QAAS,kBAAMmgB,EAAmB,MAHpC,kBAOA,cAACC,GAAA,EAAD,CACEC,QAAQ,OACR5hB,UAA0B,MAAf6f,EAAqB,SAAW,GAC3Cte,QAAS,kBAAMmgB,EAAmB,MAHpC,sBASJ,eAAC3gB,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAnC,UACE,cAAC6V,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,QACLrX,KAAK,YACL0O,OAAmB,UAAXmH,EACR7T,QAAS,kBAAMggB,EAAW,YAE5B,cAACzK,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,SACLrX,KAAK,YACL0O,OAAmB,WAAXmH,EACR7T,QAAS,kBAAMggB,EAAW,aAE5B,cAACzK,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,UACLrX,KAAK,YACL0O,QAAQ,EACRyI,UAAU,EACVnV,QAAS,kBAAMggB,EAAW,oBC7FpC,IAAMrE,GAA8C,CAClD,CAAE9H,OAAQ,MAAO2B,KAAM,cAAC,GAAD,KACvB,CAAE3B,OAAQ,MAAO2B,KAAM,cAAC,GAAD,KACvB,CAAE3B,OAAQ,MAAO2B,KAAM,cAAC,GAAD,KACvB,CAAE3B,OAAQ,MAAO2B,KAAM,cAAC,GAAD,MAYV,SAAS8K,GAAQ3nB,GAAe,IAE3Ckb,EAMElb,EANFkb,OACA0M,EAKE5nB,EALF4nB,YACAvM,EAIErb,EAJFqb,aACAwM,EAGE7nB,EAHF6nB,eACAzE,EAEEpjB,EAFFojB,kBACA8D,EACElnB,EADFknB,wBAEI/hB,EAAU2c,KAT4B,EAUDxb,oBAAS,GAVR,mBAUrCgd,EAVqC,KAUrBC,EAVqB,OAWRjd,mBAA6B,MAXrB,mBAWrCkd,EAXqC,KAWzBC,EAXyB,KAatCqE,EAAiBlhB,uBACrB,SAAC7C,GACCsX,EAAatX,GACbwf,GAAiB,KAEnB,CAAClI,IAGH,OACE,0BAAStV,MAAO,CAAEtE,SAAU,YAA5B,UACE,eAACoF,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,gBAAgBghB,GAAG,QAAQC,GAAG,OAAjE,UAEE,eAACnhB,EAAA,EAAD,CAAKxF,QAAQ,OAAb,UACE,cAAC6hB,GAAD,CACEC,cAAeyE,EAAYzE,cAC3BC,kBAAmBA,IAErB,cAACxG,GAAD,CAAUC,KAAM,cAAC,GAAD,IAAgBH,KAAK,SAASrX,KAAK,UAAUmX,UAAU,IACvE,cAACI,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,SACLrX,KAAK,UACLgC,QAAS,SAAC0D,GACR0Y,EAAc1Y,EAAM2Z,eACpBnB,GAAiB,SAKvB,cAACyD,GAAD,CACE9L,OAAQA,EACR+L,gBAAiBW,EAAYlgB,gBAC7Bwf,wBAAyBA,IAI3B,eAACrgB,EAAA,EAAD,CAAKxF,QAAQ,OAAO0F,eAAe,WAAnC,UACE,cAAC6V,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,KACLrX,KAAK,SACL0O,OAAmC,OAA3B6T,EAAY/L,WACpBxU,QAAS,kBAAMwgB,EAAe,SAEhC,cAACjL,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,KACLrX,KAAK,SACL0O,OAAmC,OAA3B6T,EAAY/L,WACpBxU,QAAS,kBAAMwgB,EAAe,SAEhC,cAACjL,GAAD,CACEC,KAAM,cAAC,GAAD,IACNH,KAAK,gBACLrX,KAAK,SACL0O,OAAmC,iBAA3B6T,EAAY/L,WACpBxU,QAAS,kBAAMwgB,EAAe,mBAEhC,cAACjL,GAAD,CAAUC,KAAM,cAAC,GAAD,IAAmBH,KAAK,YAAYrX,KAAK,SAASmX,UAAU,IAC5E,cAACI,GAAD,CAAUC,KAAM,cAAC,GAAD,IAAcH,KAAK,WAAWrX,KAAK,SAASmX,UAAU,UAIzEoL,EAAY/L,YAAc,cAAC0J,GAAD,IAE3B,cAACZ,GAAA,EAAD,CACEC,SAAUpB,EACVtJ,KAAMoJ,EACNne,QAAS,CAAEiV,MAAOjV,EAAQ4c,YAC1B5H,QAAS,kBAAMoJ,GAAiB,IAJlC,SAMGP,GAAWzlB,KAAI,SAACwG,GAAD,OACd,eAAC+gB,GAAA,EAAD,CAEEC,SAAU7J,IAAWnX,EAAKmX,OAC1B7T,QAAS,kBAAMygB,EAAe/jB,EAAKmX,SACnCpV,UAAWX,EAAQ6c,SAJrB,UAMGje,EAAK8Y,KACN,sBAAM/W,UAAU,eAAhB,SAAgC/B,EAAKmX,WANhCnX,EAAKmX,gBCtGP,SAAS+M,GAAcjoB,GAAe,IAC3CiI,EAAgCjI,EAAhCiI,cAAeigB,EAAiBloB,EAAjBkoB,aACjB/iB,EAAU3E,IAFkC,EAGtB8F,mBAAiB6hB,KAHK,mBAG3CjN,EAH2C,KAGnCkN,EAHmC,OAIZ9hB,mBAA0B4hB,GAJd,mBAI3ChgB,EAJ2C,KAI9BmgB,EAJ8B,OAKd/hB,mBAAS,GALK,mBAK3C8U,EAL2C,KAK/BkN,EAL+B,KAM5CC,EAAavc,iBAAsB,MACjCuL,EAAauB,qBAAW1B,IAAxBG,SAEFsQ,EAAiBjhB,uBACrB,SAACiV,GACC,OAAQA,GACN,IAAK,eACH,GAAqC,UAAjC3T,EAAYkT,GAAYvT,KAAkB,OAKlDK,EAAYkT,GAAZ,2BACKlT,EAAYkT,IADjB,IAEES,WAAY3T,EAAYkT,GAAYS,aAAeA,EAAa,KAAOA,IAEzEwM,EAAe,YAAIngB,MAErB,CAACA,EAAakT,IAGVgI,EAAoBxc,uBACxB,SAAC4hB,GACCH,GAAe,SAACtf,GAEd,OADAA,EAAKqS,GAAY+H,cAAgBqF,EAC1B,YAAIzf,QAGf,CAACqS,IAGG8L,EAA0BtgB,uBAAY,SAAC0gB,EAAqBnM,GAChE,IAAID,EACJ,OAAQoM,GACN,IAAK,QACHpM,EAAS,QACT,MACF,IAAK,SACHA,EAAS,SACT,MACF,QAEE,OAEJkN,EAAUlN,GACVmN,GAAe,SAACtf,GAEd,OADAoS,EAAMzS,SAAQ,SAAC3E,EAAM+P,GAAP,OAAgB/K,EAAK+K,GAAO/P,KACnC,YAAIgF,QAEZ,IAEGyS,EAAmB5U,uBAAY,SAAC7C,EAAqB0kB,GACzDJ,GAAe,SAACtf,GACd,IAAM2f,EAAQ,YAAO3f,GAErB,OADA2f,EAASD,GAAa1kB,EACf2kB,OAER,IAEGpN,EAAqB1U,uBAAY,WACrCwhB,EAAUG,EAAW1b,SACrB0b,EAAW1b,QAAU,OACpB,IAEG8b,EAAiB/hB,uBACrB,SAACgiB,GACCL,EAAW1b,QAAUqO,EACrBkN,EAAUQ,KAEZ,CAAC1N,IA4GH,OAxGAtO,qBAAU,WACR,IAAMiD,EAAewD,IAAc/C,UACjCiD,IAAa+S,YACb,YAAwC,IAArCviB,EAAoC,EAApCA,KACDyX,EAAiBzX,EAAMqX,MAI3B,OAAO,kBAAMvL,EAAaW,iBACzB,CAAC4K,EAAYI,IAEhB5O,qBAAU,WACR,IAAMgb,EAAc1f,EAAYkT,GAEhC,SAASyN,EAAkBxqB,GAEzB,IAEMoqB,EAFUlR,EAAS5N,WAAU,qBAAGrJ,KAAgBsnB,EAAYtnB,OAE1B,SAAXjC,EAAoB,GAAK,GAEtD,OAAIoqB,EAAY,GAAKA,IAAclR,EAAS/Y,QAClC,EAGHiqB,EAIT,IAAMK,EAAYhf,EAAU,CAACD,EAAQkf,YAClCze,KAAK0F,aAAS,kBAAMC,YAAS,SAC7BK,WAAU,WACT,IAAM0Y,EAAcH,EAAkB,QAEpCG,GAAe,GACfzR,EAASyR,GAAathB,kBAAoBQ,EAAYkT,GAAY1T,iBAElE8T,EAAiBjE,EAASyR,GAAc5N,MAKxC6N,EAAUnf,EAAU,CAACD,EAAQqf,UAChC5e,KAAK0F,aAAS,kBAAMC,YAAS,SAC7BK,WAAU,WACT,IAAM6Y,EAAcN,EAAkB,QAEpCM,GAAe,GACf5R,EAAS4R,GAAazhB,kBAAoBQ,EAAYkT,GAAY1T,iBAElE8T,EAAiBjE,EAAS4R,GAAc/N,MAKxCgO,EAAatf,EAAU,CAACD,EAAQwf,aACnC/e,KAAK0F,aAAS,kBAAMC,YAAS,SAC7BK,WAAU,WACT,IAAM0Y,EAAcH,EAAkB,QACtC,IAAqB,IAAjBG,EAIJ,IAAK,IAAIlV,EAAMkV,EAAalV,EAAMyD,EAAS/Y,OAAQsV,IAAO,CACxD,IAAM/P,EAAOwT,EAASzD,GACtB,GAAI/P,EAAK2D,kBAAoBkgB,EAAYlgB,gBAAiB,CACxD8T,EAAiBzX,EAAMqX,GACvB,WAMFkO,EAAYxf,EAAU,CAACD,EAAQ0f,YAClCjf,KAAK0F,aAAS,kBAAMC,YAAS,SAC7BK,WAAU,WACT,IAAM6Y,EAAcN,EAAkB,QACtC,IAAqB,IAAjBM,EAAJ,CAKA,IAFA,IAAIK,EAEK1V,EAAMqV,EAAarV,GAAO,EAAGA,IAAO,CAC3C,IAAM/P,EAAOwT,EAASzD,GACtB,GAAI/P,EAAK2D,kBAAoBkgB,EAAYlgB,gBAAiB,CACxD8hB,EAAsBzlB,EAAK2D,gBAC3B,OAIJ,GAAK8hB,EAAL,CAGA,IAAMC,EAAalS,EAASmS,MAAK,SAAC3lB,GAAD,OAAUA,EAAK2D,kBAAoB8hB,KACpEhO,EAAiBiO,EAAarO,QAGlC,OAAO,WACL0N,EAAUtY,cACVyY,EAAQzY,cACR4Y,EAAW5Y,cACX8Y,EAAU9Y,iBAEX,CAACtI,EAAakT,EAAY7D,EAAUiE,IAGrC,cAACmO,GAAA,EAAD,CAAaC,QAASC,KAAtB,SACE,eAAC1R,EAAA,EAAD,CAAMrL,WAAS,EAAChH,UAAWX,EAAQ1E,cAAeqpB,KAAK,SAAvD,UACE,cAAC3R,EAAA,EAAD,CAAMpU,MAAI,EAAC+B,UAAWX,EAAQxE,QAA9B,SACE,cAACqH,EAAD,CACEC,cAAeA,EACf7B,SAAU,kBAAMyhB,EAAe,OAC/B3f,YAAaA,MAGjB,cAACiQ,EAAA,EAAD,CAAMpU,MAAM,EAAM+B,UAAWX,EAAQpE,KAArC,SACGmH,EAAY1J,OAAS,GACpB,qCACE,cAACmpB,GAAD,CACEzM,OAAQA,EACRG,aAAcsN,EACdf,YAAa1f,EAAYkT,GACzByM,eAAgBA,EAChBzE,kBAAmBA,EACnB8D,wBAAyBA,IAE3B,cAACjM,GAAD,CACEE,MAAOjT,EACPgT,OAAQA,EACRE,WAAYA,EACZC,aAAcsN,EACdrN,mBAAoBA,EACpBC,UAAW+M,EACX9M,iBAAkBA,c,kEC7IlC,SAASuO,GAAsB1D,GAC7B,IAAMlL,EAAyB,GAW/B,OAVAkL,EAAQ3d,SAAQ,YAAgB,EAAbjF,OACViF,SAAQ,YAA6C,IAA1ChB,EAAyC,EAAzCA,gBAAiBH,EAAwB,EAAxBA,OAAQH,EAAgB,EAAhBA,UACzCG,EAAOmB,SAAQ,SAAClB,GACd2T,EAAM6O,KAAKviB,YAAeD,EAAKE,OAEjCN,EAAUsB,SAAQ,SAACZ,GACjBqT,EAAM6O,KAAKjiB,YAAmBD,EAAKJ,aAIlCyT,EAKM,SAAS8O,KACtB,IAAMpE,EAAW7oB,YAAe,YAC1B+V,EAAW/V,YAAe,YAFe,EAGvBoL,mBAAkDnK,EAAa,CACrFoK,UAAW,CAAE4d,IAAKJ,EAASjO,MAAM,QAD3BtP,EAHuC,EAGvCA,MAAOC,EAHgC,EAGhCA,KAHgC,EAMLjC,mBAA+B,IAAImC,KAN9B,mBAMxCR,EANwC,KAMzBiiB,EANyB,OAOP5jB,mBAA0B,IAPnB,mBAOxC4hB,EAPwC,KAO1BiC,EAP0B,KAQzCC,EAAerR,mBAAyB,WAC5C,MAAO,CACLxB,SAAUhP,EAAOwhB,GAAsBxhB,EAAK8d,SAAW,MAExD,CAAC9d,IAYJ,OAVAqE,qBAAU,WACHrE,IACL2hB,EAAiBG,YAAmB9hB,EAAK8d,UACzC8D,EACe,QAAbpX,EA5FN,SAA2BtP,GACzB,IAAMilB,EAA4B,GAalC,GAZAjlB,EAAO8D,OAAOmB,SAAQ,SAAClB,GACrBkhB,EAASsB,KAAKviB,YAAeD,EAAK/D,EAAOiE,qBAIvCghB,EAASlqB,OAASwd,IAAMmM,MAC1B1kB,EAAO2D,UAAUsB,SAAQ,SAACZ,GACxB4gB,EAASsB,KAAKjiB,YAAmBD,EAAKrE,EAAOiE,qBAK7CghB,EAASlqB,OAASwd,IAAMmM,KAAiB,CAC3C,IAAMmC,EAAa,IAAIjtB,MAAM2e,IAAMmM,KAAkBO,EAASlqB,QAAQkB,KACpE+H,YAAe,KAAM,KAEvBihB,EAASsB,KAAT,MAAAtB,EAAQ,YAAS4B,IAGnB,OAAO5B,EAwEC6B,CAAkBhiB,EAAK8d,QAAQ,GAAG5iB,OAAO,IArEnD,SACE4iB,EACAR,EACA9S,GAEA,IAAM2V,EAA4B,GAkBlC,GAhBArC,EAAQ3d,SAAQ,SAACe,GACVoc,EAAS2E,SAAS/gB,EAAMG,iBAI7BH,EAAMhG,OAAOiF,SAAQ,YAAkC,IAA/BnB,EAA8B,EAA9BA,OAAQG,EAAsB,EAAtBA,gBAC9BH,EAAOmB,SAAQ,SAAClB,GACTuL,EAASyX,SAAShjB,EAAIijB,eAG3B/B,EAASsB,KAAKviB,YAAeD,EAAKE,aAMpCghB,EAASlqB,OAASwd,IAAMmM,KAAiB,CAC3C,IAAMmC,EAAa,IAAIjtB,MAAM2e,IAAMmM,KAAkBO,EAASlqB,QAAQkB,KACpE+H,YAAe,KAAM,KAEvBihB,EAASsB,KAAT,MAAAtB,EAAQ,YAAS4B,IAGnB,OAAO5B,EAwCCgC,CAAmBniB,EAAK8d,QAASR,EAASjO,MAAM,KAAM7E,EAAS6E,MAAM,UAE1E,CAACrP,EAAMwK,EAAU8S,IAEhBvd,EACK,+CAGkB,IAAvBL,EAAc8F,KACT,iDAIP,cAACqJ,GAAYuT,SAAb,CAAsB7lB,MAAOslB,EAA7B,SACE,cAACnC,GAAD,CAAehgB,cAAeA,EAAeigB,aAAcA,MAvH/D0C,YAAoC9X,YAAcA,EAClD8X,YAAoCC,YAAcA,KAClDzX,WAA0B0X,gBAAkBA,GAC5C1X,WAA0BN,YAAcA,EACxCM,WAA0B2X,OAASA,KACnC3X,OAAsB,CACpB4X,gBAAgB,EAChBC,cAAc","file":"static/js/10.3e6e5235.chunk.js","sourcesContent":["import { useLocation } from 'react-router-dom'\nimport { makeStyles, Theme as DefaultTheme } from '@material-ui/core'\nimport { Styles, WithStylesOptions } from '@material-ui/core/styles/withStyles'\n\nexport function useQueryParams<T extends string | string[]>(\n  params: T\n): T extends string ? string : string[] {\n  const search = new URLSearchParams(useLocation().search)\n\n  if (Array.isArray(params)) {\n    return (params as string[]).map((p) => search.get(p)!) as any\n  }\n\n  return search.get(params as string) as any\n}\n\n// https://stackoverflow.com/questions/62473898/material-ui-rendering-bugs-in-production-build/62646041#62646041\n// To avoid <style> injection order breaking our styles\n// We need to specify makeStyles options \"index\" to force our custom styles to be injected\n// at the end of the <head>\nexport function makeStylesWithIndex<\n  Theme = DefaultTheme,\n  Props extends object = {},\n  ClassKey extends string = string\n>(styles: Styles<Theme, Props, ClassKey>, options?: Omit<WithStylesOptions<Theme>, 'withTheme'>) {\n  return makeStyles(styles, { index: 1, ...options })\n}\n","import { gql } from '@apollo/client'\n\nexport const GET_PATIENT = gql`\n  query GetPatient($id: String!) {\n    patient(id: $id) {\n      his_patient_id\n      name\n      gender\n      view_no\n    }\n  }\n`\n\nexport const GET_STUDIES = gql`\n  query GetStudies($ids: [ID!]!) {\n    studies(ids: $ids) {\n      study_id\n      study_inst_uid\n      patient_id\n      created_at\n      series {\n        study_inst_uid\n        series_inst_uid\n        body_part_exam\n        series_num\n        created_at\n        images {\n          sop_inst_uid\n          file\n          thumbnail\n          func\n          plugin {\n            result\n          }\n        }\n        inference {\n          id\n          result\n          func\n        }\n        predictions {\n          file\n          laterality\n          view_position\n        }\n      }\n    }\n  }\n`\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.13003 15.29L12.01 11.41L15.89 15.29C16.28 15.68 16.91 15.68 17.3 15.29C17.69 14.9 17.69 14.27 17.3 13.88L12.71 9.29002C12.32 8.90002 11.69 8.90002 11.3 9.29002L6.71003 13.88C6.32003 14.27 6.32003 14.9 6.71003 15.29C7.10003 15.67 7.74003 15.68 8.13003 15.29Z\",\n  fill: \"white\"\n});\n\nfunction SvgCollapse(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCollapse);\nexport default __webpack_public_path__ + \"static/media/collapse.81900b2a.svg\";\nexport { ForwardRef as ReactComponent };","import { Theme } from '@material-ui/core'\nimport { makeStylesWithIndex } from 'common/hooks'\n\nexport const usePatientDetailStyles = makeStylesWithIndex({\n  patientDetail: {\n    height: '100vh',\n    userSelect: 'none',\n  },\n  sidebar: {\n    minWidth: '224px',\n    maxWidth: '224px',\n    background: 'rgba(59, 124, 156, 0.3)',\n  },\n  main: {\n    background: 'rgba(59, 124, 156, 0.1)',\n    flexGrow: 1,\n    overflow: 'hidden',\n  },\n})\n\nexport const useSummaryStyles = makeStylesWithIndex<Theme, { withThumbnail: boolean }>({\n  summary: {\n    background: 'rgba(59, 124, 156, 0.3)',\n    height: '100%',\n    overflowY: 'scroll',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n    '& .left': {\n      width: '55%',\n    },\n    color: '#FFFFFF',\n    fontSize: '20px',\n    lineHeight: '27px',\n    position: 'relative',\n  },\n  historyDots: {\n    position: 'absolute',\n    top: '15px',\n    right: '15px',\n    display: 'flex',\n    flexDirection: 'column',\n    '& .dot': {\n      width: '6px',\n      height: '6px',\n      border: '2px solid #DCDCDC',\n      borderRadius: '15px',\n      marginBottom: '15px',\n      '&:hover': {\n        background: '#DCDCDC',\n        cursor: 'pointer',\n        boxShadow: '0px 0px 1px 1px #DCDCDC',\n      },\n      '&.active': {\n        background: '#DCDCDC',\n      },\n    },\n  },\n  section: {\n    padding: (props: any) => (props.withThumbnail ? '0px 30px' : '0px'),\n  },\n  title: {\n    color: '#C53652',\n    background: 'rgba(46, 46, 46, 0.7)',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    fontSize: '18px',\n    lineHeight: '24.5px',\n    padding: '10px 0px',\n    marginBottom: '39px',\n  },\n  customGrid: {\n    borderBottom: '0.5px solid rgba(110, 196, 208, 0.7)',\n    '& .label': {\n      textAlign: 'center',\n      fontWeight: 500,\n      minWidth: '137px',\n      margin: '0px 5%',\n    },\n    '&.small': {\n      paddingLeft: '16px',\n    },\n  },\n  direction: {\n    paddingBottom: '20px',\n    color: 'rgba(255, 255, 255, 0.7)',\n    fontWeight: 500,\n  },\n  klGrade: {\n    padding: '36px 0px',\n    marginBottom: '30px',\n  },\n  resultRow: {\n    paddingBottom: '30px',\n    marginBottom: '30px',\n    '& .label': {\n      flexDirection: 'column',\n      alignSelf: 'stretch',\n    },\n    '& .left, & .label, & .right': {\n      minHeight: '73px',\n      '& .gray': {\n        fontSize: '18px',\n        lineHeight: '24px',\n        color: 'rgba(255, 255, 255, 0.7)',\n        '&:first-of-type': {\n          marginBottom: '24px',\n        },\n      },\n    },\n    '& .highlight': {\n      color: '#FF0000',\n    },\n    '& img': {\n      width: '100px',\n      height: '100px',\n    },\n  },\n  dialog: {\n    position: 'relative',\n    '& img': {\n      height: '80vh',\n      aspectRatio: 1,\n    },\n  },\n})\n\nexport const useStudyListStyles = makeStylesWithIndex({\n  studyList: {\n    height: '100%',\n    color: '#FFFFFF',\n    padding: '12px 6px 0px',\n    boxSizing: 'border-box',\n    background: 'rgba(60, 123, 156, 0.1)',\n  },\n  patientName: {\n    fontSize: '18px',\n    lineHeight: '25px',\n    fontWeight: 400,\n    paddingBottom: '8px',\n    borderBottom: '0.5px solid rgba(113, 195, 216, 0.5)',\n  },\n  year: {\n    display: 'block',\n    fontSize: '16px',\n    lineHeight: '22px',\n    color: '#74C2D8',\n    margin: '10px 0px 6px',\n  },\n  series: {\n    fontSize: '18px',\n    lineHeight: '25px',\n    color: '#FFFFFF',\n    paddingBottom: '8px',\n    marginBottom: '5px',\n    borderBottom: '0.5px solid rgba(110, 196, 208, 0.3)',\n    '& .date': {\n      marginBottom: '6px',\n    },\n    '& .ai-icon': {\n      fontSize: '12px',\n      lineHeight: '20px',\n      width: '20px',\n      height: '20px',\n      background: '#F26A65',\n      borderRadius: '12px',\n      display: 'inline-block',\n      textAlign: 'center',\n      marginRight: '6px',\n      '&:hover': {\n        cursor: 'pointer',\n        background: '#ef7f7b',\n      },\n    },\n    '& .arrow-icon': {\n      transition: 'transform 0.25s ease-in-out',\n      cursor: 'pointer',\n      '&:hover': {\n        background: 'rgba(0, 0, 0, 0.3)',\n        borderRadius: '20px',\n      },\n    },\n  },\n  thumbnail: {\n    display: 'inline-block',\n    cursor: 'move',\n    width: '50px',\n    height: '50px',\n    marginRight: '1px',\n    borderRadius: '3px',\n    '& > img': {\n      width: '100%',\n      height: '100%',\n      borderRadius: '3px',\n    },\n  },\n})\n\nexport const useLayoutPanelStyles = makeStylesWithIndex({\n  layoutPanel: {\n    position: 'relative',\n    height: '90%', // to avoid overflow during screen resize\n  },\n  item: {\n    width: '100%',\n    height: '100%',\n    minHeight: '300px',\n    position: 'relative',\n  },\n  overlap: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    opacity: 0,\n  },\n  backspace: {\n    position: 'absolute',\n    top: '4px',\n    left: '20px',\n    zIndex: 15,\n    '&:hover': {\n      cursor: 'pointer',\n      background: '#3B7B9C',\n      borderRadius: '20px',\n    },\n  },\n})\n\nexport const useThreeDStyles = makeStylesWithIndex({\n  xtkWrapper: {\n    backgroundColor: '#000000',\n    height: '100%',\n    '& .xtk-progress-bar': {\n      opacity: '0 !important',\n    },\n  },\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    background: 'rgb(0, 0, 0, 0.3)',\n    '& .progress': {\n      position: 'relative',\n      left: 'calc(50% - 20px)',\n      top: 'calc(50% - 20px)',\n    },\n  },\n  settingIcon: {\n    position: 'absolute',\n    top: 12,\n    right: 12,\n    padding: '6px',\n    '&:hover': {\n      background: '#3B7B9C',\n      borderRadius: '20px',\n      cursor: 'pointer',\n    },\n  },\n  thresholdPanel: {\n    color: '#FFFFFF',\n    position: 'absolute',\n    top: 50,\n    right: 0,\n    transition: 'all 0.5s ease-in-out',\n    background: 'rgb(46, 59, 64)',\n    width: '250px',\n    boxSizing: 'border-box',\n    height: '0px',\n    opacity: 0,\n    '&.active': {\n      height: '500px',\n      padding: '6px',\n      opacity: 1,\n    },\n  },\n  slider: {\n    width: '75%',\n  },\n  label: {\n    fontSize: '12px',\n    marginTop: '12px',\n  },\n  value: {\n    margin: '0px 6px',\n    minWidth: '28px',\n    boxSizing: 'border-box',\n  },\n})\n","import { Box } from '@material-ui/core'\nimport { useDrag } from 'react-dnd'\nimport { DraggableItem, Patient, Series, Study } from 'common/types'\nimport { ReactComponent as CollapseIcon } from 'assets/icon/collapse.svg'\nimport dayjs from 'dayjs'\nimport React, { useCallback, useState } from 'react'\nimport { useStudyListStyles } from 'PatientDetail/styles'\nimport { parseImageItem, parseInferenceItem } from 'common/utils'\nimport { useQuery } from '@apollo/client'\nimport { GET_PATIENT } from 'PatientDetail/gql'\nimport { useQueryParams } from 'common/hooks'\n\ninterface Props {\n  studiesByYear: Map<string, Study[]>\n  activeItems: DraggableItem[]\n  onOpenAi: () => void\n}\n\nfunction getActiveItemsMap(activeItems: DraggableItem[]) {\n  const newMap = new Map()\n\n  activeItems.forEach((item) => {\n    item && newMap.set(item.id, true)\n  })\n\n  return newMap\n}\n\nconst ListItem: React.FC<{\n  listItem: DraggableItem\n  isActive: boolean\n  onDragEnd: (previousItemId: string | undefined, newItemId: string) => void\n}> = (props) => {\n  const { listItem, isActive, onDragEnd } = props\n  const classes = useStudyListStyles()\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: 'box',\n    item: listItem,\n    end: (item, monitor) => {\n      const dropResult = monitor.getDropResult<{ previousItemId: string }>()\n      if (item && dropResult) {\n        onDragEnd(dropResult.previousItemId, item.id)\n      }\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  }))\n\n  const opacity = isDragging ? 0.4 : 1\n\n  return (\n    <div\n      ref={drag}\n      className={classes.thumbnail}\n      style={{\n        border: isActive ? '1px solid #71C3D8' : 'none',\n        opacity,\n      }}\n    >\n      <img src={listItem.thumbnail} alt={listItem.id} />\n    </div>\n  )\n}\n\nconst List: React.FC<{\n  series: Series\n  defaultVisible: boolean\n  onOpenAi: () => void\n  onDragEnd: (previousItemId: string | undefined, newItemId: string) => void\n  activeItemMap: Map<string, boolean>\n}> = ({ series, defaultVisible, onOpenAi, onDragEnd, activeItemMap }) => {\n  const classes = useStudyListStyles()\n  const [visible, toggleVisible] = useState(defaultVisible)\n  const [showAiItems, toggleAiItems] = useState(false)\n\n  const onClickAiIcon = useCallback(() => {\n    toggleAiItems(true)\n    onOpenAi()\n  }, [onOpenAi])\n\n  return (\n    <div key={'series' + series.series_inst_uid} className={classes.series}>\n      <Box\n        component=\"span\"\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        className=\"date\"\n      >\n        {dayjs(series.created_at).format('MM/DD')}\n        <Box display=\"flex\" alignItems=\"center\">\n          {series.inference.length > 0 && (\n            <span className=\"ai-icon\" onClick={onClickAiIcon}>\n              AI\n            </span>\n          )}\n          <CollapseIcon\n            className=\"arrow-icon\"\n            style={{ transform: visible ? 'rotate(180deg)' : 'none' }}\n            onClick={() => toggleVisible(!visible)}\n          />\n        </Box>\n      </Box>\n      {visible &&\n        series.images.map((img) => {\n          const listItem = parseImageItem(img, series.series_inst_uid)\n          return (\n            <ListItem\n              key={listItem.id}\n              listItem={listItem}\n              isActive={activeItemMap.has(listItem.id)}\n              onDragEnd={onDragEnd}\n            />\n          )\n        })}\n      {visible &&\n        showAiItems &&\n        // 1. We show ai items only when user clicks the ai icon\n        // 2. We do not support flesh removal dragging, so we\n        series.inference\n          .filter(({ func }) => func !== 'fleshRemoval')\n          .map((inf) => {\n            const listItem = parseInferenceItem(inf, series.series_inst_uid)\n            return (\n              <ListItem\n                key={listItem.id}\n                listItem={listItem}\n                isActive={activeItemMap.has(listItem.id)}\n                onDragEnd={onDragEnd}\n              />\n            )\n          })}\n    </div>\n  )\n}\n\nexport default function StudyList(props: Props) {\n  const { studiesByYear, activeItems, onOpenAi } = props\n  const patientId = useQueryParams('patientId')\n  const { error, data } = useQuery<{ patient: Patient }, { id: string }>(GET_PATIENT, {\n    variables: { id: patientId },\n  })\n  const classes = useStudyListStyles()\n  const [activeItemMap, setActiveItemMap] = useState<Map<string, boolean>>(\n    getActiveItemsMap(activeItems)\n  )\n\n  const onDragEnd = useCallback((previousItemId: string | undefined, newItemId: string) => {\n    setActiveItemMap((prev) => {\n      const newMap = new Map(prev)\n      // it is possible that user drags to an empty block\n      if (previousItemId) {\n        newMap.delete(previousItemId)\n      }\n      newMap.set(newItemId, true)\n      return newMap\n    })\n  }, [])\n\n  if (error) {\n    return <>'error'</>\n  }\n\n  if (!data) {\n    return <>'Loading'</>\n  }\n\n  return (\n    <section className={classes.studyList}>\n      <div className={classes.patientName}>\n        {data.patient.view_no.toString().padStart(3, '0')} {data.patient.name}\n      </div>\n      {[...studiesByYear.entries()].map(([year, studyGroup]) => (\n        <Box key={year} mb=\"20px\">\n          <span className={classes.year}>{year}</span>\n          {studyGroup.map((study) => (\n            <div key={'study' + study.study_inst_uid}>\n              {study.series.map((series) => {\n                const isVisible =\n                  activeItems.findIndex(\n                    ({ series_inst_uid }) => series_inst_uid === series.series_inst_uid\n                  ) > -1\n                return (\n                  <List\n                    key={series.series_inst_uid}\n                    series={series}\n                    activeItemMap={activeItemMap}\n                    onOpenAi={onOpenAi}\n                    onDragEnd={onDragEnd}\n                    defaultVisible={isVisible}\n                  />\n                )\n              })}\n              {/* End of study */}\n            </div>\n          ))}\n          {/* End of year group */}\n        </Box>\n      ))}\n    </section>\n  )\n}\n","import { combineLatest, fromEvent, merge, Observable } from 'rxjs'\nimport { distinctUntilChanged, filter, share } from 'rxjs/operators'\n\n// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code\nexport enum KeyCode {\n  KeyA = 'KeyA',\n  KeyB = 'KeyB',\n  KeyC = 'KeyC',\n  KeyD = 'KeyD',\n  KeyE = 'KeyE',\n  KeyF = 'KeyF',\n  KeyG = 'KeyG',\n  KeyH = 'KeyH',\n  KeyI = 'KeyI',\n  KeyJ = 'KeyJ',\n  KeyK = 'KeyK',\n  KeyL = 'KeyL',\n  KeyM = 'KeyM',\n  KeyN = 'KeyN',\n  KeyO = 'KeyO',\n  KeyP = 'KeyP',\n  KeyQ = 'KeyQ',\n  KeyR = 'KeyR',\n  KeyS = 'KeyS',\n  KeyT = 'KeyT',\n  KeyU = 'KeyU',\n  KeyV = 'KeyV',\n  KeyW = 'KeyW',\n  KeyX = 'KeyX',\n  KeyY = 'KeyY',\n  KeyZ = 'KeyZ',\n\n  Digit0 = 'Digit0',\n  Digit1 = 'Digit1',\n  Digit2 = 'Digit2',\n  Digit3 = 'Digit3',\n  Digit4 = 'Digit4',\n  Digit5 = 'Digit5',\n  Digit6 = 'Digit6',\n  Digit7 = 'Digit7',\n  Digit8 = 'Digit8',\n  Digit9 = 'Digit9',\n\n  F1 = 'F1',\n  F2 = 'F2',\n  F3 = 'F3',\n  F4 = 'F4',\n  F5 = 'F5',\n  F6 = 'F6',\n  F7 = 'F7',\n  F8 = 'F8',\n  F9 = 'F9',\n  F10 = 'F10',\n  F11 = 'F11',\n  F12 = 'F12',\n\n  F13 = 'F13',\n  F14 = 'F14',\n  F15 = 'F15',\n  F16 = 'F16',\n  F17 = 'F17',\n  F18 = 'F18',\n  F19 = 'F19',\n  F20 = 'F20',\n\n  MetaLeft = 'MetaLeft',\n  AltLeft = 'AltLeft',\n  ShiftLeft = 'ShiftLeft',\n  ControlLeft = 'ControlLeft',\n\n  MetaRight = 'MetaRight',\n  AltRight = 'AltRight',\n  ShiftRight = 'ShiftRight',\n  ControlRight = 'ControlRight',\n\n  ArrowRight = 'ArrowRight',\n  ArrowUp = 'ArrowUp',\n  ArrowLeft = 'ArrowLeft',\n  ArrowDown = 'ArrowDown',\n\n  Function = 'Function',\n  Delete = 'Delete',\n  Home = 'Home',\n  End = 'End',\n  PageUp = 'PageUp',\n  PageDown = 'PageDown',\n\n  Backquote = 'Backquote',\n  CapsLock = 'CapsLock',\n  Tab = 'Tab',\n  Space = 'Space',\n  Backspace = 'Backspace',\n  Enter = 'Enter',\n  Escape = 'Escape',\n\n  Backslash = 'Backslash',\n  Comma = 'Comma',\n  Equal = 'Equal',\n  BracketLeft = 'BracketLeft',\n  Minus = 'Minus',\n  Period = 'Period',\n  Quote = 'Quote',\n  BracketRight = 'BracketRight',\n  Semicolon = 'Semicolon',\n  Slash = 'Slash',\n\n  Numpad0 = 'Numpad0',\n  Numpad1 = 'Numpad1',\n  Numpad2 = 'Numpad2',\n  Numpad3 = 'Numpad3',\n  Numpad4 = 'Numpad4',\n  Numpad5 = 'Numpad5',\n  Numpad6 = 'Numpad6',\n  Numpad7 = 'Numpad7',\n  Numpad8 = 'Numpad8',\n  Numpad9 = 'Numpad9',\n}\n\nexport const shortcut$ = (shortcut: KeyCode[]): Observable<KeyboardEvent[]> => {\n  const keyDown$ = fromEvent<KeyboardEvent>(document, 'keydown')\n  const keyUp$ = fromEvent<KeyboardEvent>(document, 'keyup')\n\n  // All KeyboardEvents - emitted only when KeyboardEvent changes (key or type)\n  const keyEvents$ = merge(keyDown$, keyUp$).pipe(\n    distinctUntilChanged((a, b) => a.code === b.code && a.type === b.type),\n    share()\n  )\n\n  // Create KeyboardEvent Observable for specified KeyCode\n  const createKeyPressStream = (charCode: KeyCode) =>\n    keyEvents$.pipe(filter((event) => event.code === charCode.valueOf()))\n\n  // Create Event Stream for every KeyCode in shortcut\n  const keyCodeEvents$ = shortcut.map((s) => createKeyPressStream(s))\n\n  // Emit when specified keys are pressed (keydown).\n  // Emit only when all specified keys are pressed at the same time.\n  // More on combineLatest below\n  return combineLatest(keyCodeEvents$).pipe(\n    filter<KeyboardEvent[]>((arr) => arr.every((a) => a.type === 'keydown'))\n  )\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3.5 18C3.5 18.55 3.95 19 4.5 19H9.5V17H4.5C3.95 17 3.5 17.45 3.5 18ZM3.5 6C3.5 6.55 3.95 7 4.5 7H13.5V5H4.5C3.95 5 3.5 5.45 3.5 6ZM13.5 20V19H20.5C21.05 19 21.5 18.55 21.5 18C21.5 17.45 21.05 17 20.5 17H13.5V16C13.5 15.45 13.05 15 12.5 15C11.95 15 11.5 15.45 11.5 16V20C11.5 20.55 11.95 21 12.5 21C13.05 21 13.5 20.55 13.5 20ZM7.5 10V11H4.5C3.95 11 3.5 11.45 3.5 12C3.5 12.55 3.95 13 4.5 13H7.5V14C7.5 14.55 7.95 15 8.5 15C9.05 15 9.5 14.55 9.5 14V10C9.5 9.45 9.05 9 8.5 9C7.95 9 7.5 9.45 7.5 10ZM21.5 12C21.5 11.45 21.05 11 20.5 11H11.5V13H20.5C21.05 13 21.5 12.55 21.5 12ZM16.5 9C17.05 9 17.5 8.55 17.5 8V7H20.5C21.05 7 21.5 6.55 21.5 6C21.5 5.45 21.05 5 20.5 5H17.5V4C17.5 3.45 17.05 3 16.5 3C15.95 3 15.5 3.45 15.5 4V8C15.5 8.55 15.95 9 16.5 9Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 25,\n    height: 24,\n    viewBox: \"0 0 25 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.84d6cad5.svg\";\nexport { ForwardRef as ReactComponent };","import { Box, CircularProgress, Slider, Typography } from '@material-ui/core'\nimport { useEffect, useRef, useState } from 'react'\nimport { ColorResult, RGBColor, SketchPicker } from 'react-color'\nimport { ReactComponent as SettingIcon } from 'assets/icon/settings.svg'\nimport { useThreeDStyles } from 'PatientDetail/styles'\n\nconst DEFAULT_OPACITY = 0.3\nconst DEFAULT_THRESHOLDS = [0, 1000]\nconst DEFAULT_WINDOWS = [0, 1000]\nconst DEFAULT_COLOR = { r: 255, g: 255, b: 255 } as RGBColor\n\ninterface Props {\n  filepath: string\n  id: string\n}\n\nexport default function ThreeDViewer(props: Props) {\n  const { filepath, id } = props\n  const classes = useThreeDStyles()\n  const [isReady, toggleReady] = useState(true)\n  const renderRef = useRef(new (window as any).X.renderer3D())\n  const volumeRef = useRef(new (window as any).X.volume())\n  const [config, setConfig] = useState({\n    opacity: DEFAULT_OPACITY,\n    color: DEFAULT_COLOR,\n    thresholds: DEFAULT_THRESHOLDS,\n    windows: DEFAULT_WINDOWS,\n  })\n  const [showPanel, togglePanel] = useState(false)\n\n  useEffect(() => {\n    renderRef.current.container = id\n    renderRef.current.init()\n\n    volumeRef.current.file = filepath\n    volumeRef.current.volumeRendering = true\n    volumeRef.current.opacity = DEFAULT_OPACITY\n\n    renderRef.current.add(volumeRef.current)\n\n    renderRef.current.camera.position = [120, 120, 120]\n    renderRef.current.render()\n    renderRef.current.onShowtime = () => {\n      setConfig((prev) => ({\n        ...prev,\n        thresholds: [volumeRef.current.lowerThreshold, volumeRef.current.upperThreshold],\n        windows: [volumeRef.current.windowLow, volumeRef.current.windowHigh],\n      }))\n      // DEMO CODE\n      volumeRef.current.lowerThreshold = 50\n      volumeRef.current.highThreshold = 1200\n      volumeRef.current.windowHigh = 600\n    }\n\n    // renderRef.current.onRender = function () {\n    //   // Rotate the camera to pre-load all the angles in case user encounter laggy dragging\n    //   renderRef.current.camera.rotate([5, 5])\n    // }\n\n    const timeout = setTimeout(() => {\n      // Clear the render function and reset the camera position\n      // renderRef.current.onRender = function () {}\n      // renderRef.current.camera.position = [120, 120, 120]\n      toggleReady(true)\n    }, 8000)\n\n    return () => clearTimeout(timeout)\n  }, [filepath, id])\n\n  const onOpacityChange = (_: any, newValue: number | number[]) => {\n    setConfig((prev) => ({ ...prev, opacity: newValue as number }))\n    volumeRef.current.opacity = newValue\n  }\n\n  const onThresholdChange = (_: any, newValue: number | number[]) => {\n    const newThresholds = newValue as number[]\n    volumeRef.current.lowerThreshold = newThresholds[0]\n    volumeRef.current.upperThreshold = newThresholds[1]\n    setConfig((prev) => ({ ...prev })) // force re-rendering\n  }\n\n  const onWindowChange = (_: any, newValue: number | number[]) => {\n    const newWindows = newValue as number[]\n    volumeRef.current.windowLow = newWindows[0]\n    volumeRef.current.windowHigh = newWindows[1]\n    setConfig((prev) => ({ ...prev })) // force re-rendering\n  }\n\n  const onColorChange = (color: ColorResult) => {\n    const { r, g, b } = color.rgb\n    setConfig((prev) => ({ ...prev, color: color.rgb }))\n    volumeRef.current.maxColor = [r / 255, g / 255, b / 255]\n  }\n\n  return (\n    <div style={{ height: '100%', position: 'relative' }}>\n      {/* XTK canvas container */}\n      <div className={classes.xtkWrapper} id={id} />\n      {/* Block user mouse event before the model is ready */}\n      {!isReady && (\n        <div className={classes.loading}>\n          <CircularProgress size={40} className=\"progress\" />\n        </div>\n      )}\n      {/* DEMO CODE */}\n      {isReady && (\n        <>\n          <SettingIcon className={classes.settingIcon} onClick={() => togglePanel(!showPanel)} />\n          <section className={`${classes.thresholdPanel} ${showPanel ? 'active' : ''}`}>\n            {showPanel && (\n              <>\n                <div>\n                  <Typography className={classes.label} gutterBottom>\n                    Opacity\n                  </Typography>\n                  <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <span className={classes.value}>0</span>\n                    <Slider\n                      value={config.opacity}\n                      min={0.1}\n                      max={1}\n                      step={0.1}\n                      onChange={onOpacityChange}\n                      className={classes.slider}\n                    />\n                    <span className={classes.value}>1</span>\n                  </Box>\n                </div>\n\n                <div>\n                  <Typography className={classes.label} gutterBottom>\n                    Threshold\n                  </Typography>\n                  <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <span className={classes.value}>\n                      {volumeRef.current.lowerThreshold.toFixed(0)}\n                    </span>\n                    <Slider\n                      defaultValue={config.thresholds}\n                      min={config.thresholds[0]}\n                      max={config.thresholds[1]}\n                      step={10}\n                      onChange={onThresholdChange}\n                      className={classes.slider}\n                    />\n                    <span className={classes.value}>\n                      {volumeRef.current.upperThreshold.toFixed(0)}\n                    </span>\n                  </Box>\n                </div>\n\n                <div>\n                  <Typography className={classes.label} gutterBottom>\n                    Window\n                  </Typography>\n                  <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <span className={classes.value}>{volumeRef.current.windowLow.toFixed(0)}</span>\n                    <Slider\n                      defaultValue={config.windows}\n                      min={config.windows[0]}\n                      max={config.windows[1]}\n                      step={10}\n                      onChange={onWindowChange}\n                      className={classes.slider}\n                    />\n                    <span className={classes.value}>{volumeRef.current.windowHigh.toFixed(0)}</span>\n                  </Box>\n                </div>\n\n                <SketchPicker color={config.color} onChangeComplete={onColorChange} />\n              </>\n            )}\n          </section>\n        </>\n      )}\n    </div>\n  )\n}\n","import { useCallback, useEffect, useRef, useState } from 'react'\n\nimport * as cornerstone from 'cornerstone-core'\nimport * as cornerstoneTools from 'cornerstone-tools'\nimport { FILES_URL, globalSubject } from 'common/utils'\nimport { SubjectTopic } from 'common/utils'\nimport { fromEvent, interval, Subscription } from 'rxjs'\nimport { mergeMap, map, takeUntil, tap, throttle } from 'rxjs/operators'\nimport { KeyCode, shortcut$ } from 'common/shortcut'\nimport ThreeDViewer from './ThreeDViewer'\n\nconst MAX_GAMMA_CORRECTION = 1\nconst MIN_GAMMA_CORRECTION = 0.5\n\nconst FleshRemoval: React.FC<{ data: { original: string; fleshRemoval: string } }> = ({ data }) => {\n  const [opacity, setOpacity] = useState(1)\n  const divRef = useRef<HTMLDivElement>(null)\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const prevOpacityRef = useRef<number>(opacity)\n  const currentGammaCorrectionRef = useRef<number>(1)\n\n  const calculateGammaCorrection = useCallback((gammaCorrection: number, delta: number) => {\n    const newGamma = gammaCorrection + delta\n    return newGamma > MAX_GAMMA_CORRECTION\n      ? MAX_GAMMA_CORRECTION\n      : newGamma < MIN_GAMMA_CORRECTION\n      ? MIN_GAMMA_CORRECTION\n      : newGamma\n  }, [])\n\n  // Subscribe mouse event to simulate flesh removal when user drag vertically\n  useEffect(() => {\n    if (!divRef.current) return\n\n    const mouseDowns$ = fromEvent<MouseEvent>(divRef.current, 'mousedown')\n    const mouseUps$ = fromEvent<MouseEvent>(divRef.current, 'mouseup')\n    const mouseMoves$ = fromEvent<MouseEvent>(divRef.current, 'mousemove')\n\n    const subscription = mouseDowns$\n      .pipe(\n        mergeMap((mouseDown) =>\n          mouseMoves$.pipe(\n            throttle(() => interval(100)),\n            map((mouseMove) => mouseMove.clientY - mouseDown.clientY),\n            takeUntil(\n              mouseUps$.pipe(\n                tap(() =>\n                  setOpacity((prev) => {\n                    // When mouse up, we update the previous opacity in setOpacity to avoid using \"opacity\"\n                    // in the dependency array which will effect the subscription\n                    prevOpacityRef.current = prev\n                    return prev\n                  })\n                )\n              )\n            )\n          )\n        )\n      )\n      .subscribe((delta) => {\n        const nextOpacity = prevOpacityRef.current + delta * 0.01\n        setOpacity(nextOpacity <= 0 ? 0 : nextOpacity >= 1 ? 1 : nextOpacity)\n      })\n\n    return () => subscription.unsubscribe()\n  }, [calculateGammaCorrection])\n\n  // Subscribe mouse event to calculate gamma correction when user drag horizontally\n  useEffect(() => {\n    if (!divRef.current) return\n\n    const mouseDowns$ = fromEvent<MouseEvent>(divRef.current, 'mousedown')\n    const mouseUps$ = fromEvent<MouseEvent>(divRef.current, 'mouseup')\n    const mouseMoves$ = fromEvent<MouseEvent>(divRef.current, 'mousemove')\n\n    let subscription: Subscription\n\n    const img = new Image()\n    img.crossOrigin = 'anonymous'\n    img.src = `${FILES_URL}/${data.fleshRemoval}`\n\n    const resizeListener = () => {\n      canvasRef.current!.width = divRef.current!.clientWidth\n      canvasRef.current!.height = divRef.current!.clientHeight\n      const ctx = canvasRef.current!.getContext('2d')!\n      ctx.drawImage(img, 0, 0, divRef.current!.clientWidth, divRef.current!.clientHeight)\n    }\n\n    img.onload = () => {\n      // IMPORTANT: we should always refer to divRef.current.clientWidth/Height\n      // instead of making a local variable like\n      // const width = divRef.current!.clientWidth\n      // because this onload function will never update once the image is loaded\n      // thus the local variable width/height will be incorrect after window resize\n      window.addEventListener('resize', resizeListener)\n      canvasRef.current!.width = divRef.current!.clientWidth\n      canvasRef.current!.height = divRef.current!.clientHeight\n      const ctx = canvasRef.current!.getContext('2d')!\n      ctx.drawImage(img, 0, 0, divRef.current!.clientWidth, divRef.current!.clientHeight)\n\n      subscription = mouseDowns$\n        .pipe(\n          mergeMap((mouseDown) =>\n            mouseMoves$.pipe(\n              throttle(() => interval(100)),\n              map((mouseMove) => mouseMove.clientX - mouseDown.clientX),\n              takeUntil(\n                mouseUps$.pipe(\n                  tap((mouseUpEvent) => {\n                    // When mouse up, update the current gamma correction\n                    const delta = mouseUpEvent.clientX - mouseDown.clientX\n                    currentGammaCorrectionRef.current = calculateGammaCorrection(\n                      currentGammaCorrectionRef.current,\n                      delta / divRef.current!.clientWidth\n                    )\n                  })\n                )\n              )\n            )\n          )\n        )\n        .subscribe((delta) => {\n          const gammaCorrection = calculateGammaCorrection(\n            currentGammaCorrectionRef.current,\n            delta / divRef.current!.clientWidth\n          )\n\n          // Step 1: redraw the original image\n          ctx.drawImage(img, 0, 0, divRef.current!.clientWidth, divRef.current!.clientHeight)\n\n          const imageData = ctx.getImageData(\n            0,\n            0,\n            divRef.current!.clientWidth,\n            divRef.current!.clientHeight\n          )\n          const data = imageData.data\n          // Step 2: calculate the gamma correction\n          for (let i = 0; i < data.length; i += 4) {\n            data[i] = Math.pow(data[i] / 255, gammaCorrection) * 255\n            data[i + 1] = Math.pow(data[i + 1] / 255, gammaCorrection) * 255\n            data[i + 2] = Math.pow(data[i + 2] / 255, gammaCorrection) * 255\n          }\n          // Step 3: update the calculated pixel data to canvas\n          ctx.putImageData(imageData, 0, 0)\n        })\n    }\n\n    return () => {\n      subscription.unsubscribe()\n      window.removeEventListener('resize', resizeListener)\n    }\n  }, [calculateGammaCorrection, data.fleshRemoval])\n\n  useEffect(() => {\n    const decrease = shortcut$([KeyCode.ControlLeft, KeyCode.KeyR, KeyCode.Minus])\n      .pipe()\n      .subscribe(() => {\n        setOpacity((prev) => {\n          const nextOpacity = prev - 0.1\n          return nextOpacity <= 0 ? 0 : nextOpacity >= 1 ? 1 : nextOpacity\n        })\n      })\n    const increase = shortcut$([KeyCode.ControlLeft, KeyCode.KeyR, KeyCode.Equal])\n      .pipe()\n      .subscribe(() => {\n        setOpacity((prev) => {\n          const nextOpacity = prev + 0.1\n          return nextOpacity <= 0 ? 0 : nextOpacity >= 1 ? 1 : nextOpacity\n        })\n      })\n\n    return () => {\n      decrease.unsubscribe()\n      increase.unsubscribe()\n    }\n  }, [])\n\n  return (\n    <div\n      ref={divRef}\n      draggable={false}\n      style={{ width: '100%', height: '100%', position: 'absolute', top: '0px', left: '0px' }}\n    >\n      <img\n        draggable={false}\n        src={`${FILES_URL}/${data.original}`}\n        alt=\"bone\"\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          zIndex: 10,\n          opacity,\n        }}\n      />\n      <canvas ref={canvasRef} style={{ position: 'absolute', top: 0, left: 0, zIndex: 9 }} />\n    </div>\n  )\n}\n\ninterface Props {\n  id: string\n  filepath: string\n  plugin: Record<string, any>[]\n  isFocused: boolean\n  enableFleshRemoval: boolean\n  enableCT: boolean\n}\n\nexport default function ImageViewer(props: Props) {\n  const { id, filepath, plugin, isFocused, enableFleshRemoval, enableCT } = props\n  const elementRef = useRef(null)\n\n  const fleshRemovalPluginIdx = plugin.findIndex(({ result }) => result.func === 'fleshRemoval')\n  const ctPluginIdx = plugin.findIndex(({ result }) => result.func === 'ct')\n\n  useEffect(() => {\n    cornerstone.enable(elementRef.current!)\n    const imageIds = [`wadouri:${filepath}`]\n\n    const stack = {\n      currentImageIdIndex: 0,\n      imageIds: imageIds,\n    }\n\n    cornerstone.loadImage(imageIds[0]).then((image: any) => {\n      cornerstoneTools.addStackStateManager(elementRef.current!)\n      cornerstoneTools.addToolState(elementRef.current!, 'stack', stack)\n      cornerstone.displayImage(elementRef.current!, image)\n      globalSubject.next(SubjectTopic.InitXrayTool)\n    })\n  }, [filepath])\n\n  useEffect(() => {\n    if (!isFocused) return\n\n    const deleteAll = shortcut$([KeyCode.ControlLeft, KeyCode.Delete])\n      .pipe(\n        tap(() => {\n          const angleAnnotations = cornerstoneTools.getToolState(elementRef.current!, 'Angle')\n          if (angleAnnotations) {\n            angleAnnotations.data = []\n            cornerstone.updateImage(elementRef.current!)\n          }\n          const lengthAnnotations = cornerstoneTools.getToolState(elementRef.current!, 'Length')\n          if (lengthAnnotations) {\n            lengthAnnotations.data = []\n            cornerstone.updateImage(elementRef.current!)\n          }\n        })\n      )\n      .subscribe()\n\n    const deleteSelected = shortcut$([KeyCode.Delete])\n      .pipe(\n        tap(() => {\n          const angleAnnotations = cornerstoneTools.getToolState(elementRef.current!, 'Angle')\n          if (angleAnnotations) {\n            for (let idx = 0; idx < angleAnnotations.data.length; idx++) {\n              const anno = angleAnnotations.data[idx]\n              if (anno.active) {\n                angleAnnotations.data.splice(idx, 1)\n                break\n              }\n            }\n            cornerstone.updateImage(elementRef.current!)\n          }\n          const lengthAnnotations = cornerstoneTools.getToolState(elementRef.current!, 'Length')\n          if (lengthAnnotations) {\n            for (let idx = 0; idx < lengthAnnotations.data.length; idx++) {\n              const anno = lengthAnnotations.data[idx]\n              if (anno.active) {\n                lengthAnnotations.data.splice(idx, 1)\n                break\n              }\n            }\n            cornerstone.updateImage(elementRef.current!)\n          }\n        })\n      )\n      .subscribe()\n\n    return () => {\n      deleteAll.unsubscribe()\n      deleteSelected.unsubscribe()\n    }\n  }, [isFocused])\n\n  return (\n    <div\n      ref={elementRef}\n      id={id}\n      style={{\n        maxWidth: '100%',\n        height: '100%',\n        backgroundColor: '#000000',\n        outline: 'none',\n      }}\n      tabIndex={0}\n      onContextMenu={(e) => {\n        e.preventDefault()\n      }}\n    >\n      {enableFleshRemoval && fleshRemovalPluginIdx !== -1 && (\n        <FleshRemoval data={plugin![fleshRemovalPluginIdx].result.data} />\n      )}\n      {enableCT && ctPluginIdx !== -1 && (\n        <div\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 10,\n            height: '100%',\n            width: '100%',\n          }}\n        >\n          <ThreeDViewer\n            id={`ct-${id}`}\n            filepath={`${FILES_URL}/${plugin![ctPluginIdx].result.data.file}`}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n","import { Box } from '@material-ui/core'\nimport { ChartData, ChartDataSets, ChartOptions } from 'chart.js'\nimport { makeStylesWithIndex } from 'common/hooks'\nimport { Line } from 'react-chartjs-2'\n\nconst useStyles = makeStylesWithIndex({\n  history: {\n    background: 'rgba(59, 124, 156, 0.3)',\n    height: '100%',\n    overflowY: 'scroll',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  title: {\n    color: '#6EC4D0',\n    background: 'rgba(46, 46, 46, 0.7)',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    fontSize: '14px',\n    lineHeight: '19px',\n    padding: '9px 0px',\n  },\n  parts: {\n    color: 'rgba(255, 255, 255, 0.7)',\n    fontWeight: 500,\n    borderBottom: '0.5px solid #6EC4D0',\n    margin: '16px 19px 6px',\n    paddingBottom: '6px',\n    '& > div': {\n      width: '50%',\n    },\n    '& .left': {\n      textAlign: 'end',\n      marginRight: '40px',\n    },\n  },\n  chartSection: {\n    padding: '10px 0px',\n    margin: '0px 19px',\n    borderBottom: '0.5px solid rgba(110, 196, 208, 0.3)',\n    '& .chart-name': {\n      fontSize: '14px',\n      lineHeight: '19px',\n      color: '#70C4D7',\n      margin: '0px 0px 4px',\n      fontWeight: 500,\n    },\n    '& .chart-sub-name': {\n      fontSize: '12px',\n      lineHeight: '16px',\n      fontWeight: 400,\n      marginBottom: '2px',\n      color: 'rgba(255, 255, 255, 0.7)',\n      '&:not(:first-of-type)': {\n        marginTop: '5px',\n      },\n    },\n    '& .chart-bg': {\n      background: '#2E2E2E',\n      padding: '3px 5px',\n      boxSizing: 'border-box',\n      width: '50%',\n      '&.first': {\n        marginRight: '2px',\n      },\n    },\n  },\n})\n\nconst data: ChartData = {\n  labels: [\n    '2021-03-01T08:00:00Z',\n    '2021-03-03T08:00:00Z',\n    '2021-03-05T09:00:00Z',\n    '2021-03-09T08:00:00Z',\n    '2021-03-12T07:00:00Z',\n    '2021-04-08T08:00:00Z',\n    '2021-04-16T08:00:00Z',\n    '2021-06-12T07:00:00Z',\n    '2021-08-08T08:00:00Z',\n  ],\n  datasets: [\n    {\n      data: [0.5, 0.7, 1, 1.3, 1.5, 2, 1.7, 2.7, 1.6],\n      fill: false,\n      lineTension: 0,\n      pointRadius: 2,\n      hitRadius: 3,\n      showLine: false,\n      backgroundColor: (context: { dataIndex?: number; dataset?: ChartDataSets }) => {\n        var index = context.dataIndex!\n        var value = context.dataset?.data![index]!\n        if (value < 1) {\n          return '#24FF00'\n        } else if (value < 2) {\n          return '#FFB800'\n        }\n        return '#FF0000'\n      },\n    },\n  ],\n}\n\nconst options: ChartOptions = {\n  scales: {\n    yAxes: [\n      {\n        ticks: {\n          beginAtZero: true,\n          fontSize: 6,\n          fontFamily: 'Noto Sans, sans-serif',\n          fontColor: '#FFFFFF',\n        },\n      },\n    ],\n    xAxes: [\n      {\n        ticks: {\n          autoSkip: true,\n          callback: (value) => {\n            const date = new Date(value)\n            return `${date.getMonth() + 1}/${date.getDate()} ${date.getFullYear() - 1911}`\n          },\n          fontSize: 6,\n          fontColor: '#FFFFFF',\n          fontFamily: 'Noto Sans, sans-serif',\n        },\n      },\n    ],\n  },\n  legend: {\n    display: false,\n  },\n  tooltips: {\n    xPadding: 9,\n    yPadding: 5,\n    callbacks: {\n      title: (tooltipItem) => {\n        const date = new Date(tooltipItem[0].xLabel!)\n        return `${date.getFullYear() - 1911}/${date.getMonth() + 1}/${date.getDay()}`\n      },\n      labelTextColor: (tooltipItem) => {\n        const value = parseFloat(tooltipItem.value!)\n        if (value < 1) {\n          return '#24FF00'\n        } else if (value < 2) {\n          return '#FFB800'\n        }\n        return '#FF0000'\n      },\n    },\n    titleFontColor: 'rgba(255, 255, 255, 0.7)',\n    titleFontSize: 12,\n    titleFontFamily: 'Noto Sans, sans-serif',\n    bodyFontStyle: 'bold',\n    bodyFontSize: 14,\n    backgroundColor: 'rgba(59, 123, 156, 0.8)',\n    displayColors: false,\n    borderColor: 'rgba(112, 196, 215, 0.5)',\n    borderWidth: 0.5,\n  },\n}\n\nexport default function History() {\n  const classes = useStyles()\n  return (\n    <div className={classes.history}>\n      <div className={classes.title}>Knee Osteoarthritis History</div>\n\n      <Box display=\"flex\" className={classes.parts}>\n        <div className=\"left\">Left</div>\n        <div>Right</div>\n      </Box>\n\n      <section className={classes.chartSection}>\n        <h6 className=\"chart-name\">KL Grade</h6>\n        <Box display=\"flex\">\n          <div className=\"chart-bg first\">\n            <Line data={data} options={options}></Line>\n          </div>\n          <div className=\"chart-bg\">\n            <Line data={data} options={options}></Line>\n          </div>\n        </Box>\n      </section>\n\n      <section className={classes.chartSection}>\n        <h6 className=\"chart-name\">Joint space width</h6>\n        <div className=\"chart-sub-name\">Standard</div>\n        <Box display=\"flex\">\n          <div className=\"chart-bg first\">\n            <Line data={data} options={options}></Line>\n          </div>\n          <div className=\"chart-bg\">\n            <Line data={data} options={options}></Line>\n          </div>\n        </Box>\n\n        <div className=\"chart-sub-name\">Normalized</div>\n        <Box display=\"flex\">\n          <div className=\"chart-bg first\">\n            <Line data={data} options={options}></Line>\n          </div>\n          <div className=\"chart-bg\">\n            <Line data={data} options={options}></Line>\n          </div>\n        </Box>\n      </section>\n    </div>\n  )\n}\n","import { DraggableItem } from 'common/types'\nimport React from 'react'\n\nexport type ItemContextType = {\n  allItems: DraggableItem[]\n}\n\nexport const ItemContext = React.createContext<ItemContextType>({\n  allItems: [],\n})\n","import { Box, Dialog, Grid } from '@material-ui/core'\nimport { OAResult } from 'common/types'\nimport { FILES_URL } from 'common/utils'\nimport { ItemContext } from 'PatientDetail/hooks'\nimport { useSummaryStyles } from 'PatientDetail/styles'\nimport { useCallback, useContext, useMemo, useRef, useState } from 'react'\n\nfunction gradeColor(grade: number) {\n  if (grade < 1) {\n    return '#FFFFFF'\n  } else if (grade < 2) {\n    return '#FFB800'\n  }\n  return '#FF0000'\n}\n\n// imgPath: \"R.js.filepath\"\n// We need to return data.R.js.filepath\nfunction parseImageFilepath(data: OAResult, imgPath: string) {\n  let filepath = data\n  imgPath.split('.').forEach((path) => {\n    filepath = (filepath as any)[path]\n  })\n\n  return filepath\n}\n\nconst Detected: React.FC<{ detected: boolean }> = ({ detected }) => (\n  <span className={detected ? 'highlight' : ''}>{detected ? 'Detected' : 'No'}</span>\n)\n\nconst Image: React.FC<{\n  imgPath: string\n  alt: string\n  data: OAResult\n  onClick: (img: string) => void\n}> = ({ imgPath, alt, data, onClick }) => {\n  return (\n    <img\n      style={{ cursor: 'pointer' }}\n      src={`${FILES_URL}/${parseImageFilepath(data, imgPath)}`}\n      alt={alt}\n      onClick={() => onClick(imgPath)}\n    />\n  )\n}\n\nconst CustomGrid: React.FC<{ className: string; rightKnee: any; label: any; leftKnee: any }> = ({\n  className,\n  rightKnee,\n  label,\n  leftKnee,\n}) => (\n  <Grid container={true} alignItems=\"center\" className={className}>\n    <Grid className=\"left\" item={true} xs container={true} justify=\"flex-end\">\n      {rightKnee}\n    </Grid>\n    <Grid className=\"label\" item={true} xs={3} container={true} justify=\"center\">\n      {label}\n    </Grid>\n    <Grid className=\"right\" item={true} xs container={true} justify=\"space-between\">\n      {leftKnee}\n    </Grid>\n  </Grid>\n)\n\nconst HistoryDots: React.FC<{\n  oaHistories: { id: string; data: OAResult }[]\n  currentResultIdx: number\n  onSwitchHistory: (idx: number) => void\n  className: string\n}> = (props) => {\n  return (\n    <div className={props.className}>\n      {props.oaHistories.map((_, idx) => {\n        const isActive = props.currentResultIdx === idx\n        return (\n          <span\n            key={idx}\n            className={`dot ${isActive ? 'active' : ''}`}\n            onClick={() => props.onSwitchHistory(idx)}\n          ></span>\n        )\n      })}\n    </div>\n  )\n}\n\ninterface Props {\n  defaultId: string\n  withThumbnail: boolean\n}\n\nexport default function OASummary(props: Props) {\n  const { defaultId, withThumbnail } = props\n  const classes = useSummaryStyles({ withThumbnail })\n  const [currentImgPath, setCurrentImgPath] = useState<string | null>(null)\n\n  const { allItems } = useContext(ItemContext)\n  const oaHistories = useMemo<{ id: string; data: OAResult }[]>(\n    () =>\n      allItems\n        .filter(({ func }) => func === 'oa')\n        .map((item) => ({ id: item.id, data: item.data as OAResult })),\n    [allItems]\n  )\n  const [currentResultIdx, setResultIdx] = useState<number>(\n    oaHistories.findIndex(({ id }) => id === defaultId)\n  )\n  const previousResultIdx = useRef<number>(0)\n\n  const onOpenImageDialog = useCallback(\n    (imgPath: string) => {\n      previousResultIdx.current = currentResultIdx\n      setCurrentImgPath(imgPath)\n    },\n    [currentResultIdx]\n  )\n\n  const customGridClasses = `${classes.customGrid} ${withThumbnail ? '' : 'small'}`\n  const { L, R } = oaHistories[currentResultIdx].data\n\n  return (\n    <div className={classes.summary} style={{ height: withThumbnail ? '90%' : '100%' }}>\n      <div className={classes.title}>Knee Osteoarthritis AI Labeling Summary</div>\n\n      <HistoryDots\n        className={classes.historyDots}\n        oaHistories={oaHistories}\n        currentResultIdx={currentResultIdx}\n        onSwitchHistory={setResultIdx}\n      />\n\n      <section className={classes.section}>\n        <CustomGrid\n          className={`${customGridClasses} ${classes.direction}`}\n          rightKnee=\"Right\"\n          label=\"\"\n          leftKnee=\"Left\"\n        />\n\n        {/* KL Grade */}\n        <CustomGrid\n          className={`${customGridClasses} ${classes.klGrade}`}\n          rightKnee={\n            <span\n              style={{\n                fontSize: '30px',\n                lineHeight: '40.8px',\n                color: gradeColor(R.klGrade.KL_GRADE),\n              }}\n            >\n              {R.klGrade.KL_GRADE}\n            </span>\n          }\n          label={<span style={{ fontSize: '24px', lineHeight: '30.7px' }}>KL Grade</span>}\n          leftKnee={\n            <span\n              style={{\n                fontSize: '30px',\n                lineHeight: '40.8px',\n                color: gradeColor(L.klGrade.KL_GRADE),\n              }}\n            >\n              {L.klGrade.KL_GRADE}\n            </span>\n          }\n        />\n\n        {/* Joint space width */}\n        <div\n          style={{\n            fontSize: '20px',\n            lineHeight: '27px',\n            marginBottom: '30px',\n            textAlign: 'center',\n          }}\n        >\n          <span\n            style={{\n              fontSize: '30px',\n              lineHeight: '40.8px',\n              color: gradeColor(Math.max(R.js.medJSN, R.js.latJSN)),\n            }}\n          >\n            {Math.max(R.js.medJSN, R.js.latJSN)}\n          </span>\n          <span\n            style={{\n              display: 'inline-block',\n              minWidth: '25%',\n              margin: '0px 6%',\n            }}\n          >\n            Joint Space Narrowing\n          </span>\n          <span\n            style={{\n              fontSize: '30px',\n              lineHeight: '40.8px',\n              color: gradeColor(Math.max(L.js.medJSN, L.js.latJSN)),\n            }}\n          >\n            {Math.max(L.js.medJSN, L.js.latJSN)}\n          </span>\n        </div>\n        <CustomGrid\n          className={`${customGridClasses} ${classes.resultRow}`}\n          rightKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" flex=\"1\">\n              {withThumbnail && (\n                <Image\n                  imgPath=\"R.js.filepath\"\n                  alt=\"JSN\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n              <Box display=\"flex\" justifyContent=\"space-between\" flexDirection=\"column\">\n                <div>{R.js.mJSW}mm</div>\n                <div>{R.js.std_mJSW}mm</div>\n              </Box>\n            </Box>\n          }\n          label={\n            <Box display=\"flex\" justifyContent=\"space-between\" flexDirection=\"column\" height=\"100%\">\n              <div className=\"gray\">Joint Space Width</div>\n              <div className=\"gray\">Standardized Joint Space Width</div>\n            </Box>\n          }\n          leftKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" flex=\"1\">\n              <Box display=\"flex\" justifyContent=\"space-between\" flexDirection=\"column\">\n                <div>{L.js.mJSW}mm</div>\n                <div>{L.js.std_mJSW}mm</div>\n              </Box>\n              {withThumbnail && (\n                <Image\n                  imgPath=\"L.js.filepath\"\n                  alt=\"JSN\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n            </Box>\n          }\n        />\n\n        {/* Osteophyte */}\n        <CustomGrid\n          className={`${customGridClasses} ${classes.resultRow}`}\n          rightKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              {withThumbnail && (\n                <Image\n                  imgPath=\"R.osteophyte.filepath\"\n                  alt=\"OP\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n              <Detected detected={R.osteophyte.detected} />\n            </Box>\n          }\n          label=\"Osteophyte\"\n          leftKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              <Detected detected={L.osteophyte.detected} />\n              {withThumbnail && (\n                <Image\n                  imgPath=\"L.osteophyte.filepath\"\n                  alt=\"OP\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n            </Box>\n          }\n        />\n\n        {/* Sclerosis */}\n        <CustomGrid\n          className={`${customGridClasses} ${classes.resultRow}`}\n          rightKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              {withThumbnail && (\n                <Image\n                  imgPath=\"R.sclerosis.filepath\"\n                  alt=\"SC\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n              <Detected detected={R.sclerosis.detected} />\n            </Box>\n          }\n          label=\"Sclerosis\"\n          leftKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              <Detected detected={L.sclerosis.detected} />\n              {withThumbnail && (\n                <Image\n                  imgPath=\"R.sclerosis.filepath\"\n                  alt=\"SC\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n            </Box>\n          }\n        />\n\n        {/* Alignment */}\n        <CustomGrid\n          className={`${customGridClasses} ${classes.resultRow}`}\n          rightKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              {withThumbnail && (\n                <Image\n                  imgPath=\"R.alignment.filepath\"\n                  alt=\"Alignment\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n              <span>{R.alignment.FTA} °</span>\n            </Box>\n          }\n          label=\"Alignment\"\n          leftKnee={\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flex=\"1\">\n              <span>{L.alignment.FTA} °</span>\n              {withThumbnail && (\n                <Image\n                  imgPath=\"L.alignment.filepath\"\n                  alt=\"Alignment\"\n                  data={oaHistories[currentResultIdx].data}\n                  onClick={onOpenImageDialog}\n                />\n              )}\n            </Box>\n          }\n        />\n      </section>\n\n      {currentImgPath && (\n        <Dialog\n          open={true}\n          onClose={() => {\n            // Switch back to the original result because we should not\n            // change the oa result page after the dialog is closed\n            setResultIdx(previousResultIdx.current)\n            setCurrentImgPath(null)\n          }}\n          maxWidth=\"md\"\n          classes={{ paper: classes.dialog }}\n        >\n          <HistoryDots\n            className={classes.historyDots}\n            oaHistories={oaHistories}\n            currentResultIdx={currentResultIdx}\n            onSwitchHistory={setResultIdx}\n          />\n          <img\n            src={`${FILES_URL}/${parseImageFilepath(\n              oaHistories[currentResultIdx].data,\n              currentImgPath\n            )}`}\n            alt=\"img\"\n          />\n        </Dialog>\n      )}\n    </div>\n  )\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M25.9997 17.0141H12.8297L15.7097 14.1317C16.0997 13.7414 16.0997 13.1108 15.7097 12.7205C15.3197 12.3302 14.6897 12.3302 14.2997 12.7205L9.70974 17.3144C9.31974 17.7047 9.31974 18.3353 9.70974 18.7256L14.2997 23.3195C14.6897 23.7098 15.3197 23.7098 15.7097 23.3195C16.0997 22.9292 16.0997 22.2986 15.7097 21.9083L12.8297 19.0158H25.9997C26.5497 19.0158 26.9997 18.5655 26.9997 18.015C26.9997 17.4645 26.5497 17.0141 25.9997 17.0141Z\",\n  fill: \"white\"\n});\n\nfunction SvgBackspace(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 36,\n    height: 37,\n    viewBox: \"0 0 36 37\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBackspace);\nexport default __webpack_public_path__ + \"static/media/backspace.b025da71.svg\";\nexport { ForwardRef as ReactComponent };","import { Grid, GridSize } from '@material-ui/core'\nimport { useDrop } from 'react-dnd'\nimport ImageViewer from './ImageViewer'\nimport ThreeDViewer from './ThreeDViewer'\nimport History from './History'\nimport { useCallback, useEffect } from 'react'\nimport { GRIDS, Layout } from 'common/utils'\nimport OASummary from './OASummary'\nimport { DraggableItem } from 'common/types'\nimport { useLayoutPanelStyles } from 'PatientDetail/styles'\nimport { ReactComponent as BackspaceIcon } from 'assets/icon/backspace.svg'\n\nconst GRID_SIZE: Record<Layout, GridSize> = {\n  '1x1': 12,\n  '1x2': 6,\n  '2x1': 12,\n  '2x2': 6,\n  'pa/pa': 6,\n  'pa/lat': 6,\n}\n\nconst LayoutItem: React.FC<{\n  dragIdx: number\n  itemId: string\n  children: React.ReactElement\n  isFocused: boolean\n  onDropItem: (item: DraggableItem, targetIdx: number) => void\n}> = (props) => {\n  const classes = useLayoutPanelStyles()\n  const [{ isOver, canDrop }, drop] = useDrop(\n    () => ({\n      accept: 'box',\n      drop: (item: DraggableItem) => {\n        props.onDropItem(item, props.dragIdx)\n        // return previous item id to notify which item is deactivated\n        return { previousItemId: props.itemId }\n      },\n      collect: (monitor: any) => ({\n        isOver: monitor.isOver(),\n        canDrop: monitor.canDrop(),\n      }),\n    }),\n    []\n  )\n\n  const opacity = isOver && canDrop ? 0.4 : 1\n  const border = canDrop ? '1px solid #6EC4D0' : 'unset'\n\n  return (\n    <div ref={drop} className={classes.item} style={{ opacity, border }}>\n      {props.children}\n      {\n        // Element without focus should be overlaid by a transparent div to block mouse event\n        !props.isFocused && <div className={classes.overlap} />\n      }\n    </div>\n  )\n}\n\ninterface Props {\n  layout: Layout\n  items: DraggableItem[]\n  focusedIdx: number\n  changeLayout: (layout: Layout) => void\n  backFromFullscreen: () => void\n  focusItem: (targetIdx: number) => void\n  switchTargetItem: (item: DraggableItem, targetIdx: number) => void\n}\n\nexport default function LayoutPanel(props: Props) {\n  const {\n    layout,\n    items,\n    focusedIdx,\n    changeLayout,\n    backFromFullscreen,\n    focusItem,\n    switchTargetItem,\n  } = props\n  const classes = useLayoutPanelStyles()\n\n  useEffect(() => {\n    // Trigger a resize event to re-render 2D & 3D viewer\n    window.dispatchEvent(new Event('resize'))\n  }, [layout])\n\n  const onDoubleClickItem = useCallback(\n    (idx: number) => {\n      focusItem(idx)\n      if (layout === '1x1') {\n        backFromFullscreen()\n      } else {\n        changeLayout('1x1')\n      }\n    },\n    [focusItem, changeLayout, backFromFullscreen, layout]\n  )\n\n  function renderContent(item: DraggableItem, isFocused: boolean) {\n    if (!item) {\n      return <>N/A</>\n    }\n    switch (item.func) {\n      case 'dicom':\n        const pluginType = item.pluginType\n        const enableFleshRemoval = pluginType === 'fleshRemoval'\n        const enableCT = pluginType === 'ct'\n        return (\n          <ImageViewer\n            id={`xray-${item.id}`}\n            filepath={item.file}\n            plugin={item.plugin}\n            isFocused={isFocused}\n            enableFleshRemoval={enableFleshRemoval}\n            enableCT={enableCT}\n          />\n        )\n      case 'hanging-protocol':\n        return (\n          <ImageViewer\n            id={`hanging-protocol-${item.id}`}\n            filepath={item.file}\n            plugin={item.plugin}\n            isFocused={isFocused}\n            enableFleshRemoval={false}\n            enableCT={false}\n          />\n        )\n      case '3d':\n        return <ThreeDViewer id={`3d-${item.id}`} filepath={item.file} />\n      case 'history':\n        return <History />\n      case 'oa':\n        const withThumbnail = layout === '1x1' || layout === '2x1'\n        return <OASummary defaultId={item.id} withThumbnail={withThumbnail} />\n      default:\n        return <>N/A</>\n    }\n  }\n\n  const gridHeight = layout === '2x1' || layout === '2x2' ? '50%' : '100%'\n  const isFullscreenMode = layout === '1x1'\n  return (\n    <Grid container className={classes.layoutPanel}>\n      {layout === '1x1' && (\n        <BackspaceIcon className={classes.backspace} onClick={backFromFullscreen} />\n      )}\n      {items.map((item, idx) => {\n        const isFocused = focusedIdx === idx\n        const isVisible =\n          (idx < GRIDS[layout] && !isFullscreenMode) || (isFullscreenMode && isFocused)\n        const key = `${item?.id}-${idx}`\n        if (isVisible) {\n          return (\n            <Grid\n              key={key} //use func+id+idx as key to avoid re-render when the layout is changed\n              item={true}\n              xs={GRID_SIZE[layout]}\n              style={{ height: gridHeight }}\n              onClick={() => focusItem(idx)}\n              onDoubleClick={() => onDoubleClickItem(idx)}\n            >\n              <LayoutItem\n                dragIdx={idx}\n                itemId={item?.id}\n                isFocused={isFocused}\n                onDropItem={switchTargetItem}\n              >\n                {renderContent(item, isFocused)}\n              </LayoutItem>\n            </Grid>\n          )\n        }\n\n        // All the invisible items \"should not\" be unmounted.\n        // Alternatively, we put it out of screen\n        return (\n          <Grid\n            key={key}\n            item={true}\n            xs={GRID_SIZE[layout]}\n            style={{ position: 'absolute', top: '0px', right: '100%' }}\n          >\n            <LayoutItem\n              dragIdx={idx}\n              itemId={key}\n              isFocused={isFocused}\n              onDropItem={switchTargetItem}\n            >\n              {renderContent(item, isFocused)}\n            </LayoutItem>\n          </Grid>\n        )\n      })}\n    </Grid>\n  )\n}\n","import { Theme } from '@material-ui/core'\nimport { makeStylesWithIndex } from 'common/hooks'\n\ntype IconType = 'primary' | 'secondary' | 'plugin'\n\ninterface Props {\n  icon: React.ReactElement\n  text: string\n  onClick?: (event: any) => void\n  type: IconType\n  active?: boolean\n  disabled?: boolean\n}\n\nconst TYPE_COLOR_MAP: Record<IconType, string> = {\n  primary: '#71C2D9',\n  secondary: 'rgba(255, 255, 255, 0.7)',\n  plugin: '#F26A65',\n}\n\nconst TYPE_BACKGROUND_MAP: Record<IconType, string> = {\n  primary: 'rgba(116, 194, 216, 0.7)',\n  secondary: 'rgba(116, 194, 216, 0.7)',\n  plugin: '#F26A65',\n}\n\nconst useStyles = makeStylesWithIndex<\n  Theme,\n  { type: IconType; active?: boolean; disabled?: boolean }\n>({\n  iconText: {\n    pointerEvents: (props) => (props.disabled ? 'none' : 'unset'),\n    opacity: (props) => (props.disabled ? 0.5 : 1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '73px',\n    width: '57px',\n    boxSizing: 'border-box',\n    minWidth: '50px',\n    textAlign: 'center',\n    background: (props) => (props.active ? TYPE_BACKGROUND_MAP[props.type] : 'inherit'),\n    color: (props) => (props.active ? '#FFFFFF' : TYPE_COLOR_MAP[props.type]),\n    fill: (props) => (props.active ? '#FFFFFF' : TYPE_COLOR_MAP[props.type]),\n    '&:hover': {\n      background: (props) => TYPE_BACKGROUND_MAP[props.type],\n      color: '#FFFFFF',\n      cursor: 'pointer',\n      fill: '#FFFFFF',\n    },\n  },\n  svg: {\n    marginBottom: '5px',\n  },\n  text: {\n    fontSize: '12px',\n    lineHeight: '15px',\n    height: '30px',\n    transform: 'scale(0.916)', // 12px -> 11px\n    whiteSpace: 'pre-line',\n  },\n})\n\nexport default function IconText({ icon, text, onClick, type, active, disabled }: Props) {\n  const classes = useStyles({ type, active, disabled })\n\n  return (\n    <div className={classes.iconText} onClick={onClick}>\n      <span className={classes.svg}>{icon}</span>\n      <div className={classes.text}>{text}</div>\n    </div>\n  )\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.79 16.29C11.18 16.68 11.81 16.68 12.2 16.29L15.79 12.7C16.18 12.31 16.18 11.68 15.79 11.29L12.2 7.7C11.81 7.31 11.18 7.31 10.79 7.7C10.4 8.09 10.4 8.72 10.79 9.11L12.67 11H4C3.45 11 3 11.45 3 12C3 12.55 3.45 13 4 13H12.67L10.79 14.88C10.4 15.27 10.41 15.91 10.79 16.29ZM19 3H5C3.89 3 3 3.9 3 5V8C3 8.55 3.45 9 4 9C4.55 9 5 8.55 5 8V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19H6C5.45 19 5 18.55 5 18V16C5 15.45 4.55 15 4 15C3.45 15 3 15.45 3 16V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z\"\n});\n\nfunction SvgImport(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgImport);\nexport default __webpack_public_path__ + \"static/media/import.00a81f8e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 11H9C10.1 11 11 10.1 11 9V5C11 3.9 10.1 3 9 3H5C3.9 3 3 3.9 3 5V9C3 10.1 3.9 11 5 11Z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 21H9C10.1 21 11 20.1 11 19V15C11 13.9 10.1 13 9 13H5C3.9 13 3 13.9 3 15V19C3 20.1 3.9 21 5 21Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 5V9C13 10.1 13.9 11 15 11H19C20.1 11 21 10.1 21 9V5C21 3.9 20.1 3 19 3H15C13.9 3 13 3.9 13 5Z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15 21H19C20.1 21 21 20.1 21 19V15C21 13.9 20.1 13 19 13H15C13.9 13 13 13.9 13 15V19C13 20.1 13.9 21 15 21Z\"\n});\n\nfunction SvgLayout(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayout);\nexport default __webpack_public_path__ + \"static/media/layout.8b160cd7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.8 18.5L9.79999 15.1H5.49999L4.49999 18.5H1.89999L6.19999 5.60001H9.09999L13.4 18.5H10.8ZM9.29999 13.1L8.29999 9.80001C8.19999 9.50001 8.09999 9.10001 7.89999 8.70001C7.69999 8.30001 7.69999 7.80001 7.69999 7.40001C7.59999 7.90001 7.49999 8.30001 7.39999 8.70001C7.29999 9.10001 7.19999 9.50001 7.09999 9.80001L6.09999 13.1H9.29999Z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21.2 18.5H15.9V17.2L17.4 16.6V7.50001L15.9 6.90001V5.60001H21.2V6.90001L19.7 7.50001V16.6L21.2 17.2V18.5Z\"\n});\n\nfunction SvgAi(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAi);\nexport default __webpack_public_path__ + \"static/media/ai.202b021a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 8.49999C10 9.39999 9.8 10.1 9.3 10.6C8.8 11.1 8.2 11.5 7.4 11.7V11.8C8.4 11.9 9.1 12.3 9.6 12.8C10.1 13.3 10.3 14 10.3 14.8C10.3 15.5 10.1 16.2 9.8 16.8C9.5 17.4 8.9 17.9 8.2 18.2C7.5 18.5 6.6 18.7 5.5 18.7C4.2 18.7 3 18.5 2 18V16C2.5 16.3 3.1 16.5 3.6 16.6C4.2 16.7 4.7 16.8 5.2 16.8C6.1 16.8 6.8 16.6 7.2 16.2C7.6 15.8 7.8 15.3 7.8 14.6C7.8 14 7.6 13.5 7.1 13.2C6.6 12.9 5.9 12.7 4.8 12.7H3.9V10.9H4.9C5.9 10.9 6.6 10.7 7 10.3C7.4 9.99999 7.6 9.49999 7.6 8.89999C7.6 8.39999 7.4 7.99999 7.1 7.69999C6.8 7.39999 6.4 7.29999 5.8 7.29999C5.2 7.29999 4.7 7.39999 4.2 7.59999C3.8 7.79999 3.4 7.99999 3.1 8.29999L2.1 6.69999C2.6 6.29999 3.1 5.99999 3.8 5.79999C4.5 5.59999 5.1 5.39999 6 5.39999C7.2 5.39999 8.2 5.69999 8.9 6.19999C9.6 6.79999 10 7.59999 10 8.49999Z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21.7 11.9C21.7 14.1 21.1 15.7 20 16.8C18.9 17.9 17.3 18.4 15.3 18.4H11.8V5.60001H15.7C17.6 5.60001 19.1 6.10001 20.2 7.20001C21.1 8.30001 21.7 9.80001 21.7 11.9ZM19.1 12C19.1 10.5 18.8 9.30001 18.2 8.60001C17.6 7.90001 16.7 7.50001 15.5 7.50001H14.1V16.5H15.3C16.6 16.5 17.6 16.1 18.2 15.4C18.8 14.6 19.1 13.5 19.1 12Z\"\n});\n\nfunction Svg3D(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(Svg3D);\nexport default __webpack_public_path__ + \"static/media/3d.6cd91b49.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8 17C7.45 17 7 16.55 7 16V11C7 10.45 7.45 10 8 10C8.55 10 9 10.45 9 11V16C9 16.55 8.55 17 8 17ZM12 17C11.45 17 11 16.55 11 16V8C11 7.45 11.45 7 12 7C12.55 7 13 7.45 13 8V16C13 16.55 12.55 17 12 17ZM16 17C15.45 17 15 16.55 15 16V14C15 13.45 15.45 13 16 13C16.55 13 17 13.45 17 14V16C17 16.55 16.55 17 16 17ZM18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z\"\n});\n\nfunction SvgAnalytics(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAnalytics);\nexport default __webpack_public_path__ + \"static/media/analytics.0240ca9e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 8C13.1 8 14 7.1 14 6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6C10 7.1 10.9 8 12 8ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM12 16C10.9 16 10 16.9 10 18C10 19.1 10.9 20 12 20C13.1 20 14 19.1 14 18C14 16.9 13.1 16 12 16Z\"\n});\n\nfunction SvgMore(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMore);\nexport default __webpack_public_path__ + \"static/media/more.0da29152.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"mask\", {\n  id: \"path-1-inside-1\",\n  fill: \"white\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.1001 15.8H4.1001V16.8H5.1001V15.8Z\"\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.1001 15.8H4.1001V16.8H5.1001V15.8Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.1001 15.8V14.8H3.1001V15.8H4.1001ZM5.1001 15.8H6.1001V14.8H5.1001V15.8ZM5.1001 16.8V17.8H6.1001V16.8H5.1001ZM4.1001 16.8H3.1001V17.8H4.1001V16.8ZM4.1001 16.8H5.1001V14.8H4.1001V16.8ZM4.1001 15.8V16.8H6.1001V15.8H4.1001ZM5.1001 15.8H4.1001V17.8H5.1001V15.8ZM5.1001 16.8V15.8H3.1001V16.8H5.1001Z\",\n  mask: \"url(#path-1-inside-1)\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"mask\", {\n  id: \"path-3-inside-2\",\n  fill: \"white\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.1001 15.8H6.1001V16.8H7.1001V15.8Z\"\n}));\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.1001 15.8V14.8H5.1001V15.8H6.1001ZM7.1001 15.8H8.1001V14.8H7.1001V15.8ZM7.1001 16.8V17.8H8.1001V16.8H7.1001ZM6.1001 16.8H5.1001V17.8H6.1001V16.8ZM6.1001 16.8H7.1001V14.8H6.1001V16.8ZM6.1001 15.8V16.8H8.1001V15.8H6.1001ZM7.1001 15.8H6.1001V17.8H7.1001V15.8ZM7.1001 16.8V15.8H5.1001V16.8H7.1001Z\",\n  mask: \"url(#path-3-inside-2)\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.1001 15.8H8.1001V16.8H9.1001V15.8Z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1001 15.8H13.1001V16.8H14.1001V15.8Z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.1001 15.8H15.1001V16.8H16.1001V15.8Z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.1001 15.8H16.1001V16.8H17.1001V15.8Z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.1001 15.8H18.1001V16.8H19.1001V15.8Z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20.1001 15.8H19.1001V16.8H20.1001V15.8Z\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.1001 16.8H5.1001V17.8H6.1001V16.8Z\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.1001 16.8H8.1001V17.8H9.1001V16.8Z\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.1001 16.8H9.1001V17.8H10.1001V16.8Z\"\n});\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.1001 16.8H10.1001V17.8H11.1001V16.8Z\"\n});\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.1001 16.8H12.1001V17.8H13.1001V16.8Z\"\n});\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.1001 16.8H15.1001V17.8H16.1001V16.8Z\"\n});\n\nvar _ref19 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.1001 17.8H4.1001V18.8H5.1001V17.8Z\"\n});\n\nvar _ref20 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.1001 17.8H6.1001V18.8H7.1001V17.8Z\"\n});\n\nvar _ref21 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.1001 17.8H7.1001V18.8H8.1001V17.8Z\"\n});\n\nvar _ref22 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.1001 17.8H9.1001V18.8H10.1001V17.8Z\"\n});\n\nvar _ref23 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.1001 17.8H10.1001V18.8H11.1001V17.8Z\"\n});\n\nvar _ref24 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.1001 17.8H12.1001V18.8H13.1001V17.8Z\"\n});\n\nvar _ref25 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1001 17.8H13.1001V18.8H14.1001V17.8Z\"\n});\n\nvar _ref26 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.1001 17.8H16.1001V18.8H17.1001V17.8Z\"\n});\n\nvar _ref27 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.1001 17.8H17.1001V18.8H18.1001V17.8Z\"\n});\n\nvar _ref28 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20.1001 17.8H19.1001V18.8H20.1001V17.8Z\"\n});\n\nvar _ref29 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.1001 18.8H6.1001V19.8H7.1001V18.8Z\"\n});\n\nvar _ref30 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.1001 18.8H9.1001V19.8H10.1001V18.8Z\"\n});\n\nvar _ref31 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.1001 18.8H11.1001V19.8H12.1001V18.8Z\"\n});\n\nvar _ref32 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.1001 18.8H12.1001V19.8H13.1001V18.8Z\"\n});\n\nvar _ref33 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1001 18.8H14.1001V19.8H15.1001V18.8Z\"\n});\n\nvar _ref34 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.1001 18.8H16.1001V19.8H17.1001V18.8Z\"\n});\n\nvar _ref35 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.1001 12.8H5.1001V13.8H6.1001V12.8Z\"\n});\n\nvar _ref36 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.1001 12.8H7.1001V13.8H8.1001V12.8Z\"\n});\n\nvar _ref37 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.1001 12.8H9.1001V13.8H10.1001V12.8Z\"\n});\n\nvar _ref38 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.1001 12.8H12.1001V13.8H13.1001V12.8Z\"\n});\n\nvar _ref39 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1001 12.8H14.1001V13.8H15.1001V12.8Z\"\n});\n\nvar _ref40 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.1001 12.8H17.1001V13.8H18.1001V12.8Z\"\n});\n\nvar _ref41 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.1001 12.8H18.1001V13.8H19.1001V12.8Z\"\n});\n\nvar _ref42 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.1001 13.8H6.1001V14.8H7.1001V13.8Z\"\n});\n\nvar _ref43 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.1001 13.8H7.1001V14.8H8.1001V13.8Z\"\n});\n\nvar _ref44 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.1001 13.8H8.1001V14.8H9.1001V13.8Z\"\n});\n\nvar _ref45 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.1001 13.8H10.1001V14.8H11.1001V13.8Z\"\n});\n\nvar _ref46 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.1001 13.8H11.1001V14.8H12.1001V13.8Z\"\n});\n\nvar _ref47 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1001 13.8H14.1001V14.8H15.1001V13.8Z\"\n});\n\nvar _ref48 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.1001 13.8H16.1001V14.8H17.1001V13.8Z\"\n});\n\nvar _ref49 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.1001 13.8H17.1001V14.8H18.1001V13.8Z\"\n});\n\nvar _ref50 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.1001 13.8H4.1001V14.8H5.1001V13.8Z\"\n});\n\nvar _ref51 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.1001 14.8H5.1001V15.8H6.1001V14.8Z\"\n});\n\nvar _ref52 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.1001 14.8H10.1001V15.8H11.1001V14.8Z\"\n});\n\nvar _ref53 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.1001 14.8H12.1001V15.8H13.1001V14.8Z\"\n});\n\nvar _ref54 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1001 14.8H13.1001V15.8H14.1001V14.8Z\"\n});\n\nvar _ref55 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.1001 14.8H16.1001V15.8H17.1001V14.8Z\"\n});\n\nvar _ref56 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20.1001 13.8H19.1001V14.8H20.1001V13.8Z\"\n});\n\nvar _ref57 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1001 7.80005H13.1001V8.80005H14.1001V7.80005Z\"\n});\n\nvar _ref58 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.1001 8.80005H8.1001V9.80005H9.1001V8.80005Z\"\n});\n\nvar _ref59 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.1001 8.80005H15.1001V9.80005H16.1001V8.80005Z\"\n});\n\nvar _ref60 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.1001 4.80005H8.1001V5.80005H9.1001V4.80005Z\"\n});\n\nvar _ref61 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1001 5.80005H14.1001V6.80005H15.1001V5.80005Z\"\n});\n\nvar _ref62 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.1001 6.80005H10.1001V7.80005H11.1001V6.80005Z\"\n});\n\nvar _ref63 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.1001 6.80005H5.1001V7.80005H6.1001V6.80005Z\"\n});\n\nvar _ref64 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.1001 6.80005H18.1001V7.80005H19.1001V6.80005Z\"\n});\n\nvar _ref65 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.1001 13.8V17.8C19.1001 18.3 18.6001 18.8 18.1001 18.8H6.1001C5.5001 18.8 5.1001 18.3 5.1001 17.8V13.8C5.1001 13.3 4.7001 12.8 4.1001 12.8C3.5001 12.8 3.1001 13.3 3.1001 13.8V18.8C3.1001 19.9 4.0001 20.8 5.1001 20.8H19.1001C20.2001 20.8 21.1001 19.9 21.1001 18.8V13.8C21.1001 13.3 20.6001 12.8 20.1001 12.8C19.6001 12.8 19.1001 13.3 19.1001 13.8Z\"\n});\n\nvar _ref66 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20.1001 10.8C20.6001 10.8 21.1001 10.4 21.1001 9.80005V4.80005C21.1001 3.70005 20.2001 2.80005 19.1001 2.80005H5.1001C4.0001 2.80005 3.1001 3.70005 3.1001 4.80005V9.80005C3.1001 10.4 3.5001 10.8 4.1001 10.8C4.7001 10.8 5.1001 10.4 5.1001 9.80005V5.80005C5.1001 5.30005 5.5001 4.80005 6.1001 4.80005H18.1001C18.6001 4.80005 19.1001 5.30005 19.1001 5.80005V9.80005C19.1001 10.4 19.6001 10.8 20.1001 10.8Z\"\n});\n\nvar _ref67 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1.2998 12.8C1.2998 13.3 1.6998 13.8 2.2998 13.8H21.5998C22.0998 13.8 22.5998 13.3 22.5998 12.8C22.5998 12.3 22.0998 11.8 21.5998 11.8H2.2998C1.6998 11.8 1.2998 12.3 1.2998 12.8Z\"\n});\n\nfunction SvgFleshremoval(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29, _ref30, _ref31, _ref32, _ref33, _ref34, _ref35, _ref36, _ref37, _ref38, _ref39, _ref40, _ref41, _ref42, _ref43, _ref44, _ref45, _ref46, _ref47, _ref48, _ref49, _ref50, _ref51, _ref52, _ref53, _ref54, _ref55, _ref56, _ref57, _ref58, _ref59, _ref60, _ref61, _ref62, _ref63, _ref64, _ref65, _ref66, _ref67);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFleshremoval);\nexport default __webpack_public_path__ + \"static/media/fleshremoval.cda50d28.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19Z\",\n  fill: \"white\"\n});\n\nfunction SvgLayout1X1(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayout1X1);\nexport default __webpack_public_path__ + \"static/media/layout_1x1.3deca06a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11 19V5C11 3.9 10.1 3 9 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H9C10.1 21 11 20.1 11 19Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 19V5C21 3.9 20.1 3 19 3H15C13.9 3 13 3.9 13 5V19C13 20.1 13.9 21 15 21H19C20.1 21 21 20.1 21 19Z\",\n  fill: \"white\"\n});\n\nfunction SvgLayout1X2(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayout1X2);\nexport default __webpack_public_path__ + \"static/media/layout_1x2.cb530a5e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 11H19C20.1 11 21 10.1 21 9V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V9C3 10.1 3.9 11 5 11Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 21H19C20.1 21 21 20.1 21 19V15C21 13.9 20.1 13 19 13H5C3.9 13 3 13.9 3 15V19C3 20.1 3.9 21 5 21Z\",\n  fill: \"white\"\n});\n\nfunction SvgLayout2X1(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayout2X1);\nexport default __webpack_public_path__ + \"static/media/layout_2x1.cc164aa2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 11H9C10.1 11 11 10.1 11 9V5C11 3.9 10.1 3 9 3H5C3.9 3 3 3.9 3 5V9C3 10.1 3.9 11 5 11Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 21H9C10.1 21 11 20.1 11 19V15C11 13.9 10.1 13 9 13H5C3.9 13 3 13.9 3 15V19C3 20.1 3.9 21 5 21Z\",\n  fill: \"white\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 5V9C13 10.1 13.9 11 15 11H19C20.1 11 21 10.1 21 9V5C21 3.9 20.1 3 19 3H15C13.9 3 13 3.9 13 5Z\",\n  fill: \"white\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15 21H19C20.1 21 21 20.1 21 19V15C21 13.9 20.1 13 19 13H15C13.9 13 13 13.9 13 15V19C13 20.1 13.9 21 15 21Z\",\n  fill: \"white\"\n});\n\nfunction SvgLayout2X2(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayout2X2);\nexport default __webpack_public_path__ + \"static/media/layout_2x2.e1c0140d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 15.3099L21.9 13.4099C22.68 12.6299 22.68 11.3599 21.9 10.5799L20 8.68989V5.99989C20 4.89989 19.1 3.99989 18 3.99989H15.31L13.41 2.09989C12.63 1.31989 11.36 1.31989 10.58 2.09989L8.69001 3.99989H6.00001C4.90001 3.99989 4.00001 4.89989 4.00001 5.99989V8.68989L2.10001 10.5899C1.32001 11.3699 1.32001 12.6399 2.10001 13.4199L4.00001 15.3199V17.9999C4.00001 19.0999 4.90001 19.9999 6.00001 19.9999H8.69001L10.59 21.8999C11.37 22.6799 12.64 22.6799 13.42 21.8999L15.32 19.9999H18C19.1 19.9999 20 19.0999 20 17.9999V15.3099ZM12 17.9999V5.99989C15.31 6.00989 18 8.68989 18 11.9999C18 15.3099 15.31 17.9999 12 17.9999Z\"\n});\n\nfunction SvgBrightness(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBrightness);\nexport default __webpack_public_path__ + \"static/media/brightness.aad9c301.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21.5 4C20.67 4 20 4.67 20 5.5V10.5C20 10.78 19.78 11 19.5 11C19.22 11 19 10.78 19 10.5V2.5C19 1.67 18.33 1 17.5 1C16.67 1 16 1.67 16 2.5V10.5C16 10.78 15.78 11 15.5 11C15.22 11 15 10.78 15 10.5V1.5C15 0.67 14.33 0 13.5 0C12.67 0 12 0.67 12 1.5V10.49C12 10.77 11.78 10.99 11.5 10.99C11.22 10.99 11 10.77 11 10.49V4.5C11 3.67 10.33 3 9.5 3C8.67 3 8 3.67 8 4.5V15.91L3.88 13.56C3.3 13.23 2.58 13.32 2.1 13.78C1.5 14.36 1.48 15.32 2.07 15.91L8.85 22.8C9.6 23.57 10.62 24 11.7 24H19C21.21 24 23 22.21 23 20V5.5C23 4.67 22.33 4 21.5 4Z\"\n});\n\nfunction SvgPan(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPan);\nexport default __webpack_public_path__ + \"static/media/pan.c21f8e8b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 6H4C2.9 6 2 6.9 2 8V16C2 17.1 2.9 18 4 18H20C21.1 18 22 17.1 22 16V8C22 6.9 21.1 6 20 6ZM20 16H4V8H7V11C7 11.55 7.45 12 8 12C8.55 12 9 11.55 9 11V8H11V11C11 11.55 11.45 12 12 12C12.55 12 13 11.55 13 11V8H15V11C15 11.55 15.45 12 16 12C16.55 12 17 11.55 17 11V8H20V16Z\"\n});\n\nfunction SvgMeasurement(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMeasurement);\nexport default __webpack_public_path__ + \"static/media/measurement.397011b0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.5 8.5H10.5V7.5C10.5 6.95 10.05 6.5 9.5 6.5C8.95 6.5 8.5 6.95 8.5 7.5V8.5H7.5C6.95 8.5 6.5 8.95 6.5 9.5C6.5 10.05 6.95 10.5 7.5 10.5H8.5V11.5C8.5 12.05 8.95 12.5 9.5 12.5C10.05 12.5 10.5 12.05 10.5 11.5V10.5H11.5C12.05 10.5 12.5 10.05 12.5 9.5C12.5 8.95 12.05 8.5 11.5 8.5Z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.73 13.31C15.86 11.76 16.36 9.72999 15.71 7.56999C15.03 5.33999 13.14 3.58999 10.86 3.12999C6.21001 2.19999 2.20002 6.21999 3.14002 10.86C3.60002 13.15 5.35002 15.04 7.58002 15.71C9.74002 16.36 11.77 15.86 13.32 14.73L18.88 20.29C19.27 20.68 19.9 20.68 20.29 20.29C20.68 19.9 20.68 19.27 20.29 18.88L14.73 13.31ZM9.50002 14C7.01002 14 5.00002 11.99 5.00002 9.49999C5.00002 7.00999 7.01002 4.99999 9.50002 4.99999C11.99 4.99999 14 7.00999 14 9.49999C14 11.99 11.99 14 9.50002 14Z\"\n});\n\nfunction SvgMagnifier(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMagnifier);\nexport default __webpack_public_path__ + \"static/media/magnifier.1605ba9f.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as BrightnessIcon } from 'assets/icon/brightness.svg'\nimport { ReactComponent as PanIcon } from 'assets/icon/pan.svg'\nimport { ReactComponent as MeasurementIcon } from 'assets/icon/measurement.svg'\nimport { ReactComponent as MagnifierIcon } from 'assets/icon/magnifier.svg'\nimport IconText from './IconText'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { globalSubject, SubjectTopic } from 'common/utils'\nimport * as cornerstoneTools from 'cornerstone-tools'\nimport { DicomToolType, MeasurementTool } from 'common/types'\nimport { KeyCode, shortcut$ } from 'common/shortcut'\nimport { Menu, MenuItem } from '@material-ui/core'\nimport { useMenuStyles } from 'Toolbar/styles'\n\nenum MouseClick {\n  Left = 1,\n  Right = 2,\n  Middle = 4,\n}\n\nconst MENU_ITEMS: { tool: MeasurementTool; icon: any }[] = [\n  { tool: 'Length', icon: <MeasurementIcon /> },\n  { tool: 'Angle', icon: <MeasurementIcon /> },\n]\n\ninterface Props {\n  dicomToolType: DicomToolType | null\n  onSwitchDicomTool: (toolType: DicomToolType) => void\n}\n\nfunction _initCornerstoneTool() {\n  cornerstoneTools.addTool(\n    cornerstoneTools.ZoomMouseWheelTool, // Optional configuration\n    {\n      configuration: {\n        invert: false,\n        preventZoomOutsideImage: false,\n        minScale: 0.1,\n        maxScale: 2,\n      },\n    }\n  )\n  // addTool: initialize, setToolPassive: being able to view the annotations\n  cornerstoneTools.addTool(cornerstoneTools.PanTool)\n  cornerstoneTools.setToolPassive('Pan')\n  cornerstoneTools.addTool(cornerstoneTools.WwwcTool)\n  cornerstoneTools.setToolPassive('Wwwc')\n  cornerstoneTools.addTool(cornerstoneTools.MagnifyTool)\n  cornerstoneTools.setToolPassive('Magnify')\n  cornerstoneTools.addTool(cornerstoneTools.AngleTool)\n  cornerstoneTools.setToolPassive('Angle')\n  cornerstoneTools.addTool(cornerstoneTools.LengthTool)\n  cornerstoneTools.setToolPassive('Length')\n}\n\nexport default function DicomTool(props: Props) {\n  const { dicomToolType, onSwitchDicomTool } = props\n  const classes = useMenuStyles()\n  const prevDicomTool = useRef<DicomToolType | null>(dicomToolType)\n  const [showLayoutMenu, toggleLayoutMenu] = useState(false)\n  const [menuAnchor, setMenuAnchor] = useState<null | HTMLElement>(null)\n\n  useEffect(() => {\n    const subscription = globalSubject.subscribe(SubjectTopic.InitXrayTool, () => {\n      _initCornerstoneTool()\n    })\n    return () => subscription.unsubscribe()\n  }, [])\n\n  useEffect(() => {\n    const brightness = shortcut$([KeyCode.ControlLeft, KeyCode.KeyB])\n      .pipe()\n      .subscribe(() => {\n        onSwitchDicomTool('Wwwc')\n      })\n    const panZoom = shortcut$([KeyCode.ControlLeft, KeyCode.KeyZ])\n      .pipe()\n      .subscribe(() => {\n        onSwitchDicomTool('PanZoom')\n      })\n\n    const length = shortcut$([KeyCode.ControlLeft, KeyCode.KeyD])\n      .pipe()\n      .subscribe(() => {\n        onSwitchDicomTool('Length')\n      })\n\n    const angle = shortcut$([KeyCode.ControlLeft, KeyCode.KeyG])\n      .pipe()\n      .subscribe(() => {\n        onSwitchDicomTool('Angle')\n      })\n\n    const magnify = shortcut$([KeyCode.ControlLeft, KeyCode.KeyM])\n      .pipe()\n      .subscribe(() => {\n        onSwitchDicomTool('Magnify')\n      })\n\n    return () => {\n      brightness.unsubscribe()\n      panZoom.unsubscribe()\n      length.unsubscribe()\n      angle.unsubscribe()\n      magnify.unsubscribe()\n    }\n  }, [onSwitchDicomTool])\n\n  useEffect(() => {\n    // Disable previous tool\n    switch (prevDicomTool.current) {\n      case 'PanZoom':\n        cornerstoneTools.setToolPassive('Pan')\n        cornerstoneTools.setToolPassive('ZoomMouseWheel')\n        break\n      case null:\n        break\n      default:\n        cornerstoneTools.setToolPassive(prevDicomTool.current)\n    }\n    // Activate new tool\n    switch (dicomToolType) {\n      case 'PanZoom':\n        cornerstoneTools.setToolActive('Pan', { mouseButtonMask: MouseClick.Left })\n        cornerstoneTools.setToolActive('ZoomMouseWheel', { mouseButtonMask: MouseClick.Left })\n        break\n      case null:\n        break\n      default:\n        cornerstoneTools.setToolActive(dicomToolType as cornerstoneTools.ToolName, {\n          mouseButtonMask: MouseClick.Left,\n        })\n    }\n    prevDicomTool.current = dicomToolType\n  }, [dicomToolType])\n\n  return (\n    <>\n      <IconText\n        icon={<BrightnessIcon />}\n        text={`Brightness & Contrast`}\n        type=\"primary\"\n        active={dicomToolType === 'Wwwc'}\n        onClick={() => onSwitchDicomTool('Wwwc')}\n      />\n      <IconText\n        icon={<PanIcon />}\n        text=\"Pan & Zoom\"\n        type=\"primary\"\n        active={dicomToolType === 'PanZoom'}\n        onClick={() => onSwitchDicomTool('PanZoom')}\n      />\n      <IconText\n        icon={<MeasurementIcon />}\n        text=\"Measu-rement\"\n        type=\"primary\"\n        active={dicomToolType === 'Length' || dicomToolType === 'Angle'}\n        // onClick={() => onSwitchDicomTool('Measurement')}\n        onClick={(event: React.MouseEvent<HTMLElement>) => {\n          setMenuAnchor(event.currentTarget)\n          toggleLayoutMenu(true)\n        }}\n      />\n      <IconText\n        icon={<MagnifierIcon />}\n        text=\"Magnifier\"\n        type=\"primary\"\n        active={dicomToolType === 'Magnify'}\n        onClick={() => onSwitchDicomTool('Magnify')}\n      />\n      <Menu\n        anchorEl={menuAnchor}\n        open={showLayoutMenu}\n        classes={{ paper: classes.layoutMenu }}\n        onClose={() => toggleLayoutMenu(false)}\n      >\n        {MENU_ITEMS.map((item) => {\n          const isSelected = dicomToolType === item.tool\n          return (\n            <MenuItem\n              key={item.tool}\n              selected={isSelected}\n              onClick={() => {\n                onSwitchDicomTool(item.tool)\n                toggleLayoutMenu(false)\n              }}\n              className={`${classes.menuItem} ${isSelected ? 'selected' : ''}`}\n            >\n              {item.icon}\n              <span className=\"layout-label\">{item.tool}</span>\n            </MenuItem>\n          )\n        })}\n      </Menu>\n    </>\n  )\n}\n","import { Theme } from '@material-ui/core'\nimport { makeStylesWithIndex } from 'common/hooks'\n\nexport const useMenuStyles = makeStylesWithIndex({\n  layoutMenu: {\n    background: '#282828',\n    color: '#FFFFFF',\n    top: '72px !important', // IconText height\n  },\n  menuItem: {\n    '& .layout-label': {\n      marginLeft: '13px',\n    },\n    '&:hover': {\n      background: '#3E7B9A !important',\n    },\n    '&.selected': {\n      background: '#3E7B9A',\n    },\n    '& path': {\n      fill: 'white',\n    },\n  },\n})\n\nexport const useAiModelTabsStyles = makeStylesWithIndex((theme: Theme) => ({\n  '@keyframes showUp': {\n    from: {\n      height: '0px',\n    },\n    to: {\n      height: '107px', // tabs + funcTabs\n    },\n  },\n  root: {\n    animation: `$showUp 500ms ${theme.transitions.easing.easeInOut}`,\n  },\n  tabs: {\n    display: 'flex',\n    height: '32px',\n    background: 'rgba(19, 156, 255, 0.1)',\n    padding: '0px 6px',\n    marginBottom: '7px',\n  },\n  tab: {\n    minWidth: '76px',\n    fontSize: '13px',\n    lineHeight: '18px',\n    height: '28px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: '18px',\n    '&:hover': {\n      color: '#FFFFFF !important',\n      cursor: 'pointer',\n    },\n  },\n  funcTabs: {\n    display: 'flex',\n    height: '75px',\n    paddingLeft: '24px',\n  },\n  funcTab: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'column',\n    marginRight: '48px',\n    fontSize: '12px',\n    lineHeight: '14px',\n    color: 'rgba(255, 255, 255, 0.7)',\n    '& > img:hover': {\n      outline: '1px solid #C53652',\n      cursor: 'pointer',\n    },\n  },\n}))\n\nexport const useHangingProtocolStyles = makeStylesWithIndex({\n  root: {\n    position: 'absolute',\n    top: '93px',\n    left: '20px',\n    zIndex: 10,\n    background:\n      'linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, rgba(114, 114, 114, 0) 100%), #969696',\n    boxShadow: 'inset 0px 0px 4px rgba(0, 0, 0, 0.5)',\n    borderRadius: '3px',\n    '& .MuiButton-text': {\n      padding: '5px 12px',\n    },\n    '& .MuiButton-label': {\n      color: '#FFFFFF',\n      fontSize: '14px',\n      lineHeight: '19px',\n    },\n    '& .active': {\n      background:\n        'linear-gradient(180deg, rgba(0, 0, 0, 0.2) 0%, rgba(114, 114, 114, 0) 100%), #3E7B9A',\n      boxShadow: 'inset 0px 0px 4px rgba(0, 0, 0, 0.5)',\n    },\n  },\n})\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.79999 1.5L4.29999 3.5L10.4 7.7C10.4 7.7 11.6 8.4 11.5 9.4C11.4 10.4 11 10.7 12.3 11C13.6 11.3 15.4 10.1 15.8 9.1C16.2 8.1 16.1 7.5 15.1 7C14.6 6.7 13.6 6.6 12.5 6.1C11.8 5.7 5.79999 1.5 5.79999 1.5Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.5 7.4C16.3 7.5 16.3 7.79999 16.3 8.39999C16.3 9.09999 16.2 9.2 16.1 9.3C16 9.5 15.8 9.9 16.2 10C16.8 10.2 17.4 9.8 17.5 9.3C17.6 8.8 17.6 8.6 17.2 7.8C17 7.1 16.5 7.4 16.5 7.4Z\",\n  fill: \"white\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.7 10.8C14.2 11 13.6 11.4 12.9 11.4C12.2 11.4 12.2 11.4 11.9 11.3C11.6 11.2 11.6 11.9 11.6 12C11.7 12.2 11.6 12.6 12.5 12.6C13.3 12.6 14 13.5 14 13.9C14 14.2 14.1 18.1 14.2 18.9C14.3 19.8 14.5 22.1 14.5 22.1H16.1C16.1 22.1 16 15.8 16.1 14.2C16.2 12.7 16.5 12.4 16.6 11.8C16.7 11.1 16.6 10.7 16 10.5C15.5 10.3 15 10.7 14.7 10.8Z\",\n  fill: \"white\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.4 13.1C12.1 13.3 12.1 13.8 12.5 14.2C12.9 14.8 12.8 14.7 12.9 15.4C13 16.2 13.1 22.1 13.1 22.1H13.7L13.4 15C13.4 15 13.4 14.3 13.5 14.1C13.7 13.7 13.5 13.4 13.2 13.2C12.9 13 12.6 12.9 12.4 13.1Z\",\n  fill: \"white\"\n});\n\nfunction SvgKnee(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgKnee);\nexport default __webpack_public_path__ + \"static/media/knee.47742ea9.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.4 1.69999C11.3 1.69999 11.1 1.69999 11.2 1.79999C11.2 1.99999 11.4 1.99999 11.4 2.19999C11.4 2.29999 11.3 2.39999 11.2 2.49999C11 2.49999 11 2.49999 11.2 2.59999C11.4 2.69999 11.8 2.79999 12.1 2.79999C12.4 2.79999 12.9 2.79999 13.1 2.59999C13.2 2.49999 13.3 2.49999 13.1 2.39999C13 2.19999 13 2.19999 13 1.99999C13.1 1.89999 13.1 1.69999 13 1.59999C12.9 1.49999 12.4 1.69999 12.1 1.69999C11.8 1.79999 11.4 1.69999 11.4 1.69999Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.8 2.50001C10.6 2.40001 10.5 2.50001 10.5 2.60001C10.5 2.60001 10.5 2.70001 10.5 2.80001C10.5 2.90001 10.4 2.90001 10.4 3.00001C10.4 3.10001 10.4 3.20001 10.7 3.20001C11 3.20001 11.1 3.20001 11.2 3.20001C11.3 3.20001 11.3 3.40001 11.3 3.50001C11.2 3.50001 11.1 3.70001 11.2 3.70001C11.5 4.00001 11.8 4.10001 12.2 4.10001C12.6 4.10001 13 4.00001 13.1 3.90001C13.2 3.80001 13.2 3.70001 13.2 3.70001C13.2 3.70001 13 3.50001 13.1 3.40001C13.2 3.30001 13.2 3.30001 13.4 3.30001C13.5 3.30001 13.8 3.40001 13.9 3.30001C14 3.20001 14 3.10001 13.9 3.00001C13.8 2.90001 13.7 2.80001 13.8 2.70001C13.8 2.60001 13.7 2.60001 13.6 2.60001C13.5 2.60001 13.3 2.90001 13.2 3.00001C12.9 3.00001 12.5 3.10001 12.2 3.00001C11.9 3.00001 11.2 2.80001 10.8 2.50001Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.5 3.60001C10.5 3.60001 10.4 3.50001 10.2 3.70001C10.1 3.90001 10 4.10001 10.1 4.20001C10.1 4.30001 10.3 4.40001 10.5 4.30001C10.7 4.20001 10.9 4.30001 10.9 4.40001C10.9 4.50001 10.8 5.00001 11.2 5.10001C11.6 5.20001 11.9 5.20001 12.1 5.20001C12.3 5.20001 13.2 5.20001 13.2 4.80001C13.3 4.50001 13.2 4.20001 13.4 4.20001C13.7 4.20001 14.1 4.50001 14 4.00001C14 3.60001 13.6 3.40001 13.5 3.60001C13.3 3.80001 12.8 4.20001 12 4.20001C11.3 4.30001 10.9 3.90001 10.5 3.60001Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.2 4.59999C10.2 4.59999 10.1 5.19999 10.4 5.19999C10.7 5.19999 10.9 5.49999 10.9 5.69999C10.9 5.89999 11.1 6.39999 12.2 6.39999C13.2 6.39999 13.4 6.19999 13.5 5.69999C13.6 5.19999 13.8 5.29999 13.9 5.19999C14 5.19999 14.2 4.89999 14.2 4.59999C14.2 4.29999 14 4.39999 14 4.49999C13.9 4.69999 13.8 4.59999 13.7 4.69999C13.6 4.79999 13.7 5.19999 13 5.39999C12.6 5.49999 12.1 5.49999 11.8 5.39999C11.5 5.29999 11 5.09999 11 4.89999C11 4.69999 10.9 4.69999 10.8 4.69999C10.7 4.69999 10.6 4.49999 10.5 4.49999C10.3 4.49999 10.2 4.49999 10.2 4.59999Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.19997 2.7C6.29997 2.7 4.89997 3.3 4.49997 5.6C4.09997 7.9 6.29997 8.7 6.39997 8.7C6.49997 8.7 7.69997 8.9 6.99997 9.7C6.29997 10.5 6.49997 10.6 6.99997 10.8C7.49997 11 8.69997 11.4 7.99997 12.2C7.79997 12.5 7.39997 12.8 7.49997 13.1C7.49997 13.4 8.19997 13.4 8.29997 13.5C8.39997 13.5 8.49997 15.4 10.4 15.3C12.2 15.1 12 13.2 11.7 12.6C11.4 12 11.3 12 10.8 11.6C10.3 11.3 9.69997 10.4 9.49997 9.9C9.29997 9.5 9.29997 8.8 9.79997 8.9C10.4 9.1 10.9 10.4 11.1 10.6C11.3 10.8 12.1 11.4 13 10.7C13.9 10 13.2 9.5 14.1 9C14.3 8.8 14.8 9.1 14.8 9.5C14.8 9.9 14 11.1 13.5 11.5C13 11.9 12.4 12.2 12.2 13.4C12.1 14.6 13.3 15.5 14.3 15.4C15.3 15.3 15.8 13.9 15.7 13.6C15.7 13.6 16.4 13.6 16.6 13.4C16.8 13.2 16.1 12.7 15.9 12.4C15.7 12.1 15.8 11.3 17 11C18.3 10.7 17.5 10.4 17.2 10.2C16.9 10 16.4 9.3 17.3 9.1C18.2 8.9 21.9 5.6 18.2 3.5C15.8 2.1 14.6 4.5 14.4 4.8C13.9 5.6 13.8 5.9 13.7 6.8C13.6 7.4 13.2 6.8 12.8 7C12.6 7.1 12.6 7.3 11.9 7.4C11.4 7.4 11.1 6.9 10.8 7C9.99997 7.3 10.1 6.7 10.1 6.2C10.1 5.7 9.29997 2.6 7.19997 2.7Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.39999 11.7C3.49999 12.6 3.19999 13.2 3.29999 13.7C3.49999 14.1 4.19999 15.5 4.39999 17.8C4.59999 20.1 4.39999 22.3 5.39999 22.3C5.69999 22.3 6.19999 22.2 6.39999 22.1C6.89999 22 6.09999 20.3 5.99999 19.8C5.89999 19.3 4.99999 16.6 5.79999 15.5C6.19999 14.8 5.99999 14.5 5.99999 14.3C5.99999 14.2 5.39999 13.2 5.79999 13.1C6.19999 13 6.49999 13 6.89999 13C7.29999 13.1 7.79999 12 7.49999 11.3C7.19999 10.6 6.19999 10.6 6.19999 10.6C6.19999 10.6 5.69999 10.7 5.99999 11C6.19999 11.3 5.79999 11.9 5.49999 12C5.19999 12.1 4.99999 12.2 4.99999 11.8C4.99999 11.3 4.49999 11.6 4.39999 11.7Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.8 11.7C20.7 12.6 21 13.2 20.9 13.7C20.7 14.1 20 15.5 19.8 17.8C19.6 20 19.8 22.3 18.8 22.3C18.5 22.3 18 22.2 17.8 22.1C17.3 22 18.1 20.3 18.2 19.8C18.3 19.3 19.2 16.6 18.4 15.5C17.9 14.9 18.1 14.6 18.2 14.4C18.2 14.3 18.8 13.3 18.4 13.2C17.9 13 17.6 13 17.2 13C16.8 13.1 16.3 12 16.6 11.3C16.9 10.6 17.9 10.6 17.9 10.6C17.9 10.6 18.4 10.6 18.1 10.9C17.9 11.2 18.3 11.8 18.6 11.9C18.9 12 19.1 12.1 19.1 11.7C19.2 11.3 19.7 11.6 19.8 11.7Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nfunction SvgHip(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHip);\nexport default __webpack_public_path__ + \"static/media/hip.00c0fad6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.4001 20.1C10.0001 20.8 10.0001 21.8 10.4001 21.9C10.8001 22.1 11.8001 22.1999 12.1001 21.9C12.4001 21.6 12.5001 22.4 12.8001 22.5C13.1001 22.7 13.4001 21.8 14.0001 21.7C14.6001 21.6 14.4001 21 14.9001 21C15.4001 21 14.8001 21.4 15.3001 21.9C15.8001 22.4 17.9001 22.9 18.6001 22.9C19.3001 22.8 19.0001 21.6999 19.3001 20.9C19.5001 20.2 20.0001 19.7 18.9001 19.7C17.8001 19.6 16.3001 19.2 16.0001 19.2C15.6001 19.2 15.6001 19.4 14.7001 19.7C13.9001 19.9 13.5001 20.2 13.0001 19.9C12.5001 19.7 11.5001 19.7 11.2001 19.7C10.7001 19.8 10.5001 20 10.4001 20.1Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.60033 16.4C9.70033 16.2 9.90033 16.1 10.2003 16C10.4003 15.9 11.0003 15.9 11.5003 16C11.7003 16 11.8003 16.1 11.9003 16.1C12.4003 16.3 12.8003 16.2 13.6003 15.9C14.4003 15.7 14.5003 15.5 14.9003 15.5C15.0003 15.5 15.1003 15.5 15.2003 15.5C15.7003 15.6 16.6003 15.9 17.5003 16C17.6003 16 17.7003 16 17.8003 16C18.9003 16.1 18.5003 16.4 18.3003 17.1C18.2003 17.4 18.2003 17.8 18.2003 18.2C18.2003 18.7 18.1003 19.1 17.7003 19.1C17.0003 19.2 15.0003 18.7 14.5003 18.2C14.0003 17.8 14.5003 17.5 14.1003 17.4C13.6003 17.4 13.8003 17.9 13.2003 18C12.8003 18 12.7003 18.1 12.5003 18.3C12.3003 18.4 12.2003 18.5 12.1003 18.4C12.1003 18.4 12.0003 18.4 12.0003 18.3C11.8003 18.2 11.7003 17.9 11.5003 17.8C11.4003 17.8 11.4003 17.8 11.3003 17.8C11.1003 17.9 10.8003 17.9 10.4003 18C10.0003 18.1 9.70033 18.1 9.50033 18C9.30033 18 9.20033 17.7 9.20033 17.4C9.10033 17.3 9.30033 16.8 9.60033 16.4Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.3999 12.7C9.4999 12.5 9.6999 12.4 9.8999 12.3C10.0999 12.2 10.5999 12.1 11.0999 12.2C11.2999 12.2 11.3999 12.3 11.4999 12.3C11.9999 12.5 12.2999 12.4 13.0999 12.2C13.8999 11.9 13.8999 11.9 14.2999 12C14.3999 12 14.3999 12 14.5999 12.1C15.0999 12.2 15.7999 12.5 16.7999 12.6C16.8999 12.6 16.9999 12.6 17.0999 12.6C18.1999 12.7 17.8999 13 17.7999 13.6C17.6999 13.8 17.6999 14.3 17.6999 14.7C17.6999 15.2 17.5999 15.6 17.1999 15.7C16.5999 15.8 14.7999 15.3 14.1999 14.9C13.7999 14.6 14.1999 14.3 13.7999 14.3C13.3999 14.3 13.4999 14.8 12.9999 14.7C12.5999 14.7 12.6999 14.6 12.3999 14.7C12.1999 14.8 12.0999 14.8 11.8999 14.8H11.7999C11.5999 14.8 11.4999 14.5 11.1999 14.4C11.0999 14.4 11.0999 14.4 10.9999 14.4C10.7999 14.5 10.3999 14.5 10.0999 14.7C9.6999 14.9 9.3999 15 9.1999 15C8.9999 15 8.8999 14.6 8.8999 14.3C8.8999 13.6 9.1999 13.1 9.3999 12.7Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.20017 8.99995C9.30017 8.79995 9.50017 8.69995 9.70017 8.59995C9.90017 8.49995 10.2002 8.29995 10.8002 8.39995C10.9002 8.39995 11.1002 8.39995 11.2002 8.49995C11.7002 8.69995 12.0002 8.69995 12.7002 8.39995C13.4002 8.09995 13.5002 8.19995 13.8002 8.29995C13.9002 8.29995 13.9002 8.29995 14.0002 8.39995C14.5002 8.49995 15.1002 8.79995 16.1002 8.99995C16.2002 8.99995 16.3002 8.99995 16.4002 8.99995C17.5002 9.09995 17.3002 9.39995 17.2002 9.79995C17.1002 9.99995 17.1002 10.4 17.1002 10.9C17.0002 11.4 17.0002 11.9 16.7002 11.9C16.2002 12 14.6002 11.6 13.9002 11.2C13.5002 11 13.8002 10.7 13.4002 10.7C13.0002 10.7 13.0002 11.1 12.6002 11C12.2002 11 12.4002 10.6 12.1002 10.6C11.9002 10.6 11.8002 10.5 11.6002 10.6H11.5002C11.2002 10.7 11.2002 10.4 10.8002 10.3C10.7002 10.3 10.7002 10.3 10.6002 10.3C10.3002 10.4 10.0002 10.4 9.60017 10.6C9.20017 10.9 8.90017 11 8.70017 11.1C8.50017 11.1 8.40017 10.6 8.50017 10.4C8.60017 9.89995 9.00017 9.49995 9.20017 8.99995Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.4001 5.30008C8.5001 5.20008 8.6001 5.00008 8.8001 4.90008C8.9001 4.70008 9.2001 4.50008 9.7001 4.60008C9.8001 4.60008 10.0001 4.60008 10.1001 4.70008C10.6001 4.90008 10.8001 5.00008 11.5001 4.70008C12.2001 4.40008 12.3001 4.50008 12.6001 4.70008C12.7001 4.70008 12.7001 4.80008 12.8001 4.80008C13.3001 4.90008 13.7001 5.20008 14.8001 5.40008C14.9001 5.40008 15.0001 5.40008 15.1001 5.50008C16.2001 5.70008 16.1001 5.90008 16.0001 6.20008C16.0001 6.20008 16.0001 6.70008 16.0001 7.20008C15.9001 7.70008 15.9001 8.20008 15.6001 8.20008C15.2001 8.30008 13.7001 8.00008 13.1001 7.70008C12.7001 7.50008 12.9001 7.30008 12.6001 7.30008C12.2001 7.30008 12.2001 7.50008 11.9001 7.50008C11.5001 7.40008 11.9001 6.80008 11.6001 6.80008C11.4001 6.80008 11.3001 6.60008 11.1001 6.70008C11.1001 6.70008 11.0001 6.70008 11.0001 6.80008C10.7001 7.00008 10.7001 6.70008 10.2001 6.60008C10.1001 6.60008 10.0001 6.60008 10.0001 6.60008C9.7001 6.60008 9.3001 6.60008 8.9001 7.00008C8.4001 7.30008 8.1001 7.50008 7.8001 7.60008C7.6001 7.70008 7.6001 7.10008 7.6001 6.90008C7.7001 6.20008 8.1001 5.80008 8.4001 5.30008Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.5001 1.60005C7.6001 1.40005 7.7001 1.30005 7.8001 1.10005C8.0001 1.00005 8.1001 0.700053 8.6001 0.800053C8.7001 0.800053 8.9001 0.800053 9.0001 0.900053C9.5001 1.00005 9.7001 1.20005 10.3001 0.900053C10.9001 0.600053 11.0001 0.800053 11.3001 1.00005C11.4001 1.00005 11.4001 1.10005 11.5001 1.10005C12.0001 1.30005 12.3001 1.50005 13.4001 1.80005C13.5001 1.80005 13.6001 1.80005 13.7001 1.90005C14.8001 2.10005 14.8001 2.30005 14.8001 2.50005C14.8001 2.60005 14.7001 3.10005 14.7001 3.60005C14.6001 4.10005 14.6001 4.60005 14.4001 4.70005C14.1001 4.80005 12.8001 4.60005 12.1001 4.30005C11.8001 4.20005 11.9001 4.00005 11.6001 4.00005C11.3001 4.00005 11.2001 4.10005 10.9001 4.10005C10.4001 4.00005 11.0001 3.20005 10.7001 3.10005C10.4001 3.00005 10.4001 2.80005 10.1001 2.90005L10.0001 3.00005C9.7001 3.20005 9.7001 2.90005 9.2001 2.70005C9.1001 2.70005 9.0001 2.70005 8.9001 2.70005C8.5001 2.70005 8.2001 2.70005 7.8001 3.10005C7.3001 3.70005 7.1001 3.90005 6.8001 4.10005C6.6001 4.20005 6.6001 3.50005 6.6001 3.20005C6.7001 2.50005 7.2001 2.10005 7.5001 1.60005Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n});\n\nfunction SvgSpine(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSpine);\nexport default __webpack_public_path__ + \"static/media/spine.93c5eb59.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  clipPath: \"url(#clip0)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.7 5.10015C4.3 5.10015 3.5 5.30015 3.5 5.90015C3.5 6.60015 3.6 8.50015 4.1 9.90015C4.6 11.3001 5.6 20.8001 5.9 22.8001C6 23.8001 8.5 23.2001 8.2 22.3001C7.7 20.8001 6.7 11.3001 7.3 9.90015C7.9 8.60015 8.4 8.90015 8.8 8.00015C9.3 6.80015 9 5.40015 8.3 4.80015C8 4.40015 6.6 3.70015 5.7 4.10015C4.8 4.60015 4.7 5.10015 4.7 5.10015Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.3 6.29995C18.2 5.39995 17.7 4.19995 16.7 3.09995C15.7 1.99995 13.8 3.29995 13.2 3.59995C12.8 3.79995 12.7 4.19995 12.6 4.29995C12.6 4.39995 12.4 4.69995 12.4 4.89995C12.3 5.29995 12 5.69995 11.6 5.99995C11.4 6.09995 11.1 6.29995 10.9 6.29995C10.8 6.29995 10.7 6.29995 10.6 6.29995C10.5 6.29995 10.5 6.29995 10.4 6.29995C10.3 6.29995 10.3 6.29995 10.3 6.19995C10.2 6.19995 10.1 6.09995 10.1 6.09995C9.90002 6.09995 9.90002 5.99995 9.80002 5.99995C9.80002 5.89995 9.70002 5.89995 9.70002 5.89995C9.70002 5.89995 9.80002 5.89995 9.90002 5.99995C10 5.99995 10.1 5.99995 10.3 6.09995C10.6 6.19995 11.1 6.19995 11.5 5.89995C11.9 5.69995 12.2 5.29995 12.3 4.89995C12.4 4.69995 12.7 3.99995 12.2 3.29995C11.3 2.19995 10 3.49995 9.50002 3.79995C9.40002 3.79995 9.50002 4.69995 8.40002 4.49995C8.10002 4.49995 8.90002 4.99995 9.20002 5.79995C9.60002 6.59995 9.60002 7.99995 8.50002 8.89995C7.70002 9.49995 8.50002 9.29995 9.60002 10.0999C10.7 10.9 13.2 19.4 14.8 19.6C16.4 19.8 17.4 16.4999 17.6 15.0999C17.9 13.7999 18.4 7.19995 18.3 6.29995Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.00021 3.4C7.50021 3.3 7.80021 3.1 7.90021 2.7C8.00021 2.3 7.70021 2 7.30021 2C6.90021 2 6.50021 2.2 6.10021 2.4C5.80021 2.6 4.10021 3.4 4.60021 4C4.90021 4.3 5.50021 4 5.80021 3.9C6.20021 3.8 6.60021 3.7 7.10021 3.8C7.90021 4 8.90021 4.9 9.40021 3.8C9.40021 3.8 8.40021 3.6 8.00021 3.4Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.7002 1.70005C7.9002 1.80005 8.2002 2.70005 8.2002 2.90005C8.2002 3.10005 9.0002 2.50005 10.4002 2.50005C11.8002 2.50005 15.0002 2.50005 16.1002 2.70005C17.2002 2.90005 18.9002 3.30005 19.9002 3.20005C20.9002 3.10005 21.3002 2.40005 21.4002 2.00005C21.5002 1.60005 21.7002 0.700052 21.2002 1.00005C20.7002 1.30005 19.6002 2.10005 18.3002 2.10005C17.0002 2.00005 14.9002 1.60005 13.3002 1.40005C11.1002 1.20005 7.7002 1.70005 7.7002 1.70005Z\",\n  fill: \"white\",\n  fillOpacity: 0.7\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"clip0\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: 24,\n  height: 24,\n  fill: \"white\"\n})));\n\nfunction SvgShoulder(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgShoulder);\nexport default __webpack_public_path__ + \"static/media/shoulder.e2231723.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as KneelIcon } from 'assets/icon/knee.svg'\nimport { ReactComponent as HipIcon } from 'assets/icon/hip.svg'\nimport { ReactComponent as SpineIcon } from 'assets/icon/spine.svg'\nimport { ReactComponent as ShoulderIcon } from 'assets/icon/shoulder.svg'\nimport SummaryImg from 'assets/img/summary.png'\nimport HistoryImg from 'assets/img/history.png'\nimport ThreeDLeftImg from 'assets/img/3d-left.png'\nimport ThreeDRightImg from 'assets/img/3d-right.png'\nimport React, { useCallback, useState } from 'react'\nimport { globalSubject, parseInferenceItem, SubjectTopic } from 'common/utils'\nimport { ModelFunc, Study, ThreeDResult } from 'common/types'\nimport { useQueryParams } from 'common/hooks'\nimport { GET_STUDIES } from 'PatientDetail/gql'\nimport { client } from 'common/apolloClient'\nimport { useAiModelTabsStyles } from 'Toolbar/styles'\n\nconst Tab: React.FC<{\n  className: string\n  icon: React.ReactElement\n  text: string\n  active: boolean\n  onClick: () => void\n}> = ({ className, icon, text, active, onClick }) => {\n  return (\n    <div\n      className={className}\n      onClick={onClick}\n      style={{\n        color: active ? '#FFFFFF' : 'rgba(255, 255, 255, 0.7)',\n        borderBottom: active ? 'solid 4px #C53652' : 'none',\n      }}\n    >\n      {icon}\n      {text}\n    </div>\n  )\n}\n\nconst ImgText: React.FC<{\n  className: string\n  img: string\n  text: string\n  active: boolean\n  onClick: () => void\n}> = ({ className, img, text, active, onClick }) => {\n  return (\n    <div\n      className={className}\n      style={{\n        border: active ? '1px solid #C53652' : 'inherit',\n        borderRadius: '3px',\n      }}\n      onClick={onClick}\n    >\n      <img src={img} alt={text} />\n      <span style={{ transform: 'scale(0.83)' }}>{text}</span>\n    </div>\n  )\n}\n\nexport default function AiModelTabs() {\n  const classes = useAiModelTabsStyles()\n  const [category, setCategory] = useState('knee')\n  const [func, setFunc] = useState<ModelFunc | null>(null)\n  const [laterality, setLaterality] = useState<'left' | 'right' | undefined>('left')\n  const studyIds = useQueryParams('studyIds').split(',')\n  const data = client.readQuery<{ studies: Study[] }, { ids: string[] }>({\n    query: GET_STUDIES,\n    variables: { ids: studyIds },\n  })\n\n  const onSwitchFunc = useCallback(\n    (newFunc: ModelFunc, newLaterality?: 'left' | 'right') => {\n      // Find the first matched inference result\n      data?.studies.forEach((study) => {\n        study.series.forEach(({ series_inst_uid, inference }) => {\n          for (const inf of inference) {\n            if (inf.func !== newFunc) continue\n            // 3d model needs to match laterality\n            if (newFunc === '3d' && (inf.result as ThreeDResult).laterality !== newLaterality)\n              continue\n\n            globalSubject.next(SubjectTopic.SwitchFunc, {\n              func: newFunc,\n              item: parseInferenceItem(inf, series_inst_uid),\n            })\n            break\n          }\n        })\n      })\n      setLaterality(newLaterality)\n      setFunc(newFunc)\n    },\n    [data]\n  )\n\n  return (\n    <div className={classes.root}>\n      <section className={classes.tabs}>\n        <Tab\n          className={classes.tab}\n          icon={<KneelIcon />}\n          text=\"Knee\"\n          active={category === 'knee'}\n          onClick={() => setCategory('knee')}\n        />\n        <Tab\n          className={classes.tab}\n          icon={<HipIcon />}\n          text=\"Pelvis & Hip\"\n          active={category === 'hip'}\n          onClick={() => setCategory('hip')}\n        />\n        <Tab\n          className={classes.tab}\n          icon={<SpineIcon />}\n          text=\"Spine\"\n          active={category === 'spine'}\n          onClick={() => setCategory('spine')}\n        />\n        <Tab\n          className={classes.tab}\n          icon={<ShoulderIcon />}\n          text=\"Shoulder\"\n          active={category === 'shoulder'}\n          onClick={() => setCategory('shoulder')}\n        />\n      </section>\n      <section className={classes.funcTabs}>\n        <ImgText\n          className={classes.funcTab}\n          img={SummaryImg}\n          text=\"OA Label\"\n          active={func === 'oa'}\n          onClick={() => onSwitchFunc('oa')}\n        />\n        <ImgText\n          className={classes.funcTab}\n          img={HistoryImg}\n          text=\"History\"\n          active={func === 'history'}\n          onClick={() => onSwitchFunc('history')}\n        />\n        <ImgText\n          className={classes.funcTab}\n          img={ThreeDRightImg}\n          text=\"AR Right\"\n          active={func === '3d' && laterality === 'right'}\n          onClick={() => onSwitchFunc('3d', 'right')}\n        />\n        <ImgText\n          className={classes.funcTab}\n          img={ThreeDLeftImg}\n          text=\"AR Left\"\n          active={func === '3d' && laterality === 'left'}\n          onClick={() => onSwitchFunc('3d', 'left')}\n        />\n      </section>\n    </div>\n  )\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.29986 1.30005C6.59986 1.50005 4.89986 2.30005 4.79986 3.20005C4.59986 4.00005 5.09986 7.70005 4.89986 8.10005C4.79986 8.60005 3.89986 10.2 3.69986 10.6C3.39986 11 3.29986 11.8 3.69986 12.3C4.19986 12.8 4.19986 12.5 4.49986 12.8C4.79986 13.1 5.19986 13.3 5.79986 13.3C6.39986 13.3 6.09986 12.8 6.89986 12.6C7.69986 12.4 8.19986 12.7 8.79986 13C9.39986 13.3 10.5999 13.3 10.7999 12.7C10.8999 12.1 11.1999 10.6 10.8999 10.2C10.5999 9.80005 9.09986 8.80005 8.39986 7.20005C7.69986 5.60005 7.79986 2.40005 7.69986 1.90005C7.59986 1.40005 7.29986 1.30005 7.29986 1.30005Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.70018 14.0001C4.00018 13.9001 3.80018 13.9001 3.70018 14.1001C3.40018 14.4001 3.50018 15.1001 3.80018 15.3001C4.10018 15.5001 4.40018 15.6001 4.90018 16.2001C5.40018 16.8001 5.80018 17.4001 6.00018 17.9001C6.20018 18.4001 6.20018 19.9001 6.10018 20.6001C6.00018 21.3001 6.10018 21.8001 6.30018 22.1001C6.50018 22.4001 7.80018 22.7001 8.30018 22.5001C8.80018 22.2001 8.40018 21.9001 8.40018 21.5001C8.40018 21.1001 8.10018 21.0001 8.30018 20.4001C8.60018 19.8001 8.50018 18.4001 8.70018 17.8001C8.90018 17.2001 9.10018 17.1001 9.20018 16.8001C9.50018 16.2001 9.30018 15.6001 9.90018 15.5001C10.8002 15.4001 11.3002 14.2001 10.3002 13.8001C9.40018 13.5001 8.90018 14.0001 8.60018 13.7001C8.40018 13.4001 7.40018 13.0001 7.00018 13.3001C6.60018 13.8001 5.30018 14.1001 4.70018 14.0001Z\",\n  fill: \"white\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3.29985 15.8C2.79985 15.8 2.49985 16.2 2.69985 16.6C2.89985 17.1 3.39985 17.5 3.69985 17.8C3.99985 18.1 3.59985 20 3.69985 20.2C3.79985 20.4 3.79985 20.6 4.39985 21.3C4.99985 22 5.29985 21.4 5.19985 21.1C5.09985 20.9 4.79985 19.9 4.89985 19.1C5.09985 18.3 5.19985 17.9 4.99985 17.3C4.79985 16.7 3.69985 15.8 3.29985 15.8Z\",\n  fill: \"white\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.7001 1.30005C17.4001 1.50005 19.1001 2.30005 19.2001 3.20005C19.3001 4.10005 18.9001 7.80005 19.1001 8.20005C19.2001 8.70005 20.1001 10.3 20.3001 10.7C20.6001 11.1 20.7001 11.9 20.3001 12.4C19.8001 12.9 19.8001 12.6 19.5001 12.9C19.2001 13.2 18.8001 13.4 18.2001 13.4C17.6001 13.4 17.9001 12.9 17.1001 12.7C16.3001 12.5 15.8001 12.8 15.2001 13.1C14.6001 13.4 13.4001 13.4 13.2001 12.8C13.1001 12.2 12.8001 10.7 13.1001 10.3C13.4001 9.90005 15.0001 8.70005 15.7001 7.10005C16.3001 5.50005 16.3001 2.30005 16.4001 1.80005C16.4001 1.40005 16.7001 1.30005 16.7001 1.30005Z\",\n  fill: \"white\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.3002 14.0001C20.0002 13.9001 20.2002 13.9001 20.3002 14.1001C20.6002 14.4001 20.5002 15.1001 20.2002 15.3001C19.9002 15.5001 19.6002 15.6001 19.1002 16.2001C18.6002 16.8001 18.2002 17.4001 18.0002 17.9001C17.8002 18.4001 17.8002 19.9001 17.9002 20.6001C18.0002 21.3001 17.9002 21.8001 17.7002 22.1001C17.5002 22.3001 16.2002 22.7001 15.7002 22.5001C15.2002 22.3001 15.6002 21.9001 15.6002 21.5001C15.6002 21.1001 15.9002 21.0001 15.7002 20.4001C15.4002 19.8001 15.5002 18.4001 15.3002 17.8001C15.1002 17.2001 14.9002 17.1001 14.8002 16.8001C14.5002 16.2001 14.7002 15.6001 14.1002 15.5001C13.2002 15.4001 12.7002 14.2001 13.7002 13.8001C14.6002 13.5001 15.1002 14.0001 15.4002 13.7001C15.6002 13.4001 16.6002 13.0001 17.0002 13.3001C17.4002 13.8001 18.7002 14.1001 19.3002 14.0001Z\",\n  fill: \"white\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20.7002 15.8C21.2002 15.8 21.5002 16.2 21.3002 16.6C21.1002 17.1 20.6002 17.5 20.3002 17.8C20.0002 18.1 20.4002 20 20.3002 20.2C20.2002 20.5 20.2002 20.6 19.6002 21.3C19.0002 22 18.7002 21.4 18.8002 21.1C18.9002 20.9 19.2002 19.9 19.1002 19.1C18.9002 18.3 18.8002 17.9 19.0002 17.3C19.3002 16.9 20.3002 15.8 20.7002 15.8Z\",\n  fill: \"white\"\n});\n\nfunction SvgPapa(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPapa);\nexport default __webpack_public_path__ + \"static/media/papa.d2aa4361.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.89996 1.30005C6.19996 1.50005 4.49996 2.30005 4.39996 3.20005C4.29996 4.10005 4.69996 7.80005 4.49996 8.20005C4.39996 8.70005 3.49996 10.3 3.29996 10.7C2.99996 11.1 2.89996 11.9 3.29996 12.4C3.79996 12.9 3.79996 12.6 4.09996 12.9C4.39996 13.2 4.79996 13.4 5.39996 13.4C5.99996 13.4 5.69996 12.9 6.49996 12.7C7.29996 12.5 7.79996 12.8 8.39996 13.1C8.99996 13.4 10.2 13.4 10.4 12.8C10.5 12.2 10.8 10.7 10.5 10.3C10.3 10 8.69996 8.80005 8.09996 7.20005C7.49996 5.60005 7.39996 2.40005 7.29996 1.90005C7.19996 1.40005 6.89996 1.30005 6.89996 1.30005Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.29979 14.0001C3.59979 13.9001 3.39979 13.9001 3.29979 14.1001C2.99979 14.4001 3.09979 15.1001 3.39979 15.3001C3.69979 15.5001 3.99979 15.6001 4.49979 16.2001C4.99979 16.8001 5.39979 17.4001 5.59979 17.9001C5.79979 18.4001 5.79979 19.9001 5.69979 20.6001C5.59979 21.3001 5.69979 21.8001 5.89979 22.1001C6.09979 22.4001 7.39979 22.7001 7.89979 22.5001C8.39979 22.2001 7.99979 21.9001 7.99979 21.5001C7.99979 21.1001 7.69979 21.0001 7.89979 20.4001C8.19979 19.8001 8.09979 18.4001 8.29979 17.8001C8.49979 17.2001 8.69979 17.1001 8.79979 16.8001C9.09979 16.2001 8.89979 15.6001 9.49979 15.5001C10.3998 15.4001 10.8998 14.2001 9.89979 13.8001C8.99979 13.5001 8.49979 14.0001 8.19979 13.7001C7.99979 13.4001 6.99979 13.0001 6.59979 13.3001C6.29979 13.8001 4.89979 14.1001 4.29979 14.0001Z\",\n  fill: \"white\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.89995 15.8C2.39995 15.8 2.09995 16.2 2.29995 16.6C2.49995 17.1 2.99995 17.5 3.29995 17.8C3.59995 18.1 3.19995 20 3.29995 20.2C3.39995 20.4 3.39995 20.6 3.99995 21.3C4.59995 22 4.89995 21.4 4.79995 21.1C4.69995 20.9 4.39995 19.9 4.49995 19.1C4.59995 18.3 4.79995 17.9 4.59995 17.3C4.29995 16.9 3.29995 15.8 2.89995 15.8Z\",\n  fill: \"white\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.4999 1.8999C15.0999 2.4999 14.6999 6.4999 14.3999 7.1999C14.0999 7.8999 13.0999 8.3999 13.1999 8.8999C13.2999 9.3999 13.3999 10.1999 13.8999 10.7999C14.3999 11.3999 15.4999 11.9999 16.4999 11.8999C17.4999 11.7999 18.6999 11.4999 18.8999 10.8999C19.0999 10.2999 19.0999 9.0999 18.5999 8.9999C18.0999 8.8999 17.6999 9.2999 17.5999 8.2999C17.4999 7.2999 17.8999 5.9999 18.1999 5.5999C18.4999 5.1999 18.6999 4.5999 18.5999 4.0999C18.4999 3.5999 19.0999 3.2999 18.8999 2.8999C18.6999 2.4999 17.3999 1.6999 16.9999 1.6999C16.5999 1.6999 15.7999 1.4999 15.4999 1.8999Z\",\n  fill: \"white\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.7998 9.10003C12.8998 9.70003 12.9998 10.1 13.3998 10.7C13.7998 11.3 14.1998 11.2 14.2998 11.8C14.3998 12.4 13.6998 13.4 13.1998 13.1C12.6998 12.8 12.2998 12.6 11.9998 11.8C11.6998 11 11.1998 10.3 11.6998 9.90003C12.1998 9.50003 12.6998 8.90003 12.7998 9.10003Z\",\n  fill: \"white\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.3999 11.3C18.6999 11.4 18.0999 12 16.9999 12.2C15.8999 12.4 14.8999 12.8 14.7999 13.4C14.6999 14 16.2999 16.2 16.7999 16.9C17.2999 17.6 19.1999 20.5 19.5999 20.8C19.9999 21.1 21.3999 19.2 21.3999 18.6C21.3999 18 21.6999 16.9 20.4999 16C19.2999 15.1 18.6999 13.7 19.2999 13.4C19.8999 13.1 19.9999 13.2 20.0999 12.6C20.1999 12 19.8999 11.3 19.3999 11.3Z\",\n  fill: \"white\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21.0001 12.8001C20.5001 13.2001 19.7001 13.6001 19.8001 14.2001C19.9001 14.8001 20.3001 14.9001 20.7001 15.3001C21.1001 15.7001 22.2001 16.3001 22.2001 16.8001C22.2001 17.3001 22.7001 17.1001 22.7001 16.5001C22.7001 15.9001 22.8001 15.6001 22.3001 15.2001C21.8001 14.8001 21.7001 14.2001 21.7001 13.6001C21.7001 13.0001 21.3001 12.6001 21.0001 12.8001Z\",\n  fill: \"white\"\n});\n\nfunction SvgPalat(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPalat);\nexport default __webpack_public_path__ + \"static/media/palat.2aa9ebcc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.0998 18.5001H9.6998V12.8001H4.6998V18.5001H2.2998V5.6001H4.6998V10.8001H9.6998V5.6001H12.0998V18.5001Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.8996 5.6001C19.4996 5.6001 20.5996 5.9001 21.2996 6.6001C21.9996 7.3001 22.3996 8.3001 22.3996 9.5001C22.3996 10.2001 22.2996 10.9001 21.9996 11.6001C21.6996 12.2001 21.1996 12.8001 20.4996 13.1001C19.7996 13.5001 18.8996 13.7001 17.6996 13.7001H16.4996V18.4001H14.0996V5.6001H17.8996ZM17.7996 7.5001H16.5996V11.8001H17.4996C18.2996 11.8001 18.8996 11.6001 19.2996 11.3001C19.7996 11.0001 19.9996 10.4001 19.9996 9.6001C19.9996 8.2001 19.2996 7.5001 17.7996 7.5001Z\",\n  fill: \"white\"\n});\n\nfunction SvgHp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHp);\nexport default __webpack_public_path__ + \"static/media/hp.b3eaf786.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as PaPaIcon } from 'assets/icon/papa.svg'\nimport { ReactComponent as PaLatIcon } from 'assets/icon/palat.svg'\nimport { ReactComponent as HPIcon } from 'assets/icon/hp.svg'\nimport { Box, Button } from '@material-ui/core'\nimport IconText from './IconText'\nimport { useCallback, useEffect, useState } from 'react'\nimport { client } from 'common/apolloClient'\nimport { useQueryParams } from 'common/hooks'\nimport { GET_STUDIES } from 'PatientDetail/gql'\nimport { DraggableItem, Laterality, Prediction, Protocols, Study } from 'common/types'\nimport { Layout, parseHangingProtocolItems } from 'common/utils'\nimport { useHangingProtocolStyles } from 'Toolbar/styles'\n\nfunction parsePredictionItemsMap(studies: Study[]): Map<string, Prediction[]> {\n  const map = new Map()\n  studies.forEach(({ series }) => {\n    series.forEach(({ series_inst_uid, predictions }) => {\n      map.set(series_inst_uid, predictions)\n    })\n  })\n  return map\n}\n\ninterface Props {\n  layout: Layout\n  currentSeriesId: string\n  onSwitchHangingProtocol: (protocol: Protocols, items: DraggableItem[]) => void\n}\n\nexport default function HangingProtocol(props: Props) {\n  const { layout, currentSeriesId, onSwitchHangingProtocol } = props\n  const classes = useHangingProtocolStyles()\n  const studyIds = useQueryParams('studyIds')\n  const data = client.readQuery<{ studies: Study[] }, { ids: string[] }>({\n    query: GET_STUDIES,\n    variables: { ids: studyIds.split(',') },\n  })\n  const [hpItemMap, setHpItemMap] = useState<Map<string, Prediction[]>>(\n    parsePredictionItemsMap(data ? data.studies : [])\n  )\n  const [laterality, setLaterality] = useState<Laterality>('L')\n\n  useEffect(() => {\n    if (!data) return\n\n    setHpItemMap(parsePredictionItemsMap(data.studies))\n  }, [data])\n\n  const onSwitchHp = useCallback(\n    (protocol: Protocols, laterality: Laterality = 'L') => {\n      // TODO: user defined protocol\n      const items = parseHangingProtocolItems(\n        hpItemMap.get(currentSeriesId)!,\n        currentSeriesId,\n        protocol,\n        laterality\n      )\n      // TODO: error handling\n      if (items.length === 0) {\n        return\n      }\n      onSwitchHangingProtocol(protocol, items)\n    },\n    [currentSeriesId, onSwitchHangingProtocol, hpItemMap]\n  )\n\n  const onSwitchLaterality = useCallback(\n    (newLaterality: Laterality) => {\n      setLaterality(newLaterality)\n      onSwitchHp('pa/lat', newLaterality)\n    },\n    [onSwitchHp]\n  )\n\n  return (\n    <>\n      {layout === 'pa/lat' && (\n        <div className={classes.root}>\n          <Button\n            variant=\"text\"\n            className={laterality === 'L' ? 'active' : ''}\n            onClick={() => onSwitchLaterality('L')}\n          >\n            Left\n          </Button>\n          <Button\n            variant=\"text\"\n            className={laterality === 'R' ? 'active' : ''}\n            onClick={() => onSwitchLaterality('R')}\n          >\n            Right\n          </Button>\n        </div>\n      )}\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <IconText\n          icon={<PaPaIcon />}\n          text=\"PA/PA\"\n          type=\"secondary\"\n          active={layout === 'pa/pa'}\n          onClick={() => onSwitchHp('pa/pa')}\n        />\n        <IconText\n          icon={<PaLatIcon />}\n          text=\"PA/LAT\"\n          type=\"secondary\"\n          active={layout === 'pa/lat'}\n          onClick={() => onSwitchHp('pa/lat')}\n        />\n        <IconText\n          icon={<HPIcon />}\n          text=\"User HP\"\n          type=\"secondary\"\n          active={false}\n          disabled={true}\n          onClick={() => onSwitchHp('user-hp')}\n        />\n      </Box>\n    </>\n  )\n}\n","import React, { useCallback, useState } from 'react'\n\nimport IconText from './components/IconText'\nimport { ReactComponent as ImportIcon } from 'assets/icon/import.svg'\nimport { ReactComponent as LayoutIcon } from 'assets/icon/layout.svg'\nimport { ReactComponent as AiIcon } from 'assets/icon/ai.svg'\nimport { ReactComponent as ThreeDIcon } from 'assets/icon/3d.svg'\nimport { ReactComponent as AnalyticsIcon } from 'assets/icon/analytics.svg'\nimport { ReactComponent as MoreIcon } from 'assets/icon/more.svg'\nimport { ReactComponent as FleshRemovalIcon } from 'assets/icon/fleshremoval.svg'\nimport { ReactComponent as Layout1x1Icon } from 'assets/icon/layout_1x1.svg'\nimport { ReactComponent as Layout1x2Icon } from 'assets/icon/layout_1x2.svg'\nimport { ReactComponent as Layout2x1Icon } from 'assets/icon/layout_2x1.svg'\nimport { ReactComponent as Layout2x2Icon } from 'assets/icon/layout_2x2.svg'\nimport { Box, Menu, MenuItem } from '@material-ui/core'\nimport DicomTool from './components/DicomTool'\nimport { Layout } from 'common/utils'\nimport AiModelTabs from './components/AiModelTabs'\nimport { DicomToolType, DraggableItem, Plugin, Protocols } from 'common/types'\nimport { useMenuStyles } from './styles'\nimport HangingProtocol from './components/HangingProtocol'\n\nconst MENU_ITEMS: { layout: Layout; icon: any }[] = [\n  { layout: '1x1', icon: <Layout1x1Icon /> },\n  { layout: '1x2', icon: <Layout1x2Icon /> },\n  { layout: '2x1', icon: <Layout2x1Icon /> },\n  { layout: '2x2', icon: <Layout2x2Icon /> },\n]\n\ninterface Props {\n  layout: Layout\n  currentItem: DraggableItem\n  changeLayout: (newLayout: Layout) => void\n  onSwitchPlugin: (plugin: Plugin) => void\n  onSwitchDicomTool: (toolType: DicomToolType) => void\n  onSwitchHangingProtocol: (protocol: Protocols, items: DraggableItem[]) => void\n}\n\nexport default function Toolbar(props: Props) {\n  const {\n    layout,\n    currentItem,\n    changeLayout,\n    onSwitchPlugin,\n    onSwitchDicomTool,\n    onSwitchHangingProtocol,\n  } = props\n  const classes = useMenuStyles()\n  const [showLayoutMenu, toggleLayoutMenu] = useState(false)\n  const [menuAnchor, setMenuAnchor] = useState<null | HTMLElement>(null)\n\n  const onSwitchLayout = useCallback(\n    (item: Layout) => {\n      changeLayout(item)\n      toggleLayoutMenu(false)\n    },\n    [changeLayout]\n  )\n\n  return (\n    <section style={{ position: 'relative' }}>\n      <Box display=\"flex\" justifyContent=\"space-between\" pl=\"7.5px\" pr=\"20px\">\n        {/* Basic dicom functionality */}\n        <Box display=\"flex\">\n          <DicomTool\n            dicomToolType={currentItem.dicomToolType}\n            onSwitchDicomTool={onSwitchDicomTool}\n          />\n          <IconText icon={<ImportIcon />} text=\"Import\" type=\"primary\" disabled={true} />\n          <IconText\n            icon={<LayoutIcon />}\n            text=\"Layout\"\n            type=\"primary\"\n            onClick={(event: React.MouseEvent<HTMLElement>) => {\n              setMenuAnchor(event.currentTarget)\n              toggleLayoutMenu(true)\n            }}\n          />\n        </Box>\n\n        <HangingProtocol\n          layout={layout}\n          currentSeriesId={currentItem.series_inst_uid}\n          onSwitchHangingProtocol={onSwitchHangingProtocol}\n        />\n\n        {/* Plugin and setting */}\n        <Box display=\"flex\" justifyContent=\"flex-end\">\n          <IconText\n            icon={<AiIcon />}\n            text=\"AI\"\n            type=\"plugin\"\n            active={currentItem.pluginType === 'ai'}\n            onClick={() => onSwitchPlugin('ai')}\n          />\n          <IconText\n            icon={<ThreeDIcon />}\n            text=\"3D\"\n            type=\"plugin\"\n            active={currentItem.pluginType === 'ct'}\n            onClick={() => onSwitchPlugin('ct')}\n          />\n          <IconText\n            icon={<FleshRemovalIcon />}\n            text=\"Flesh removal\"\n            type=\"plugin\"\n            active={currentItem.pluginType === 'fleshRemoval'}\n            onClick={() => onSwitchPlugin('fleshRemoval')}\n          />\n          <IconText icon={<AnalyticsIcon />} text=\"Analytics\" type=\"plugin\" disabled={true} />\n          <IconText icon={<MoreIcon />} text=\"Settings\" type=\"plugin\" disabled={true} />\n        </Box>\n      </Box>\n\n      {currentItem.pluginType && <AiModelTabs />}\n\n      <Menu\n        anchorEl={menuAnchor}\n        open={showLayoutMenu}\n        classes={{ paper: classes.layoutMenu }}\n        onClose={() => toggleLayoutMenu(false)}\n      >\n        {MENU_ITEMS.map((item) => (\n          <MenuItem\n            key={item.layout}\n            selected={layout === item.layout}\n            onClick={() => onSwitchLayout(item.layout)}\n            className={classes.menuItem}\n          >\n            {item.icon}\n            <span className=\"layout-label\">{item.layout}</span>\n          </MenuItem>\n        ))}\n      </Menu>\n    </section>\n  )\n}\n","import { Grid } from '@material-ui/core'\nimport StudyList from './components/StudyList'\n\nimport LayoutPanel from './components/LayoutPanel'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { useCallback, useContext, useEffect, useRef, useState } from 'react'\nimport Toolbar from 'Toolbar/Toolbar'\nimport { DEFAULT_LAYOUT, globalSubject, Layout, SubjectTopic } from 'common/utils'\nimport { Study, Plugin, DraggableItem, DicomToolType, Protocols } from 'common/types'\n\nimport { usePatientDetailStyles } from './styles'\nimport { interval } from 'rxjs'\nimport { throttle } from 'rxjs/operators'\nimport { shortcut$, KeyCode } from 'common/shortcut'\nimport { ItemContext } from './hooks'\n\ninterface Props {\n  studiesByYear: Map<string, Study[]>\n  defaultItems: DraggableItem[]\n}\n\nexport default function PatientDetail(props: Props) {\n  const { studiesByYear, defaultItems } = props\n  const classes = usePatientDetailStyles()\n  const [layout, setLayout] = useState<Layout>(DEFAULT_LAYOUT)\n  const [activeItems, setActiveItems] = useState<DraggableItem[]>(defaultItems)\n  const [focusedIdx, setFocusedIdx] = useState(0)\n  const prevLayout = useRef<Layout | null>(null)\n  const { allItems } = useContext(ItemContext)\n\n  const onSwitchPlugin = useCallback(\n    (pluginType: Plugin | null) => {\n      switch (pluginType) {\n        case 'fleshRemoval':\n          if (activeItems[focusedIdx].func !== 'dicom') return\n          break\n      }\n\n      // To switch plugin or close\n      activeItems[focusedIdx] = {\n        ...activeItems[focusedIdx],\n        pluginType: activeItems[focusedIdx].pluginType === pluginType ? null : pluginType,\n      }\n      setActiveItems([...activeItems])\n    },\n    [activeItems, focusedIdx]\n  )\n\n  const onSwitchDicomTool = useCallback(\n    (toolType: DicomToolType) => {\n      setActiveItems((prev) => {\n        prev[focusedIdx].dicomToolType = toolType\n        return [...prev]\n      })\n    },\n    [focusedIdx]\n  )\n\n  const onSwitchHangingProtocol = useCallback((protocol: Protocols, items: DraggableItem[]) => {\n    let layout: Layout\n    switch (protocol) {\n      case 'pa/pa':\n        layout = 'pa/pa'\n        break\n      case 'pa/lat':\n        layout = 'pa/lat'\n        break\n      default:\n        // TODO: user defined hp\n        return\n    }\n    setLayout(layout)\n    setActiveItems((prev) => {\n      items.forEach((item, idx) => (prev[idx] = item))\n      return [...prev]\n    })\n  }, [])\n\n  const switchTargetItem = useCallback((item: DraggableItem, targetIdx: number) => {\n    setActiveItems((prev) => {\n      const newItems = [...prev]\n      newItems[targetIdx] = item\n      return newItems\n    })\n  }, [])\n\n  const backFromFullscreen = useCallback(() => {\n    setLayout(prevLayout.current!)\n    prevLayout.current = null\n  }, [])\n\n  const onChangeLayout = useCallback(\n    (newLayout: Layout) => {\n      prevLayout.current = layout\n      setLayout(newLayout)\n    },\n    [layout]\n  )\n\n  // Listening switch event from AiModelTabs\n  useEffect(() => {\n    const subscription = globalSubject.subscribe(\n      SubjectTopic.SwitchFunc,\n      ({ item }: { item: DraggableItem }) => {\n        switchTargetItem(item, focusedIdx)\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [focusedIdx, switchTargetItem])\n\n  useEffect(() => {\n    const currentItem = activeItems[focusedIdx]\n\n    function findTargetItemIdx(target: 'next' | 'prev'): number {\n      // Find current item index\n      const itemIdx = allItems.findIndex(({ id }) => id === currentItem.id)\n\n      const targetIdx = itemIdx + (target === 'next' ? 1 : -1)\n      // Target item does not exist\n      if (targetIdx < 0 || targetIdx === allItems.length) {\n        return -1\n      }\n\n      return targetIdx\n    }\n\n    // Navigate to the next item in the same series\n    const arrowDown = shortcut$([KeyCode.ArrowDown])\n      .pipe(throttle(() => interval(1000)))\n      .subscribe(() => {\n        const nextItemIdx = findTargetItemIdx('next')\n        if (\n          nextItemIdx > -1 &&\n          allItems[nextItemIdx].series_inst_uid === activeItems[focusedIdx].series_inst_uid\n        ) {\n          switchTargetItem(allItems[nextItemIdx], focusedIdx)\n        }\n      })\n\n    // Navigate to the previous item in the same series\n    const arrowUp = shortcut$([KeyCode.ArrowUp])\n      .pipe(throttle(() => interval(1000)))\n      .subscribe(() => {\n        const prevItemIdx = findTargetItemIdx('prev')\n        if (\n          prevItemIdx > -1 &&\n          allItems[prevItemIdx].series_inst_uid === activeItems[focusedIdx].series_inst_uid\n        ) {\n          switchTargetItem(allItems[prevItemIdx], focusedIdx)\n        }\n      })\n\n    // Navigate to the first item in next series\n    const arrowRight = shortcut$([KeyCode.ArrowRight])\n      .pipe(throttle(() => interval(1000)))\n      .subscribe(() => {\n        const nextItemIdx = findTargetItemIdx('next')\n        if (nextItemIdx === -1) {\n          return\n        }\n        // Iterate to the end and find the first item in next series\n        for (let idx = nextItemIdx; idx < allItems.length; idx++) {\n          const item = allItems[idx]\n          if (item.series_inst_uid !== currentItem.series_inst_uid) {\n            switchTargetItem(item, focusedIdx)\n            break\n          }\n        }\n      })\n\n    // Navigate to the first item in previous series\n    const arrowLeft = shortcut$([KeyCode.ArrowLeft])\n      .pipe(throttle(() => interval(1000)))\n      .subscribe(() => {\n        const prevItemIdx = findTargetItemIdx('prev')\n        if (prevItemIdx === -1) {\n          return\n        }\n        let targetSeriesInstUid: string | undefined\n        // Iterate to the beginning and find the last item in previous series\n        for (let idx = prevItemIdx; idx >= 0; idx--) {\n          const item = allItems[idx]\n          if (item.series_inst_uid !== currentItem.series_inst_uid) {\n            targetSeriesInstUid = item.series_inst_uid\n            break\n          }\n        }\n        // We are the first series, there is no previous series\n        if (!targetSeriesInstUid) {\n          return\n        }\n        const targetItem = allItems.find((item) => item.series_inst_uid === targetSeriesInstUid)\n        switchTargetItem(targetItem!, focusedIdx)\n      })\n\n    return () => {\n      arrowDown.unsubscribe()\n      arrowUp.unsubscribe()\n      arrowRight.unsubscribe()\n      arrowLeft.unsubscribe()\n    }\n  }, [activeItems, focusedIdx, allItems, switchTargetItem])\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <Grid container className={classes.patientDetail} wrap=\"nowrap\">\n        <Grid item className={classes.sidebar}>\n          <StudyList\n            studiesByYear={studiesByYear}\n            onOpenAi={() => onSwitchPlugin('ai')}\n            activeItems={activeItems}\n          />\n        </Grid>\n        <Grid item={true} className={classes.main}>\n          {activeItems.length > 0 && (\n            <>\n              <Toolbar\n                layout={layout}\n                changeLayout={onChangeLayout}\n                currentItem={activeItems[focusedIdx]}\n                onSwitchPlugin={onSwitchPlugin}\n                onSwitchDicomTool={onSwitchDicomTool}\n                onSwitchHangingProtocol={onSwitchHangingProtocol}\n              />\n              <LayoutPanel\n                items={activeItems}\n                layout={layout}\n                focusedIdx={focusedIdx}\n                changeLayout={onChangeLayout}\n                backFromFullscreen={backFromFullscreen}\n                focusItem={setFocusedIdx}\n                switchTargetItem={switchTargetItem}\n              />\n            </>\n          )}\n        </Grid>\n      </Grid>\n    </DndProvider>\n  )\n}\n","import { useQuery } from '@apollo/client'\nimport { useQueryParams } from 'common/hooks'\nimport { DraggableItem, Series, Study } from 'common/types'\nimport { GET_STUDIES } from './gql'\nimport PatientDetail from './PatientDetail'\n\nimport Hammer from 'hammerjs'\nimport dicomParser from 'dicom-parser'\nimport * as cornerstone from 'cornerstone-core'\nimport * as cornerstoneMath from 'cornerstone-math'\nimport * as cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader'\nimport * as cornerstoneTools from 'cornerstone-tools'\nimport {\n  parseImageItem,\n  GRIDS,\n  DEFAULT_LAYOUT,\n  parseStudiesByYear,\n  parseInferenceItem,\n} from 'common/utils'\nimport { useEffect, useMemo, useState } from 'react'\nimport { ItemContext, ItemContextType } from './hooks'\n\nfunction _initCornerstone() {\n  // Externals\n  cornerstoneWADOImageLoader.external.cornerstone = cornerstone\n  cornerstoneWADOImageLoader.external.dicomParser = dicomParser\n  cornerstoneTools.external.cornerstoneMath = cornerstoneMath\n  cornerstoneTools.external.cornerstone = cornerstone\n  cornerstoneTools.external.Hammer = Hammer\n  cornerstoneTools.init({\n    showSVGCursors: true,\n    mouseEnabled: true,\n  })\n}\n\nfunction parseDefaultItems(series: Series): DraggableItem[] {\n  const newItems: DraggableItem[] = []\n  series.images.forEach((img) => {\n    newItems.push(parseImageItem(img, series.series_inst_uid))\n  })\n\n  // If current series doesn't fill all the items, fill it with inference result\n  if (newItems.length < GRIDS[DEFAULT_LAYOUT]) {\n    series.inference.forEach((inf) => {\n      newItems.push(parseInferenceItem(inf, series.series_inst_uid))\n    })\n  }\n\n  // If current series still have empty block, fill it with null\n  if (newItems.length < GRIDS[DEFAULT_LAYOUT]) {\n    const emptyItems = new Array(GRIDS[DEFAULT_LAYOUT] - newItems.length).fill(\n      parseImageItem(null, '')\n    )\n    newItems.push(...emptyItems)\n  }\n\n  return newItems\n}\n\nfunction parseSpecificItems(\n  studies: Study[],\n  studyIds: string[],\n  imageIds: string[]\n): DraggableItem[] {\n  const newItems: DraggableItem[] = []\n\n  studies.forEach((study) => {\n    if (!studyIds.includes(study.study_inst_uid)) {\n      return\n    }\n\n    study.series.forEach(({ images, series_inst_uid }) => {\n      images.forEach((img) => {\n        if (!imageIds.includes(img.sop_inst_uid)) {\n          return\n        }\n        newItems.push(parseImageItem(img, series_inst_uid))\n      })\n    })\n  })\n\n  // If specific items are less than DEFAULT_LAYOUT, fill it with null\n  if (newItems.length < GRIDS[DEFAULT_LAYOUT]) {\n    const emptyItems = new Array(GRIDS[DEFAULT_LAYOUT] - newItems.length).fill(\n      parseImageItem(null, '')\n    )\n    newItems.push(...emptyItems)\n  }\n\n  return newItems\n}\n\nfunction flattenAllSeriesItems(studies: Study[]): DraggableItem[] {\n  const items: DraggableItem[] = []\n  studies.forEach(({ series }) => {\n    series.forEach(({ series_inst_uid, images, inference }) => {\n      images.forEach((img) => {\n        items.push(parseImageItem(img, series_inst_uid))\n      })\n      inference.forEach((inf) => {\n        items.push(parseInferenceItem(inf, series_inst_uid))\n      })\n    })\n  })\n  return items\n}\n\n_initCornerstone()\n\nexport default function PatientDetailContainer() {\n  const studyIds = useQueryParams('studyIds')\n  const imageIds = useQueryParams('imageIds')\n  const { error, data } = useQuery<{ studies: Study[] }, { ids: string[] }>(GET_STUDIES, {\n    variables: { ids: studyIds.split(',') },\n  })\n  const [studiesByYear, setStudiesByYear] = useState<Map<string, Study[]>>(new Map())\n  const [defaultItems, setDefaultItems] = useState<DraggableItem[]>([])\n  const contextValue = useMemo<ItemContextType>(() => {\n    return {\n      allItems: data ? flattenAllSeriesItems(data.studies) : [],\n    }\n  }, [data])\n\n  useEffect(() => {\n    if (!data) return\n    setStudiesByYear(parseStudiesByYear(data.studies))\n    setDefaultItems(\n      imageIds === 'all'\n        ? parseDefaultItems(data.studies[0].series[0])\n        : parseSpecificItems(data.studies, studyIds.split(','), imageIds.split(','))\n    )\n  }, [data, imageIds, studyIds])\n\n  if (error) {\n    return <>'error'</>\n  }\n\n  if (studiesByYear.size === 0) {\n    return <>'Loading'</>\n  }\n\n  return (\n    <ItemContext.Provider value={contextValue}>\n      <PatientDetail studiesByYear={studiesByYear} defaultItems={defaultItems} />\n    </ItemContext.Provider>\n  )\n}\n"],"sourceRoot":""}